---
title: "System Design"
---
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-02-08 Sat 12:25 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>System Design</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Victor Chen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/font.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/htmlize.css"/>
<script type="text/javascript" src="../../styles/readtheorg/js/jquery.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">System Design</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgdfc11c8">1 System Design Cheatsheet</a>
<ul>
<li><a href="#orgcfff90e">1.1 Basic Steps</a>
<ul>
<li><a href="#orgcbd086e">1.1.1 Scoping</a></li>
<li><a href="#org5d576ff">1.1.2 Abstract Design</a></li>
<li><a href="#orgcb35e34">1.1.3 Component Design</a></li>
<li><a href="#orgb452ecb">1.1.4 Bottlenecks</a></li>
<li><a href="#org6720d30">1.1.5 Scaling</a></li>
</ul>
</li>
<li><a href="#org0b91618">1.2 Key Topics</a>
<ul>
<li><a href="#org6dabc28">1.2.1 Caching</a></li>
<li><a href="#org3de9409">1.2.2 Load Balancing</a></li>
<li><a href="#org1f6d0cc">1.2.3 Database</a></li>
</ul>
</li>
<li><a href="#orgda7a2fa">1.3 Links</a></li>
</ul>
</li>
<li><a href="#org2713517">2 Messenger Service</a>
<ul>
<li><a href="#orgc90a43b">2.1 Features</a></li>
<li><a href="#orge644559">2.2 High-level Architecture</a></li>
<li><a href="#orgbaeeefc">2.3 Low-level Architecture</a></li>
<li><a href="#orgb254f07">2.4 States</a></li>
<li><a href="#org7d1d05d">2.5 Push Notification</a></li>
<li><a href="#orgd09964d">2.6 More Topics</a></li>
<li><a href="#org04bd7bb">2.7 Links</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgdfc11c8" class="outline-2">
<h2 id="orgdfc11c8"><span class="section-number-2">1</span> System Design Cheatsheet</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgcfff90e" class="outline-3">
<h3 id="orgcfff90e"><span class="section-number-3">1.1</span> Basic Steps</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-orgcbd086e" class="outline-4">
<h4 id="orgcbd086e"><span class="section-number-4">1.1.1</span> Scoping</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
Clarify and agree on the scope of the system.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>User cases</b></th>
<th scope="col" class="org-left">Who is going to use it?</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">How (as a sequence of events) are they going to use it?</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">Traffic: requests per second, requests types etc.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">Data handling: data input/output per second etc.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">Multithreading etc.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org5d576ff" class="outline-4">
<h4 id="org5d576ff"><span class="section-number-4">1.1.2</span> Abstract Design</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
Sktech high level architecture of important components and connections between them. For example:
</p>

<ul class="org-ul">
<li>Load balancer</li>
<li>Application layer (web server)</li>
<li>Data storage layer (master/slave, database cluster etc.)</li>
<li>Caching layer</li>
<li>Other services</li>
</ul>
</div>
</div>

<div id="outline-container-orgcb35e34" class="outline-4">
<h4 id="orgcb35e34"><span class="section-number-4">1.1.3</span> Component Design</h4>
<div class="outline-text-4" id="text-1-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>APIs</b></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>OO</b></td>
<td class="org-left">Map features to modules/classes.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">Relations and patterns: singleton, composition, inheritance etc.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Database schema</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgb452ecb" class="outline-4">
<h4 id="orgb452ecb"><span class="section-number-4">1.1.4</span> Bottlenecks</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
Identify and mitigate bottlenecks. E.g.
</p>

<ul class="org-ul">
<li>Bottleneck: data volume is too large ot database is too slow.</li>
<li>Mitigation: Distribute data on multiple machines, or add in-memory caching.</li>
</ul>
</div>
</div>

<div id="outline-container-org6720d30" class="outline-4">
<h4 id="org6720d30"><span class="section-number-4">1.1.5</span> Scaling</h4>
<div class="outline-text-4" id="text-1-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Vertical</b></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Horizontal</b></td>
<td class="org-left">Caching</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">Load balancing</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">Database partitioning, map-reduce</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org0b91618" class="outline-3">
<h3 id="org0b91618"><span class="section-number-3">1.2</span> Key Topics</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-org6dabc28" class="outline-4">
<h4 id="org6dabc28"><span class="section-number-4">1.2.1</span> Caching</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
Caching generally refers to in-memory caches, such as Memcached and Redis.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Application caching</b></th>
<th scope="col" class="org-left">Check if a key exists in cache. If not, retrieve from database.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Database caching</b></td>
<td class="org-left">Database's default config usually provides some degree of caching.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">There are more advanced optimizations, such as MySQL InnoDB buffer pool and query cache.</td>
</tr>
</tbody>
</table>

<p>
Caching strategies:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Pre-calculation</b></th>
<th scope="col" class="org-left">Pre-calculate expensive data and store in cache.</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">E.g. suggestion data, aggregation data.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Hot data</b></td>
<td class="org-left">Store more frequently used data in faster cache.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org3de9409" class="outline-4">
<h4 id="org3de9409"><span class="section-number-4">1.2.2</span> Load Balancing</h4>
<div class="outline-text-4" id="text-1-2-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Smart client</b></th>
<th scope="col" class="org-left">Client-side load balancing, more difficult to use.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Hardware load balancer</b></td>
<td class="org-left">Reliable but expensive.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Software load balancer</b></td>
<td class="org-left">Most used.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org1f6d0cc" class="outline-4">
<h4 id="org1f6d0cc"><span class="section-number-4">1.2.3</span> Database</h4>
<div class="outline-text-4" id="text-1-2-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Replication</b></th>
<th scope="col" class="org-left">Replicating changes between distributed databases to synchronize data.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Partitioning</b></td>
<td class="org-left">Decomposing data tables vertically (column-wise) or horizontally (row-wise, also called sharding).</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orgda7a2fa" class="outline-3">
<h3 id="orgda7a2fa"><span class="section-number-3">1.3</span> Links</h3>
<div class="outline-text-3" id="text-1-3">
<ol class="org-ol">
<li><a href="https://gist.github.com/vasanthk/485d1c25737e8e72759f">System Design Cheatsheet</a></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org2713517" class="outline-2">
<h2 id="org2713517"><span class="section-number-2">2</span> Messenger Service</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgc90a43b" class="outline-3">
<h3 id="orgc90a43b"><span class="section-number-3">2.1</span> Features</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Talk about features needed, from basic to advanced, e.g.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Content types</b></th>
<th scope="col" class="org-left">Text, image, voice, video</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Modes</b></td>
<td class="org-left">1-on-1, group</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Clients</b></td>
<td class="org-left">Web, mobile</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>States</b></td>
<td class="org-left">Sent, delivered, read</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>History</b></td>
<td class="org-left">How long is the history kept</td>
</tr>
</tbody>
</table>

<p>
<b>Architecture can be derived from features.</b>
</p>
</div>
</div>

<div id="outline-container-orge644559" class="outline-3">
<h3 id="orge644559"><span class="section-number-3">2.2</span> High-level Architecture</h3>
<div class="outline-text-3" id="text-2-2">
<p>
In the most basic scenario, there are 2 clients and 1 server.
</p>

<p>
Message sent from one client should be stored on the server, because the other client may not be online and the message cannot be lost. So the actual message sending is asynchronized.
</p>

<p>
The server is the bottleneck of the service. It should be horizontally scalable.
</p>

<p>
When there are multiple servers, clients should be able to connect to different servers while being in the same conversation.
</p>
</div>
</div>

<div id="outline-container-orgbaeeefc" class="outline-3">
<h3 id="orgbaeeefc"><span class="section-number-3">2.3</span> Low-level Architecture</h3>
<div class="outline-text-3" id="text-2-3">
<p>
<b>Once the high-level architecture is clear, drill down to the design and functions of a single server node.</b>
</p>

<p>
Messages sent to the servers should be stored in queues. When the receiver comes online, the messages are retrieved from the queue, can then can be deleted.
</p>

<p>
Because each time a client sends a message, it may connect to different servers (therefore stored in different queues), when the receicer retrieves the messages, they may be in an arbitrary order (assuming the timestamps on the messages are not precise enough).
</p>
</div>
</div>

<div id="outline-container-orgb254f07" class="outline-3">
<h3 id="orgb254f07"><span class="section-number-3">2.4</span> States</h3>
<div class="outline-text-3" id="text-2-4">
<ol class="org-ol">
<li>Sender sends a message to a server.</li>
<li>Server responds with a <code>sent</code> message.</li>
<li>Receiver retrieves the message.</li>
<li>Server sends (server initiates the connection) a <code>delivered</code> message to the sender.</li>
<li>Receiver reads the message.</li>
<li>Receiver sends a <code>read</code> message (can be implemented as a special type of message that works the same way behind the scene as a normal text message) to the sender via a server (can be a different server).</li>
<li>Sender retrieves the <code>read</code> message.</li>
</ol>
</div>
</div>

<div id="outline-container-org7d1d05d" class="outline-3">
<h3 id="org7d1d05d"><span class="section-number-3">2.5</span> Push Notification</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Push notification is usually platform-dependent, and there are existing services that can be used directly, such as Google Cloud Messenging. Push notifications usually work in fire-and-forget manners.
</p>

<p>
There can be a layer of servers that are dedicated to push notification processing. Once a normal server receives a message, it can request one of these servers to handle the push notification.
</p>
</div>
</div>

<div id="outline-container-orgd09964d" class="outline-3">
<h3 id="orgd09964d"><span class="section-number-3">2.6</span> More Topics</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>Other features: group chat, message history etc.</li>
<li>Scaling</li>
<li>Caching</li>
<li>Database sharding, replication</li>
<li>Monitoring</li>
</ul>
</div>
</div>

<div id="outline-container-org04bd7bb" class="outline-3">
<h3 id="org04bd7bb"><span class="section-number-3">2.7</span> Links</h3>
<div class="outline-text-3" id="text-2-7">
<ol class="org-ol">
<li><a href="https://www.youtube.com/watch?v=5m0L0k8ZtEs">System Design: Messenger service like Whatsapp or WeChat</a></li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Victor Chen</p>
<p class="date">Created: 2020-02-08 Sat 12:25</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
