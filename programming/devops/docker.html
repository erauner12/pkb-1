<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-08-15 Thu 15:59 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Docker</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Victor Chen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/font.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/htmlize.css"/>
<script type="text/javascript" src="../../styles/readtheorg/js/jquery.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Docker</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2b23831">1 Docker</a>
<ul>
<li><a href="#orged8dceb">1.1 Image</a>
<ul>
<li><a href="#org6a16ead">1.1.1 <code>onbuild</code></a></li>
</ul>
</li>
<li><a href="#org6e9d82c">1.2 Container</a></li>
<li><a href="#org188cbec">1.3 网络</a></li>
</ul>
</li>
<li><a href="#org678d427">2 Dockerfile</a>
<ul>
<li><a href="#org2a51dd8">2.1 指令列表</a></li>
<li><a href="#org105af3c">2.2 <code>CMD</code></a></li>
<li><a href="#org3c16154">2.3 <code>COPY</code></a></li>
<li><a href="#org3dc7810">2.4 <code>EXPOSE</code></a></li>
<li><a href="#org7c2da61">2.5 <code>FROM</code></a></li>
<li><a href="#org4edd1d0">2.6 <code>RUN</code></a></li>
<li><a href="#orgca02ed6">2.7 <code>WORKDIR</code></a></li>
</ul>
</li>
<li><a href="#orgf970842">3 Compose</a></li>
<li><a href="#org955868a">4 Compose File</a>
<ul>
<li><a href="#org202236a">4.1 示例</a></li>
<li><a href="#orgfefe60b">4.2 配置列表</a></li>
<li><a href="#org8c3495a">4.3 <code>build</code></a></li>
<li><a href="#org0ff018d">4.4 <code>command</code></a></li>
<li><a href="#orga890181">4.5 <code>environment</code></a></li>
<li><a href="#org983ff66">4.6 <code>ports</code></a></li>
<li><a href="#org4e3d4ff">4.7 <code>restart</code></a></li>
<li><a href="#orga5b4850">4.8 <code>services</code></a></li>
<li><a href="#orgc2693df">4.9 <code>volumes</code></a></li>
</ul>
</li>
<li><a href="#org67bba8c">5 <code>docker</code></a>
<ul>
<li><a href="#org6e2f212">5.1 命令列表</a></li>
<li><a href="#org15dcea8">5.2 <code>attach</code></a></li>
<li><a href="#orgc421429">5.3 <code>build</code></a></li>
<li><a href="#orgc1d66cb">5.4 <code>commit</code></a></li>
<li><a href="#org2dbb24c">5.5 <code>create</code></a></li>
<li><a href="#org6c17dbb">5.6 <code>exec</code></a></li>
<li><a href="#org69d4960">5.7 <code>image</code></a></li>
<li><a href="#org07e9a7c">5.8 <code>images</code></a></li>
<li><a href="#orga564f46">5.9 <code>kill</code></a></li>
<li><a href="#org84e215f">5.10 <code>logs</code></a></li>
<li><a href="#org1476a69">5.11 <code>network</code></a></li>
<li><a href="#org7f649ff">5.12 <code>port</code></a></li>
<li><a href="#org92c8c33">5.13 <code>ps</code></a></li>
<li><a href="#org980b4d1">5.14 <code>pull</code></a></li>
<li><a href="#orgf24a95e">5.15 <code>push</code></a></li>
<li><a href="#org2beb9fb">5.16 <code>rm</code></a></li>
<li><a href="#org75930a0">5.17 <code>run</code></a></li>
<li><a href="#org7f227b5">5.18 <code>search</code></a></li>
<li><a href="#org4dd117f">5.19 <code>start</code></a></li>
<li><a href="#org565c470">5.20 <code>stop</code></a></li>
<li><a href="#org050398d">5.21 <code>system</code></a></li>
</ul>
</li>
<li><a href="#org5dd8187">6 <code>docker-compose</code></a>
<ul>
<li><a href="#org7d4333b">6.1 <code>up</code></a></li>
</ul>
</li>
<li><a href="#org9857ce0">7 Links</a></li>
</ul>
</div>
</div>

<div id="outline-container-org2b23831" class="outline-2">
<h2 id="org2b23831"><span class="section-number-2">1</span> Docker</h2>
<div class="outline-text-2" id="text-1">
<p>
Docker is a tool for deploying applications in a sandbox (called containers) to run on the host operating system i.e. Linux. It allows bundling an application with its dependencies into a standardized unit for software development and deployment.
</p>
</div>

<div id="outline-container-orged8dceb" class="outline-3">
<h3 id="orged8dceb"><span class="section-number-3">1.1</span> Image</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Images are the basis of containers. Image is akin to a git repository - they can be committed with changes and have multiple versions. If a specific version number is not provided, the client defaults to <code>latest</code>.
</p>

<ul class="org-ul">
<li>Base images are usually images with an OS like ubuntu, busybox or debian.</li>
<li>Child images are built on base images with additional functionality.</li>
</ul>
</div>

<div id="outline-container-org6a16ead" class="outline-4">
<h4 id="org6a16ead"><span class="section-number-4">1.1.1</span> <code>onbuild</code></h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
镜像的 <code>onbuild</code> 版本的通常作为其他镜像的 base 镜像，负责复制文件、安装依赖等工作。
</p>
</div>
</div>
</div>

<div id="outline-container-org6e9d82c" class="outline-3">
<h3 id="org6e9d82c"><span class="section-number-3">1.2</span> Container</h3>
<div class="outline-text-3" id="text-1-2">
<p>
VMs run applications inside a guest Operating System, which runs on virtual hardware powered by the server's host OS. VMs provide full process isolation for applications: the host and guest system don't affect each other. But this isolation comes at great cost — the computational overhead spent virtualizing hardware for a guest OS to use is substantial.
</p>

<p>
Containers leverage the low-level mechanics of the host operating system, and provide most of the isolation of virtual machines at a fraction of the computing power.
</p>
</div>
</div>

<div id="outline-container-org188cbec" class="outline-3">
<h3 id="org188cbec"><span class="section-number-3">1.3</span> 网络</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Docker 支持创建相互隔离的网络，Docker 安装时自动创建三个网络：
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><code>none</code></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>host</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>bridge</code></td>
<td class="org-left">容器默认网络</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org678d427" class="outline-2">
<h2 id="org678d427"><span class="section-number-2">2</span> Dockerfile</h2>
<div class="outline-text-2" id="text-2">
<p>
Dockerfile 是构建镜像的指令列表。
</p>

<p>
<code>Dockerfile</code> 可以使用后缀区分部署环境，如 <code>Dockerfile.dev</code> ，构建镜像时使用 <code>docker build -f</code> 指定文件名。
</p>
</div>

<div id="outline-container-org2a51dd8" class="outline-3">
<h3 id="org2a51dd8"><span class="section-number-3">2.1</span> 指令列表</h3>
<div class="outline-text-3" id="text-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>镜像</b></th>
<th scope="col" class="org-left"><code>FROM</code></th>
<th scope="col" class="org-left">Base 镜像</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>配置</b></td>
<td class="org-left"><code>WORKDIR</code></td>
<td class="org-left">指定工作目录</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>RUN</code></td>
<td class="org-left">执行命令</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>COPY</code></td>
<td class="org-left">复制到容器文件系统</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>ADD</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>EXPOSE</code></td>
<td class="org-left">暴露端口</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>启动</b></td>
<td class="org-left"><code>CMD</code></td>
<td class="org-left">启动命令</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org105af3c" class="outline-3">
<h3 id="org105af3c"><span class="section-number-3">2.2</span> <code>CMD</code></h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-sh">CMD [<span class="org-string">"&lt;command&gt;"</span>, <span class="org-string">"&lt;argument&gt;"</span>, ...]
</pre>
</div>

<p>
如果不指定启动命令，则默认使用 base 镜像的启动命令。
</p>
</div>
</div>

<div id="outline-container-org3c16154" class="outline-3">
<h3 id="org3c16154"><span class="section-number-3">2.3</span> <code>COPY</code></h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-sh">COPY &lt;options&gt; &lt;host_path&gt; &lt;container_path&gt;
  --from=&lt;stage&gt;   <span class="org-comment-delimiter"># </span><span class="org-comment">&#20174;&#25351;&#23450; stage &#22797;&#21046;</span>
  &lt;host_path&gt;      <span class="org-comment-delimiter"># </span><span class="org-comment">./ &#20026;&#20027;&#26426;&#24403;&#21069;&#36335;&#24452;</span>
  &lt;container_path&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">./ &#20026;&#23481;&#22120;&#26681;&#30446;&#24405;</span>
</pre>
</div>

<p>
镜像中已存在的文件会被覆盖。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span><code>--from</code> 示例</label><pre class="src src-sh">FROM alpine AS foo
WORKDIR /usr
RUN touch file.txt

FROM alpine
COPY --from=foo /usr/file.txt .
</pre>
</div>
</div>
</div>

<div id="outline-container-org3dc7810" class="outline-3">
<h3 id="org3dc7810"><span class="section-number-3">2.4</span> <code>EXPOSE</code></h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">
<pre class="src src-sh">EXPOSE &lt;port&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c2da61" class="outline-3">
<h3 id="org7c2da61"><span class="section-number-3">2.5</span> <code>FROM</code></h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">
<pre class="src src-sh">FROM &lt;image&gt;:&lt;tag&gt; AS &lt;stage&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4edd1d0" class="outline-3">
<h3 id="org4edd1d0"><span class="section-number-3">2.6</span> <code>RUN</code></h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">
<pre class="src src-sh">RUN &lt;command&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca02ed6" class="outline-3">
<h3 id="orgca02ed6"><span class="section-number-3">2.7</span> <code>WORKDIR</code></h3>
<div class="outline-text-3" id="text-2-7">
<p>
使之后的命令相对于指定目录执行，包括 <code>Dockerfile</code> 中的指令，和容器运行后通过 <code>docker exec</code> 执行的命令。
</p>

<div class="org-src-container">
<pre class="src src-sh">WORKDIR &lt;path&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf970842" class="outline-2">
<h2 id="orgf970842"><span class="section-number-2">3</span> Compose</h2>
<div class="outline-text-2" id="text-3">
<p>
Docker Compose 用于同时运行多个容器，通过 YAML 文件配置容器的启动参数，如网络端口，以替代 <code>docker run</code> 命令的复杂选项。
</p>
</div>
</div>

<div id="outline-container-org955868a" class="outline-2">
<h2 id="org955868a"><span class="section-number-2">4</span> Compose File</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-org202236a" class="outline-3">
<h3 id="org202236a"><span class="section-number-3">4.1</span> 示例</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span><code>docker-compose.yml</code></label><pre class="src src-yaml"><span class="org-variable-name">version</span>: <span class="org-string">"3"</span>
<span class="org-variable-name">services</span>:
  <span class="org-variable-name">redis</span>: <span class="org-comment-delimiter"># </span><span class="org-comment">&#20381;&#36182;&#26381;&#21153;&#65292;&#30452;&#25509;&#20351;&#29992; Docker Hub &#30340;&#38236;&#20687;</span>
<span class="org-yaml-tab">    </span><span class="org-variable-name">image</span>: <span class="org-string">"redis:latest"</span>
  <span class="org-variable-name">server</span>: <span class="org-comment-delimiter"># </span><span class="org-comment">&#26412;&#22320;&#26381;&#21153;&#65292;&#38656;&#35201;&#26500;&#24314;&#38236;&#20687;</span>
<span class="org-yaml-tab">    </span><span class="org-variable-name">build</span>:
<span class="org-yaml-tab">    </span><span class="org-variable-name">  context</span>: ./server
<span class="org-yaml-tab">    </span><span class="org-variable-name">  dockerfile</span>: Dockerfile.dev
<span class="org-yaml-tab">    </span><span class="org-variable-name">environment</span>:
<span class="org-yaml-tab">    </span>  - REDIS_HOST=redis
<span class="org-yaml-tab">    </span><span class="org-variable-name">volumes</span>:
<span class="org-yaml-tab">    </span>  - ./server:/app
<span class="org-yaml-tab">    </span>  - /app/temp
<span class="org-yaml-tab">    </span><span class="org-variable-name">ports</span>:
<span class="org-yaml-tab">    </span>  - <span class="org-string">"4001:8081"</span>
<span class="org-yaml-tab">    </span><span class="org-variable-name">restart</span>: always
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfefe60b" class="outline-3">
<h3 id="orgfefe60b"><span class="section-number-3">4.2</span> 配置列表</h3>
<div class="outline-text-3" id="text-4-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>version</code></th>
<th scope="col" class="org-left">Compose 文件版本</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>services</code></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>image</code></td>
<td class="org-left"><code>FROM</code> ，使用已有镜像</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>build</code></td>
<td class="org-left"><code>docker build &lt;path&gt;</code> ， 根据指定路径构建镜像</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>environment</code></td>
<td class="org-left">环境变量</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>volumes</code></td>
<td class="org-left"><code>docker run -v</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>ports</code></td>
<td class="org-left"><code>docker run -p</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>command</code></td>
<td class="org-left"><code>docker run &lt;command&gt;</code> ， 覆盖镜像启动命令</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org8c3495a" class="outline-3">
<h3 id="org8c3495a"><span class="section-number-3">4.3</span> <code>build</code></h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">
<pre class="src src-yaml"><span class="org-variable-name">build</span>: &lt;path&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">Dockerfile &#36335;&#24452;</span>

<span class="org-variable-name">build</span>:
  <span class="org-variable-name">context</span>: &lt;path&gt;    <span class="org-comment-delimiter"># </span><span class="org-comment">&#39033;&#30446;&#25991;&#20214;&#36335;&#24452;</span>
  <span class="org-variable-name">dockerfile</span>: &lt;path&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">Dockerfile &#36335;&#24452;&#65288;&#21253;&#21547;&#25991;&#20214;&#21517;&#65289;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ff018d" class="outline-3">
<h3 id="org0ff018d"><span class="section-number-3">4.4</span> <code>command</code></h3>
<div class="outline-text-3" id="text-4-4">
<div class="org-src-container">
<pre class="src src-yaml"><span class="org-variable-name">command</span>: [<span class="org-string">"&lt;command&gt;"</span>, <span class="org-string">"&lt;argument&gt;"</span>, ...]
</pre>
</div>
</div>
</div>

<div id="outline-container-orga890181" class="outline-3">
<h3 id="orga890181"><span class="section-number-3">4.5</span> <code>environment</code></h3>
<div class="outline-text-3" id="text-4-5">
<div class="org-src-container">
<pre class="src src-yaml"><span class="org-variable-name">environment</span>:
  - &lt;name&gt;=&lt;value&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#20351;&#29992;&#25351;&#23450;&#20540;</span>
  - &lt;name&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#20351;&#29992;&#20027;&#26426;&#30340;&#29615;&#22659;&#21464;&#37327;&#20540; </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org983ff66" class="outline-3">
<h3 id="org983ff66"><span class="section-number-3">4.6</span> <code>ports</code></h3>
<div class="outline-text-3" id="text-4-6">
<div class="org-src-container">
<pre class="src src-yaml"><span class="org-variable-name">ports</span>:
  - <span class="org-string">'&lt;host_port&gt;:&lt;container_port&gt;'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4e3d4ff" class="outline-3">
<h3 id="org4e3d4ff"><span class="section-number-3">4.7</span> <code>restart</code></h3>
<div class="outline-text-3" id="text-4-7">
<div class="org-src-container">
<pre class="src src-yaml"><span class="org-variable-name">restart</span>: &lt;value&gt;
  <span class="org-string">'no'</span>           <span class="org-comment-delimiter"># </span><span class="org-comment">&#19981;&#37325;&#21551;</span>
  always         <span class="org-comment-delimiter"># </span><span class="org-comment">&#22987;&#32456;&#37325;&#21551;</span>
  on-failure     <span class="org-comment-delimiter"># </span><span class="org-comment">&#36820;&#22238;&#30721;&#20026;&#38169;&#35823;&#26102;&#65288;&#38750; 0&#65289;&#37325;&#21551;</span>
  unless-stopped <span class="org-comment-delimiter"># </span><span class="org-comment">&#22987;&#32456;&#37325;&#21551;&#65292;&#38500;&#38750;&#25163;&#21160;&#24378;&#21046;&#32456;&#27490;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga5b4850" class="outline-3">
<h3 id="orga5b4850"><span class="section-number-3">4.8</span> <code>services</code></h3>
<div class="outline-text-3" id="text-4-8">
<div class="org-src-container">
<pre class="src src-yaml"><span class="org-variable-name">services</span>:
  <span class="org-variable-name">&lt;name&gt;</span>:
<span class="org-yaml-tab">    </span>...
</pre>
</div>

<p>
Service 的名称 <code>&lt;name&gt;</code> 即容器的主机名，Docker Compose 创建的容器可以通过主机名相互连接。
</p>
</div>
</div>

<div id="outline-container-orgc2693df" class="outline-3">
<h3 id="orgc2693df"><span class="section-number-3">4.9</span> <code>volumes</code></h3>
<div class="outline-text-3" id="text-4-9">
<div class="org-src-container">
<pre class="src src-yaml"><span class="org-variable-name">volumes</span>:
  - &lt;host_path&gt;:&lt;container_path&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#20027;&#26426;&#36335;&#24452;&#21040;&#23481;&#22120;&#36335;&#24452;&#30340;&#26144;&#23556;</span>
  - &lt;container_path_exception&gt;   <span class="org-comment-delimiter"># </span><span class="org-comment">&#34987;&#25490;&#38500;&#30340;&#23481;&#22120;&#36335;&#24452;&#19981;&#34987;&#26144;&#23556;&#21040;&#20027;&#26426;&#36335;&#24452;</span>
</pre>
</div>

<p>
设置路径映射，用于容器直接读取主机路径下的文件，文件被主机修改时将直接生效，不需要通过 <code>COPY</code> 重建镜像。
</p>
</div>
</div>
</div>

<div id="outline-container-org67bba8c" class="outline-2">
<h2 id="org67bba8c"><span class="section-number-2">5</span> <code>docker</code></h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-org6e2f212" class="outline-3">
<h3 id="org6e2f212"><span class="section-number-3">5.1</span> 命令列表</h3>
<div class="outline-text-3" id="text-5-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>镜像</b></th>
<th scope="col" class="org-left"><code>build</code></th>
<th scope="col" class="org-left">从 <code>Dockerfile</code> 构建镜像</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>commit</code></th>
<th scope="col" class="org-left">从容器构建镜像</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>image</code></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>images</code></th>
<th scope="col" class="org-left">镜像列表</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>pull</code></th>
<th scope="col" class="org-left">获取镜像</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>push</code></th>
<th scope="col" class="org-left">推送镜像</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>rmi</code></th>
<th scope="col" class="org-left">删除镜像</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>search</code></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>容器</b></td>
<td class="org-left"><code>run</code></td>
<td class="org-left">创建并运行容器</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>ps</code></td>
<td class="org-left">显示容器列表</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>attach</code></td>
<td class="org-left">将本地 IO 连接到容器</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>exec</code></td>
<td class="org-left">在容器内执行命令</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>logs</code></td>
<td class="org-left">获取容器运行日志</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>create</code></td>
<td class="org-left">创建容器</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>rm</code></td>
<td class="org-left">删除容器</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>start</code></td>
<td class="org-left">运行容器</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>stop</code></td>
<td class="org-left">终止容器 <code>SIGTERM</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>kill</code></td>
<td class="org-left">终止容器 <code>SIGKILL</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>网络</b></td>
<td class="org-left"><code>network</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>port</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Docker</b></td>
<td class="org-left"><code>system</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org15dcea8" class="outline-3">
<h3 id="org15dcea8"><span class="section-number-3">5.2</span> <code>attach</code></h3>
<div class="outline-text-3" id="text-5-2">
<p>
将本地 IO （ <code>STDIN</code> <code>STDOUT</code> <code>STDERR</code> ）连接到容器。只能连接到容器内 ID 为 1 的进程。
</p>

<div class="org-src-container">
<pre class="src src-sh">docker attach &lt;container&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc421429" class="outline-3">
<h3 id="orgc421429"><span class="section-number-3">5.3</span> <code>build</code></h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<pre class="src src-sh">docker build &lt;options&gt; &lt;path&gt;
  -f, --file &lt;file&gt;      <span class="org-comment-delimiter"># </span><span class="org-comment">&#25351;&#23450; Dockerfile</span>
  -t, --tag &lt;name&gt;:&lt;tag&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#25351;&#23450;&#26631;&#31614;&#65292;&#40664;&#35748;&#20026; latest</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">$ docker build . <span class="org-comment-delimiter"># </span><span class="org-comment">Dockerfile &#22312;&#24403;&#21069;&#30446;&#24405;</span>
$ docker build -t foo/bar:latest
  <span class="org-comment-delimiter"># </span><span class="org-comment">foo:    Docker ID</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">bar:    Project name</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">latest: Version tag                             </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc1d66cb" class="outline-3">
<h3 id="orgc1d66cb"><span class="section-number-3">5.4</span> <code>commit</code></h3>
<div class="outline-text-3" id="text-5-4">
<div class="org-src-container">
<pre class="src src-sh">docker commit &lt;options&gt; &lt;container&gt;
  -c, --change <span class="org-comment-delimiter"># </span><span class="org-comment">&#35774;&#32622; Dockerfile &#25351;&#20196;</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">$ docker commit -c <span class="org-string">'CMD ["&lt;command&gt;"]'</span> &lt;container&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#35774;&#32622;&#38236;&#20687;&#21551;&#21160;&#21629;&#20196;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2dbb24c" class="outline-3">
<h3 id="org2dbb24c"><span class="section-number-3">5.5</span> <code>create</code></h3>
<div class="outline-text-3" id="text-5-5">
<div class="org-src-container">
<pre class="src src-sh">docker create &lt;options&gt; &lt;image&gt; &lt;command&gt;

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;command&gt; &#21551;&#21160;&#21629;&#20196;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Returns the container ID</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c17dbb" class="outline-3">
<h3 id="org6c17dbb"><span class="section-number-3">5.6</span> <code>exec</code></h3>
<div class="outline-text-3" id="text-5-6">
<div class="org-src-container">
<pre class="src src-sh">docker exec &lt;options&gt; &lt;container&gt; &lt;command&gt;
  -i, --interactive
  -t, --tty
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">$ docker exec -it &lt;container&gt; sh
</pre>
</div>
</div>
</div>

<div id="outline-container-org69d4960" class="outline-3">
<h3 id="org69d4960"><span class="section-number-3">5.7</span> <code>image</code></h3>
<div class="outline-text-3" id="text-5-7">
<div class="org-src-container">
<pre class="src src-sh">docker image &lt;command&gt;
  rm &lt;image&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org07e9a7c" class="outline-3">
<h3 id="org07e9a7c"><span class="section-number-3">5.8</span> <code>images</code></h3>
<div class="outline-text-3" id="text-5-8">
<div class="org-src-container">
<pre class="src src-sh">docker images &lt;options&gt;
  &lt;empty&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#26412;&#22320;&#38236;&#20687;&#21015;&#34920;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga564f46" class="outline-3">
<h3 id="orga564f46"><span class="section-number-3">5.9</span> <code>kill</code></h3>
<div class="outline-text-3" id="text-5-9">
<div class="org-src-container">
<pre class="src src-sh">docker kill &lt;container&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org84e215f" class="outline-3">
<h3 id="org84e215f"><span class="section-number-3">5.10</span> <code>logs</code></h3>
<div class="outline-text-3" id="text-5-10">
<div class="org-src-container">
<pre class="src src-sh">docker logs &lt;options&gt; &lt;container&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">$ docker run busybox echo foo
&lt;container&gt;
$ docker start &lt;container&gt;
$ docker logs &lt;container&gt;
foo
$ docker start &lt;container&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#22810;&#27425;&#36816;&#34892;</span>
$ docker logs &lt;container&gt;
foo
foo <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#22810;&#27425;&#36816;&#34892;&#30340;&#26085;&#24535;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1476a69" class="outline-3">
<h3 id="org1476a69"><span class="section-number-3">5.11</span> <code>network</code></h3>
<div class="outline-text-3" id="text-5-11">
<div class="org-src-container">
<pre class="src src-sh">docker network &lt;command&gt;
  create &lt;network&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#21019;&#24314; bridge &#32593;&#32476;</span>
  inspect &lt;network&gt;
  ls
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f649ff" class="outline-3">
<h3 id="org7f649ff"><span class="section-number-3">5.12</span> <code>port</code></h3>
<div class="outline-text-3" id="text-5-12">
<div class="org-src-container">
<pre class="src src-sh">docker port &lt;container&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org92c8c33" class="outline-3">
<h3 id="org92c8c33"><span class="section-number-3">5.13</span> <code>ps</code></h3>
<div class="outline-text-3" id="text-5-13">
<div class="org-src-container">
<pre class="src src-sh">docker ps &lt;options&gt;
  &lt;empty&gt;      <span class="org-comment-delimiter"># </span><span class="org-comment">&#26174;&#31034;&#27491;&#22312;&#36816;&#34892;&#30340;&#23481;&#22120;</span>
  -a, --all    <span class="org-comment-delimiter"># </span><span class="org-comment">&#26174;&#31034;&#25152;&#26377;&#23481;&#22120;</span>
  -f, --filter <span class="org-comment-delimiter"># </span><span class="org-comment">&#26465;&#20214;&#31579;&#36873;</span>
    &lt;key&gt;=&lt;value&gt;
  -q, --quiet  <span class="org-comment-delimiter"># </span><span class="org-comment">&#21482;&#26174;&#31034;&#23481;&#22120; ID</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org980b4d1" class="outline-3">
<h3 id="org980b4d1"><span class="section-number-3">5.14</span> <code>pull</code></h3>
<div class="outline-text-3" id="text-5-14">
<p>
从 Docker registry 获取镜像并保存到本地。
</p>

<div class="org-src-container">
<pre class="src src-sh">docker pull &lt;options&gt; &lt;name&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf24a95e" class="outline-3">
<h3 id="orgf24a95e"><span class="section-number-3">5.15</span> <code>push</code></h3>
<div class="outline-text-3" id="text-5-15">
<div class="org-src-container">
<pre class="src src-sh">docker push &lt;options&gt; &lt;name&gt;:&lt;tag&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org2beb9fb" class="outline-3">
<h3 id="org2beb9fb"><span class="section-number-3">5.16</span> <code>rm</code></h3>
<div class="outline-text-3" id="text-5-16">
<div class="org-src-container">
<pre class="src src-sh">docker rm &lt;options&gt; &lt;container&gt;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span><code>docker ps</code> 获取容器 ID 列表</label><pre class="src src-sh">docker rm $(docker ps -aq -f <span class="org-variable-name">status</span>=exited)
</pre>
</div>
</div>
</div>

<div id="outline-container-org75930a0" class="outline-3">
<h3 id="org75930a0"><span class="section-number-3">5.17</span> <code>run</code></h3>
<div class="outline-text-3" id="text-5-17">
<p>
<code>docker run = docker create + docker start</code>
</p>

<div class="org-src-container">
<pre class="src src-sh">docker run &lt;options&gt; &lt;image&gt; &lt;command&gt; &lt;args&gt;

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;options&gt; &#36816;&#34892;</span>
  -d, --detach        <span class="org-comment-delimiter"># </span><span class="org-comment">&#21518;&#21488;&#36816;&#34892;&#27169;&#24335;</span>
  -i, --interactive   <span class="org-comment-delimiter"># </span><span class="org-comment">&#20132;&#20114;&#27169;&#24335;&#65288;&#20445;&#25345; STDIN &#25171;&#24320;&#29366;&#24577;&#65289;</span>
  -t, --tty           <span class="org-comment-delimiter"># </span><span class="org-comment">&#20998;&#37197;&#34394;&#25311; TTY</span>
  --name &lt;name&gt;       <span class="org-comment-delimiter"># </span><span class="org-comment">&#20026;&#23481;&#22120;&#21629;&#21517;</span>
  --rm                <span class="org-comment-delimiter"># </span><span class="org-comment">&#36864;&#20986;&#26102;&#33258;&#21160;&#21024;&#38500;</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;options&gt; &#32593;&#32476;</span>
  -p, --publish       <span class="org-comment-delimiter"># </span><span class="org-comment">&#20998;&#37197;&#31471;&#21475;</span>
    &lt;host_port&gt;:&lt;container_port&gt;
    &lt;host_ip&gt;:&lt;container_ip&gt;
  -P, --publish-all   <span class="org-comment-delimiter"># </span><span class="org-comment">&#20026;&#25152;&#26377;&#26292;&#38706;&#31471;&#21475;&#20998;&#37197;&#38543;&#26426;&#31471;</span>
  --network &lt;network&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#25351;&#23450;&#32593;&#32476;</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;options&gt; &#30828;&#30424;</span>
  -v, --volume        <span class="org-comment-delimiter"># </span><span class="org-comment">&#25346;&#36733;&#19968;&#20010; volume</span>
    &lt;host_path&gt;:&lt;container_path&gt;
    &lt;container_path_exception&gt;   <span class="org-comment-delimiter"># </span><span class="org-comment">&#34987;&#25490;&#38500;&#30340;&#36335;&#24452;&#25351;&#21521;&#23481;&#22120;&#26412;&#22320;</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;command&gt; &#35206;&#30422;&#38236;&#20687;&#30340;&#40664;&#35748;&#21629;&#20196;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>确认 Docker 安装</label><pre class="src src-sh">$ docker run hello-world
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f227b5" class="outline-3">
<h3 id="org7f227b5"><span class="section-number-3">5.18</span> <code>search</code></h3>
<div class="outline-text-3" id="text-5-18">
<div class="org-src-container">
<pre class="src src-sh">docker search &lt;options&gt; &lt;keyword&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4dd117f" class="outline-3">
<h3 id="org4dd117f"><span class="section-number-3">5.19</span> <code>start</code></h3>
<div class="outline-text-3" id="text-5-19">
<div class="org-src-container">
<pre class="src src-sh">docker start &lt;options&gt; &lt;container&gt;
  -a, --attach <span class="org-comment-delimiter"># </span><span class="org-comment">Attach STDOUT/STDERR and forward signals</span>
               <span class="org-comment-delimiter"># </span><span class="org-comment">Prints out output from container</span>
</pre>
</div>

<p>
<code>docker start</code> 只能执行容器创建时指定的启动命令，不能重新指定启动命令。
</p>
</div>
</div>

<div id="outline-container-org565c470" class="outline-3">
<h3 id="org565c470"><span class="section-number-3">5.20</span> <code>stop</code></h3>
<div class="outline-text-3" id="text-5-20">
<div class="org-src-container">
<pre class="src src-sh">docker stop &lt;options&gt; &lt;container&gt;
  -t, --time <span class="org-comment-delimiter"># </span><span class="org-comment">&#24378;&#21046;&#32456;&#27490;&#21069;&#31561;&#24453;&#31186;&#25968;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org050398d" class="outline-3">
<h3 id="org050398d"><span class="section-number-3">5.21</span> <code>system</code></h3>
<div class="outline-text-3" id="text-5-21">
<div class="org-src-container">
<pre class="src src-sh">docker system &lt;command&gt;
  prune    <span class="org-comment-delimiter"># </span><span class="org-comment">Delete dangling (not associated with a container) images, containers, volumes, and networks</span>
  prune -a <span class="org-comment-delimiter"># </span><span class="org-comment">Delete stopped containers and unused images</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5dd8187" class="outline-2">
<h2 id="org5dd8187"><span class="section-number-2">6</span> <code>docker-compose</code></h2>
<div class="outline-text-2" id="text-6">
<p>
<code>docker-compose</code> 命令的对象是当前目录的 <code>docker-compose.yml</code> 定义的容器。
</p>

<div class="org-src-container">
<pre class="src src-sh">docker-compose &lt;options&gt; &lt;command&gt;
  &lt;options&gt;
    -f, --file &lt;file&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#25351;&#23450; compose file&#65292;&#40664;&#35748;&#20026; ./docker-compose.yml</span>
  &lt;command&gt;
    up   <span class="org-comment-delimiter"># </span><span class="org-comment">&#36816;&#34892;&#23481;&#22120;</span>
    down <span class="org-comment-delimiter"># </span><span class="org-comment">&#32456;&#27490;&#23481;&#22120;</span>
    ps   <span class="org-comment-delimiter"># </span><span class="org-comment">&#26174;&#31034;&#23481;&#22120;&#21015;&#34920;</span>
</pre>
</div>
</div>

<div id="outline-container-org7d4333b" class="outline-3">
<h3 id="org7d4333b"><span class="section-number-3">6.1</span> <code>up</code></h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-sh">docker-compose up &lt;options&gt;
  --build      <span class="org-comment-delimiter"># </span><span class="org-comment">docker build &amp;&amp; docker run&#65292;&#24378;&#21046;&#37325;&#26032;&#26500;&#24314;&#38236;&#20687;</span>
  -d, --detach <span class="org-comment-delimiter"># </span><span class="org-comment">docker run -d</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9857ce0" class="outline-2">
<h2 id="org9857ce0"><span class="section-number-2">7</span> Links</h2>
<div class="outline-text-2" id="text-7">
<ol class="org-ol">
<li><a href="https://docs.docker.com/reference/">Docker Reference</a></li>
<li><a href="https://hub.docker.com/">Docker Hub</a></li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Victor Chen</p>
<p class="date">Created: 2019-08-15 Thu 15:59</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
