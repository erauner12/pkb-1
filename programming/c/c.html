---
title: "C"
---
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-07-23 Tue 16:06 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>C</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Victor Chen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/font.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/htmlize.css"/>
<script type="text/javascript" src="../../styles/readtheorg/js/jquery.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">C</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org57896d2">1 特性</a></li>
<li><a href="#orgdc63c74">2 类型</a>
<ul>
<li><a href="#org9b382bd">2.1 数字</a>
<ul>
<li><a href="#orgb8362f5">2.1.1 数字常量</a></li>
</ul>
</li>
<li><a href="#orgd34877c">2.2 字符</a>
<ul>
<li><a href="#org376e913">2.2.1 字符常量</a></li>
<li><a href="#orge03bdf2">2.2.2 字符转义</a></li>
</ul>
</li>
<li><a href="#orge6b93b8">2.3 字符串</a>
<ul>
<li><a href="#orgdc90f74">2.3.1 字符串常量</a></li>
</ul>
</li>
<li><a href="#orgcb7aa60">2.4 类型转换</a>
<ul>
<li><a href="#org43e1b42">2.4.1 自动转换</a></li>
<li><a href="#orge45b7b3">2.4.2 显式转换</a></li>
</ul>
</li>
<li><a href="#org86ca4ce">2.5 <code>typedef</code></a></li>
<li><a href="#orgb6d0df7">2.6 <code>volatile</code></a></li>
</ul>
</li>
<li><a href="#org7df8d33">3 数组</a>
<ul>
<li><a href="#org96f8193">3.1 数字数组</a></li>
<li><a href="#org7cf6fd4">3.2 字符数组</a></li>
<li><a href="#orgc024659">3.3 字符串数组</a></li>
<li><a href="#orgb70da66">3.4 数组 &amp; 指针</a></li>
<li><a href="#org815f56e">3.5 多维数组 &amp; 指针数组</a></li>
</ul>
</li>
<li><a href="#orgc08efdc">4 指针</a>
<ul>
<li><a href="#org3534944">4.1 原理</a></li>
<li><a href="#orgcfb3f83">4.2 类型</a></li>
<li><a href="#orgcd8d669">4.3 变量</a>
<ul>
<li><a href="#org82d8502">4.3.1 声明</a></li>
<li><a href="#org6dcb85c">4.3.2 释放</a></li>
</ul>
</li>
<li><a href="#org775b061">4.4 函数</a>
<ul>
<li><a href="#orgeb71162">4.4.1 参数指针</a></li>
<li><a href="#orgf0beaa1">4.4.2 返回值指针</a></li>
<li><a href="#org123b258">4.4.3 参数引用</a></li>
<li><a href="#orgd49b8c0">4.4.4 返回值引用</a></li>
<li><a href="#org19b3d9d">4.4.5 函数指针</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org1e8f80f">5 结构</a>
<ul>
<li><a href="#org48674b1">5.1 声明</a></li>
<li><a href="#orgae0ac67">5.2 初始化</a></li>
<li><a href="#org3528b68">5.3 访问</a>
<ul>
<li><a href="#org05af0c3">5.3.1 访问成员</a></li>
<li><a href="#org3807656">5.3.2 通过结构指针访问成员</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfe3c795">6 变量</a>
<ul>
<li><a href="#org40b1c9e">6.1 变量名</a></li>
<li><a href="#orgbbf9da2">6.2 初始化</a></li>
<li><a href="#orgab64505">6.3 本地变量</a></li>
<li><a href="#orgbdf33a8">6.4 外部变量</a>
<ul>
<li><a href="#org0fd0177">6.4.1 使用</a></li>
</ul>
</li>
<li><a href="#orgf987d9c">6.5 静态变量</a></li>
<li><a href="#org948a9d1">6.6 寄存器变量</a></li>
</ul>
</li>
<li><a href="#orgb0611ab">7 常量</a>
<ul>
<li><a href="#orgd048af0">7.1 常量</a></li>
<li><a href="#orge0fabef">7.2 符号常量</a></li>
<li><a href="#orga68379c">7.3 枚举常量</a></li>
</ul>
</li>
<li><a href="#org50819a8">8 运算符</a>
<ul>
<li><a href="#org0ad1a40">8.1 优先级</a></li>
<li><a href="#org3f1baf7">8.2 运算顺序</a></li>
<li><a href="#org5aecbd3">8.3 赋值运算符</a></li>
<li><a href="#orgbca947c">8.4 指针运算符</a>
<ul>
<li><a href="#orgda143ef">8.4.1 <code>*</code></a></li>
<li><a href="#orgac9f014">8.4.2 <code>&amp;</code></a></li>
</ul>
</li>
<li><a href="#orge2e7a66">8.5 位运算符</a></li>
<li><a href="#org184dc83">8.6 <code>sizeof</code></a></li>
<li><a href="#org9628f93">8.7 逗号</a></li>
</ul>
</li>
<li><a href="#orgad0209f">9 语句</a>
<ul>
<li><a href="#org1c51e2d">9.1 <code>continue</code></a></li>
<li><a href="#org8d06ec5">9.2 <code>for</code></a></li>
<li><a href="#orgeb6eafd">9.3 <code>goto</code></a></li>
<li><a href="#org0b40a71">9.4 <code>if</code></a></li>
<li><a href="#org5f94050">9.5 <code>switch</code></a></li>
<li><a href="#org07c891b">9.6 <code>while</code></a></li>
</ul>
</li>
<li><a href="#orgd769960">10 函数</a>
<ul>
<li><a href="#org88cab4f">10.1 声明</a></li>
<li><a href="#orgb8cfe3c">10.2 参数</a>
<ul>
<li><a href="#orgba33a2a">10.2.1 传值 vs 传地址</a></li>
</ul>
</li>
<li><a href="#org30334b5">10.3 返回值</a></li>
<li><a href="#org5b70f98">10.4 返回语句</a></li>
<li><a href="#org3875421">10.5 函数原型</a></li>
<li><a href="#orgc17d3f0">10.6 <code>main()</code></a></li>
</ul>
</li>
<li><a href="#orged1a239">11 程序</a>
<ul>
<li><a href="#org9f8ccac">11.1 头文件</a></li>
</ul>
</li>
<li><a href="#org9819d5d">12 预处理</a>
<ul>
<li><a href="#org2d547d8">12.1 <code>#include</code></a></li>
<li><a href="#org8856adc">12.2 <code>#define</code></a>
<ul>
<li><a href="#org6f46089">12.2.1 宏</a></li>
</ul>
</li>
<li><a href="#org7934b83">12.3 <code>#undef</code></a></li>
<li><a href="#org44e3d2b">12.4 <code>#if</code> <code>#elif</code> <code>#else</code> <code>#endif</code></a></li>
<li><a href="#orga1fa240">12.5 <code>#ifdef</code> <code>#ifndef</code></a></li>
<li><a href="#org79c5058">12.6 <code>#error</code></a></li>
</ul>
</li>
<li><a href="#orgd8bf780">13 编译</a>
<ul>
<li><a href="#org2390bff">13.1 <code>cc</code></a></li>
<li><a href="#org3edb85c">13.2 <code>gcc</code></a></li>
<li><a href="#org1a9bc1b">13.3 <code>make</code></a></li>
<li><a href="#org1d19c80">13.4 <code>makefile</code></a>
<ul>
<li><a href="#orgf306ccb">13.4.1 条目示例</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org8b0611c">14 标准</a>
<ul>
<li><a href="#org456e093">14.1 ANSI C</a></li>
</ul>
</li>
<li><a href="#orge9d9352">15 链接</a></li>
</ul>
</div>
</div>

<div id="outline-container-org57896d2" class="outline-2">
<h2 id="org57896d2"><span class="section-number-2">1</span> 特性</h2>
<div class="outline-text-2" id="text-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Simple</b></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Fast</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Portable</b></td>
<td class="org-left">not platform-independent but can be executed on many machines with little or no change</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Mid-level</b></td>
<td class="org-left">used to develop system applications such as kernels and drivers</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">but also supports the features of high level languages</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Rich library</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Memory management</b></td>
<td class="org-left">supports dynamic memory allocation</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Pointers</b></td>
<td class="org-left">pointers allow directly interactions with memory</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgdc63c74" class="outline-2">
<h2 id="orgdc63c74"><span class="section-number-2">2</span> 类型</h2>
<div class="outline-text-2" id="text-2">

<div class="figure">
<p><img src="../images/c_language/01.jpg" alt="01.jpg" />
</p>
</div>

<p>
类型使用的基本规则：可以使用某一类型值的位置，总可以替换为值为此类型的更复杂的表达式。
</p>
</div>

<div id="outline-container-org9b382bd" class="outline-3">
<h3 id="org9b382bd"><span class="section-number-3">2.1</span> 数字</h3>
<div class="outline-text-3" id="text-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right"><b>字节</b></th>
<th scope="col" class="org-left"><b>符号</b></th>
<th scope="col" class="org-left"><b>范围</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>整数</b></td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>char</code></td>
<td class="org-right">1</td>
<td class="org-left"><code>unsigned</code></td>
<td class="org-left">0 ~ 255</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>signed</code></td>
<td class="org-left">-128 ~ 127</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>int</code></td>
<td class="org-right">2</td>
<td class="org-left"><code>unsigned</code></td>
<td class="org-left">0 ~ 65,535</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>signed</code></td>
<td class="org-left">-32,768 ~ 32,767</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">4</td>
<td class="org-left"><code>unsigned</code></td>
<td class="org-left">0 ~ 4,294,967,295</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>signed</code></td>
<td class="org-left">-2,147,483,648 ~ 2,147,483,647</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>short (int)</code></td>
<td class="org-right">2</td>
<td class="org-left"><code>unsigned</code></td>
<td class="org-left">0 ~ 65,535</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>signed</code></td>
<td class="org-left">-32,768 ~ 32,767</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>long (int)</code></td>
<td class="org-right">4</td>
<td class="org-left"><code>unsigned</code></td>
<td class="org-left">0 ~ 4,294,967,295</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>signed</code></td>
<td class="org-left">-2,147,483,648 ~ 2,147,483,647</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>long long (int)</code></td>
<td class="org-right">8</td>
<td class="org-left"><code>unsigned</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">(C99)</td>
<td class="org-right">&#xa0;</td>
<td class="org-left"><code>signed</code></td>
<td class="org-left">-9,223,372,036,854,775,807 ~ 9,223,372,036,854,775,807</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>浮点数</b></td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>float</code> （单精度）</td>
<td class="org-right">4</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">1.2E-38 ~ 3.4E+38</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>double</code> （双精度）</td>
<td class="org-right">8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">2.3E-308 ~ 1.7E+308</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>long double</code></td>
<td class="org-right">10</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">3.4E-4932 ~ 1.1E+4932</td>
</tr>
</tbody>
</table>

<p>
数字类型的长度与硬件有关，由编译器根据硬件决定。
</p>
</div>

<div id="outline-container-orgb8362f5" class="outline-4">
<h4 id="orgb8362f5"><span class="section-number-4">2.1.1</span> 数字常量</h4>
<div class="outline-text-4" id="text-2-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>类型</b></th>
<th scope="col" class="org-left"><b>后缀</b></th>
<th scope="col" class="org-left"><b>示例</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>整数</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>int</code></td>
<td class="org-left">无后缀</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>long</code></td>
<td class="org-left"><code>l</code> <code>L</code></td>
<td class="org-left"><code>123456789L</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>unsigned</code></td>
<td class="org-left"><code>u</code> <code>U</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>unsigned long</code></td>
<td class="org-left"><code>ul</code> <code>UL</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>浮点数</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>float</code></td>
<td class="org-left"><code>f</code> <code>F</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>double</code></td>
<td class="org-left">无后缀</td>
<td class="org-left"><code>123.4</code> <code>1e-2</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>long double</code></td>
<td class="org-left"><code>l</code> <code>L</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
包含 <code>.</code> 或 <code>e</code> 的数字为浮点数，否则为整数。
</p>

<hr />

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>进制</b></th>
<th scope="col" class="org-left"><b>前缀</b></th>
<th scope="col" class="org-left"><b>示例</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">十进制</td>
<td class="org-left">无前缀</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">八进制</td>
<td class="org-left"><code>0</code></td>
<td class="org-left"><code>037</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">十六进制</td>
<td class="org-left"><code>0x</code> <code>0X</code></td>
<td class="org-left"><code>0x1F</code></td>
</tr>
</tbody>
</table>

<p>
八进制和十六进制整数常量也可以用 <code>L</code> 、 <code>U</code> 、 <code>UL</code> 后缀表示长度和符号，e.g. <code>0X1FUL</code> 。
</p>
</div>
</div>
</div>

<div id="outline-container-orgd34877c" class="outline-3">
<h3 id="orgd34877c"><span class="section-number-3">2.2</span> 字符</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-org376e913" class="outline-4">
<h4 id="org376e913"><span class="section-number-4">2.2.1</span> 字符常量</h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li>由单引号包围的字符，在表达式中等于 <code>int</code> 类型，值为字符在字符集（如 ASCII）中对应的数值。</li>
<li><code>char</code> 作为 <code>int</code> 时，有可能成为负值，为了可移植性，当 <code>char</code> 存储非字符数据时，应当指明 <code>signed</code> 或 <code>unsigned</code> 。</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">i</span>;
<span class="org-type">char</span> <span class="org-variable-name">c</span>;
i = c - <span class="org-string">'0'</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#34920;&#31034;&#23383;&#31526;&#23545;&#24212;&#30340;&#25968;&#20540;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge03bdf2" class="outline-4">
<h4 id="orge03bdf2"><span class="section-number-4">2.2.2</span> 字符转义</h4>
<div class="outline-text-4" id="text-2-2-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><code>\0</code></th>
<th scope="col" class="org-left">null 字符，数值为 0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>\n</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\r</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\t</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\\</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\?</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\'</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\"</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\ooo</code></td>
<td class="org-left">八进制表示任意单字节值</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\xhh</code></td>
<td class="org-left">十六进制表示任意单字节值</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orge6b93b8" class="outline-3">
<h3 id="orge6b93b8"><span class="section-number-3">2.3</span> 字符串</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>以<a href="#org9570169">字符数组</a>的形式存储，长度没有限制。</li>
<li>以 <code>'\0'</code> （null 字符）标志字符串的结束，因此实际的存储空间比引号中的字符数多 1。</li>
<li>必须完全扫描字符串（直到 null 字符）才能获得它的长度。</li>
</ul>
</div>

<div id="outline-container-orgdc90f74" class="outline-4">
<h4 id="orgdc90f74"><span class="section-number-4">2.3.1</span> 字符串常量</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
由双引号包围的字符序列，即使只有一个字符（或没有字符）。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>字符串常量不等于字符常量</label><pre class="src src-c"><span class="org-string">'\n'</span> != <span class="org-string">"\n"</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>字符串作为实参时，传递的是字符指针</label><pre class="src src-c">printf(<span class="org-string">"Hello, world.\n"</span>);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>字符串连接（可用于将长字符串分割为多行）</label><pre class="src src-c"><span class="org-string">"Hello,"</span> <span class="org-string">"world."</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
<span class="org-string">"Hello, world."</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcb7aa60" class="outline-3">
<h3 id="orgcb7aa60"><span class="section-number-3">2.4</span> 类型转换</h3>
<div class="outline-text-3" id="text-2-4">
</div><div id="outline-container-org43e1b42" class="outline-4">
<h4 id="org43e1b42"><span class="section-number-4">2.4.1</span> 自动转换</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
算数运算符的两个操作数不同类型时：
</p>
<ul class="org-ul">
<li>较短的类型被转换为较长的类型，如整数被转换为浮点数，但 <code>float</code> 不会自动转换为 <code>double</code> 。</li>
<li>赋值表达式右侧的类型被转换为左侧的类型。</li>
<li>实参被转换为函数原型定义的参数类型。</li>
</ul>

<p>
特例：
</p>
<ul class="org-ul">
<li><code>?:</code> 表达式的类型与条件是否成立无关，总是两个选项中较长的类型。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>示例：整数除法操作会被截断（truncate），要保留小数部分需要使用浮点数</label><pre class="src src-c"><span class="org-type">float</span> <span class="org-variable-name">a</span> = 9 / 5;     <span class="org-comment-delimiter">// </span><span class="org-comment">1.0</span>
<span class="org-type">float</span> <span class="org-variable-name">b</span> = 9.0 / 5.0; <span class="org-comment-delimiter">// </span><span class="org-comment">1.8</span>
<span class="org-type">float</span> <span class="org-variable-name">c</span> = 9 / 5.0;   <span class="org-comment-delimiter">// </span><span class="org-comment">1.8</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge45b7b3" class="outline-4">
<h4 id="orge45b7b3"><span class="section-number-4">2.4.2</span> 显式转换</h4>
<div class="outline-text-4" id="text-2-4-2">
<div class="org-src-container">
<pre class="src src-c">(&lt;type&gt;)&lt;expr&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org86ca4ce" class="outline-3">
<h3 id="org86ca4ce"><span class="section-number-3">2.5</span> <code>typedef</code></h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>示例</label><pre class="src src-c"><span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> {
    <span class="org-type">int</span> <span class="org-variable-name">value</span>;
} <span class="org-type">MyStruct</span>;

<span class="org-type">MyStruct</span>* <span class="org-variable-name">a</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#21516;&#20110;</span>
<span class="org-keyword">struct</span> <span class="org-type">MyStruct</span> {
    <span class="org-type">int</span> <span class="org-variable-name">value</span>;
}

<span class="org-keyword">struct</span> <span class="org-type">MyStruct</span>* <span class="org-variable-name">a</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6d0df7" class="outline-3">
<h3 id="orgb6d0df7"><span class="section-number-3">2.6</span> <code>volatile</code></h3>
<div class="outline-text-3" id="text-2-6">
<p>
<code>volatile</code> 表示变量的值可能由外部（操作系统、硬件、其他线程等）修改，避免编译器进行优化，可用于多线程程序中的全局变量。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>声明</label><pre class="src src-cpp"><span class="org-type">int</span> <span class="org-keyword">volatile</span> <span class="org-variable-name">a</span>;
<span class="org-keyword">volatile</span> <span class="org-type">int</span> <span class="org-variable-name">a</span>;

<span class="org-type">int</span> <span class="org-keyword">volatile</span>* <span class="org-variable-name">a</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#21521; volatile &#25972;&#25968;&#30340;&#25351;&#38024;</span>
<span class="org-keyword">volatile</span> <span class="org-type">int</span>* <span class="org-variable-name">a</span>;

<span class="org-type">int</span>* <span class="org-keyword">volatile</span> <span class="org-variable-name">a</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#21521;&#26222;&#36890;&#25972;&#25968;&#30340; volatile &#25351;&#38024;</span>

<span class="org-type">int</span> <span class="org-keyword">volatile</span>* <span class="org-keyword">volatile</span> <span class="org-variable-name">a</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#21521; volatile &#25972;&#25968;&#30340; volatile &#25351;&#38024;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>编译器优化示例</label><pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">opt</span> = 1; <span class="org-comment-delimiter">// </span><span class="org-comment">&#36991;&#20813;&#20248;&#21270;&#65306;volatile int opt = 1;</span>
<span class="org-type">void</span> <span class="org-function-name">foo</span>() {
  <span class="org-constant">start</span>:
    <span class="org-keyword">if</span> (opt == 1) <span class="org-keyword">goto</span> <span class="org-constant">start</span>;
    <span class="org-keyword">else</span> <span class="org-keyword">break</span>;
}
<span class="org-comment-delimiter">// </span><span class="org-comment">&#20248;&#21270;&#21518;</span>
<span class="org-type">void</span> <span class="org-function-name">foo</span>() {
  <span class="org-type">int</span> <span class="org-variable-name">opt</span> = 1;
  <span class="org-keyword">if</span> (<span class="org-constant">true</span>)
  <span class="org-keyword">goto</span> <span class="org-constant">start</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7df8d33" class="outline-2">
<h2 id="org7df8d33"><span class="section-number-2">3</span> 数组</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>声明</label><pre class="src src-c">&lt;type&gt; &lt;name&gt;[&lt;length&gt;] = {&lt;value&gt;, ...};
</pre>
</div>

<p>
数组名的值等于数组首元素的地址，即 <code>arr</code> 等价于 <code>&amp;arr[0]</code> 。
</p>

<hr />

<p>
数组名作实参时，传递的是数组首元素的地址。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>数组形式和指针形式的形参等价</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">strlen</span>(<span class="org-type">char</span> <span class="org-variable-name">s</span>[]);
<span class="org-type">int</span> <span class="org-function-name">strlen</span>(<span class="org-type">char</span>* <span class="org-variable-name">s</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">&#36890;&#24120;&#20351;&#29992;&#25351;&#38024;&#24418;&#24335;</span>
</pre>
</div>
</div>

<div id="outline-container-org96f8193" class="outline-3">
<h3 id="org96f8193"><span class="section-number-3">3.1</span> 数字数组</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>初始化示例</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">seq</span>[4] = {1, 2, 3, 4};
<span class="org-type">int</span> <span class="org-variable-name">seq</span>[]  = {1, 2, 3, 4};
<span class="org-type">int</span> <span class="org-variable-name">seq</span>[4] = {1, 2}; <span class="org-comment-delimiter">// </span><span class="org-comment">&#26410;&#21021;&#22987;&#21270;&#30340;&#20803;&#32032;&#33258;&#21160;&#22635;&#20805; 0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7cf6fd4" class="outline-3">
<h3 id="org7cf6fd4"><span class="section-number-3">3.2</span> 字符数组</h3>
<div class="outline-text-3" id="text-3-2">
<p>
<a id="org9570169"></a>
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 11: </span>初始化</label><pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">&#25968;&#32452;&#21021;&#22987;&#21270;</span>
<span class="org-type">char</span> <span class="org-variable-name">foo</span>[5] = <span class="org-string">"Test"</span>;
<span class="org-type">char</span> <span class="org-variable-name">foo</span>[]  = <span class="org-string">"Test"</span>;
<span class="org-type">char</span> <span class="org-variable-name">foo</span>[]  = {<span class="org-string">'T'</span>, <span class="org-string">'e'</span>, <span class="org-string">'s'</span>, <span class="org-string">'t'</span>, <span class="org-string">'\0'</span>};
<span class="org-type">char</span> <span class="org-variable-name">foo</span>[5] = {<span class="org-string">'T'</span>, <span class="org-string">'e'</span>}; <span class="org-comment-delimiter">// </span><span class="org-comment">&#26410;&#21021;&#22987;&#21270;&#30340;&#20803;&#32032;&#33258;&#21160;&#22635;&#20805; 0&#65288;&#21363; '\0'&#65289;</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#38024;&#21021;&#22987;&#21270;</span>
<span class="org-type">char</span>* <span class="org-variable-name">foo</span> = <span class="org-string">"Test"</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>修改</label><pre class="src src-c"><span class="org-type">char</span> <span class="org-variable-name">foo</span>[] = <span class="org-string">"Test"</span>;

foo    = <span class="org-string">"Sample"</span>;     <span class="org-comment-delimiter">// </span><span class="org-comment">"LVALUE Required" &#38169;&#35823;</span>
<span class="org-type">foo</span>[0] = <span class="org-string">"S"</span>;          <span class="org-comment-delimiter">// </span><span class="org-comment">&#20351;&#29992;&#19979;&#26631;&#20462;&#25913;</span>
<span class="org-function-name">strcpy</span>(<span class="org-type">foo</span>, <span class="org-string">"Sample"</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">&#20351;&#29992; strcpy() &#20462;&#25913;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 13: </span>初始化为数组和指针的区别</label><pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">&#21021;&#22987;&#21270;&#20026;&#25351;&#38024;</span>
<span class="org-type">char</span>* <span class="org-variable-name">foo</span>  = <span class="org-string">"Bar"</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#23558; "Bar" &#20889;&#20837;&#20869;&#23384;&#30340;&#21482;&#35835;&#21306;&#22495;&#65292;&#20316;&#20026;&#38745;&#24577;&#21311;&#21517;&#25968;&#32452;&#65292;&#24182;&#23558;&#25351;&#38024;&#25351;&#21521;&#23427;</span>
                    <span class="org-comment-delimiter">// </span><span class="org-comment">&#20889;&#25805;&#20316;&#37117;&#26159;&#38750;&#27861;&#30340;</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
<span class="org-keyword">static</span> <span class="org-keyword">const</span> <span class="org-type">char</span> <span class="org-variable-name">_anonymous_array</span>[] = <span class="org-string">"Bar"</span>;
<span class="org-type">char</span>* <span class="org-variable-name">foo</span> = (<span class="org-type">char</span>*) _anonymous_array;

<span class="org-comment-delimiter">// </span><span class="org-comment">&#21021;&#22987;&#21270;&#20026;&#25968;&#32452;</span>
<span class="org-type">char</span> <span class="org-variable-name">foo</span>[] = <span class="org-string">"Bar"</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#23558; "Bar" &#20889;&#20837;&#20869;&#23384;&#30340;&#21482;&#35835;&#21306;&#22495;&#65292;&#28982;&#21518;&#23558;&#20869;&#23481;&#22797;&#21046;&#21040;&#22534;&#26632;&#19978;&#26032;&#20998;&#37197;&#30340;&#20869;&#23384;&#20013;</span>
                    <span class="org-comment-delimiter">// </span><span class="org-comment">&#20889;&#25805;&#20316;&#26159;&#21512;&#27861;&#30340;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 14: </span>作为函数参数时，数组形式和指针形式是等价的</label><pre class="src src-c"><span class="org-type">void</span> <span class="org-function-name">foo</span>(<span class="org-type">char</span>* <span class="org-variable-name">s</span>);
<span class="org-type">void</span> <span class="org-function-name">foo</span>(<span class="org-type">char</span> <span class="org-variable-name">s</span>[]);
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc024659" class="outline-3">
<h3 id="orgc024659"><span class="section-number-3">3.3</span> 字符串数组</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 15: </span>示例</label><pre class="src src-c"><span class="org-type">char</span>* <span class="org-variable-name">strs</span>[] = {<span class="org-string">"foo"</span>, <span class="org-string">"bar"</span>, <span class="org-string">"baz"</span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb70da66" class="outline-3">
<h3 id="orgb70da66"><span class="section-number-3">3.4</span> 数组 &amp; 指针</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li>指针变量进行加减运算时，值会根据指针的类型进行增减，使其指向对应偏移的元素，如 <code>++</code> 会使指针指向下一个元素。</li>
<li>指向同一数组的指针可以通过 <code>&gt;</code> <code>&lt;</code> <code>!=</code> 等操作符进行比较，获得前后关系。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 16: </span>数组偏移， <code>pointer[n]</code> 等价于 <code>*(pointer+n)</code></label><pre class="src src-c"><span class="org-type">int</span>   <span class="org-variable-name">seq</span>[]  = {1, 2, 3, 4};
<span class="org-type">char</span>* <span class="org-variable-name">str</span>    = <span class="org-string">"Test"</span>;
<span class="org-type">char</span>* <span class="org-variable-name">strs</span>[] = {<span class="org-string">"foo"</span>, <span class="org-string">"bar"</span>, <span class="org-string">"baz"</span>};

<span class="org-comment-delimiter">// </span><span class="org-comment">&#19979;&#26631;&#24335;&#20559;&#31227;</span>
printf(<span class="org-string">"%d\n"</span>, seq[2]);  <span class="org-comment-delimiter">// </span><span class="org-comment">3</span>
printf(<span class="org-string">"%c\n"</span>, str[2]);  <span class="org-comment-delimiter">// </span><span class="org-comment">s</span>
printf(<span class="org-string">"%s\n"</span>, strs[2]); <span class="org-comment-delimiter">// </span><span class="org-comment">baz</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#38024;&#24335;&#20559;&#31227;</span>
printf(<span class="org-string">"%d\n"</span>, *(seq+2));  <span class="org-comment-delimiter">// </span><span class="org-comment">3</span>
printf(<span class="org-string">"%c\n"</span>, *(str+2));  <span class="org-comment-delimiter">// </span><span class="org-comment">s</span>
printf(<span class="org-string">"%s\n"</span>, *(strs+2)); <span class="org-comment-delimiter">// </span><span class="org-comment">baz</span>
</pre>
</div>

<hr />

<ul class="org-ul">
<li>指针是变量，可以指向任何位置。</li>
<li>数组名不是变量，初始化之后永远指向同一块内存空间。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 17: </span></label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">a</span>[] = {1,2,3};
<span class="org-type">int</span>* <span class="org-variable-name">ap</span>;

ap = a; <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
a = ap; <span class="org-comment-delimiter">// </span><span class="org-comment">Error</span>

ap++; <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
a++;  <span class="org-comment-delimiter">// </span><span class="org-comment">Error</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org815f56e" class="outline-3">
<h3 id="org815f56e"><span class="section-number-3">3.5</span> 多维数组 &amp; 指针数组</h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 18: </span>多维数组定义</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">nums</span>[2][3] = {
    {1,2,3},
    {4,5,6}
};
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 19: </span>多维数组做函数参数时，必须声明除最高维以外的维度的大小</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">nums</span>[2][3] = ...;
<span class="org-type">void</span> <span class="org-function-name">foo</span>(<span class="org-type">int</span> <span class="org-variable-name">nums</span>[2][3]);
<span class="org-type">void</span> <span class="org-function-name">foo</span>(<span class="org-type">int</span> <span class="org-variable-name">nums</span>[][3]);
<span class="org-type">void</span> <span class="org-function-name">foo</span>(<span class="org-type">int</span> (*<span class="org-variable-name">nums</span>)[3]); <span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#21442;&#25968;&#26159;&#25351;&#21521; 13 &#20010;&#25972;&#25968;&#30340;&#25968;&#32452;&#30340;&#25351;&#38024;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 20: </span>多维数组的每个子数组有固定的大小，而指针数组的每个元素可以指向不同大小的子数组</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">nums</span>[10][20]; <span class="org-comment-delimiter">// </span><span class="org-comment">&#20998;&#37197; 200 &#20010;&#25972;&#25968;&#30340;&#31354;&#38388;</span>
<span class="org-type">int</span>* <span class="org-variable-name">nums</span>[10];    <span class="org-comment-delimiter">// </span><span class="org-comment">&#20998;&#37197; 10 &#20010;&#25351;&#38024;&#30340;&#31354;&#38388;</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#38024;&#25968;&#32452;&#26368;&#24120;&#35265;&#30340;&#29992;&#27861;&#26159;&#23384;&#20648;&#19981;&#31561;&#38271;&#30340;&#23383;&#31526;&#20018;</span>
<span class="org-type">char</span>* <span class="org-variable-name">months</span>[] = {<span class="org-string">"January"</span>, <span class="org-string">"February"</span>, <span class="org-string">"March"</span>, ...};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc08efdc" class="outline-2">
<h2 id="orgc08efdc"><span class="section-number-2">4</span> 指针</h2>
<div class="outline-text-2" id="text-4">
<p>
使用方式：
</p>

<ul class="org-ul">
<li>操作数组。</li>
<li>操作一块分配的内存空间。</li>
<li>作为参数传递给函数，避免传递值。</li>
<li>指向一个函数，将其用于动态回调。</li>
<li>扫描一块内存空间，进行数据转换。</li>
</ul>
</div>

<div id="outline-container-org3534944" class="outline-3">
<h3 id="org3534944"><span class="section-number-3">4.1</span> 原理</h3>
<div class="outline-text-3" id="text-4-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>A</code> 表示</th>
<th scope="col" class="org-left"><code>B</code> 表示</th>
<th scope="col" class="org-left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>A -&gt; B</code></td>
<td class="org-left">变量名</td>
<td class="org-left">数值</td>
<td class="org-left">当 <code>A</code> 出现在表达式中时，它的值是 <code>B</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>A = B</code></td>
<td class="org-left">变量名</td>
<td class="org-left">变量名</td>
<td class="org-left">将 <code>A</code> 的值设置为 <code>B</code> 的值</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>A == B</code></td>
<td class="org-left">数值</td>
<td class="org-left">数值</td>
<td class="org-left">值 <code>A</code> 和值 <code>B</code> 相等</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> 存储</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">变量名</th>
<th scope="col" class="org-left">内存地址</th>
<th scope="col" class="org-left">实际数据</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>key_1</code></td>
<td class="org-left"><code>addr_1</code></td>
<td class="org-left"><code>val_1</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>key_2</code></td>
<td class="org-left"><code>addr_2</code></td>
<td class="org-left"><code>val_2</code></td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-sh">key_1 -&gt; val_1
key_2 -&gt; val_2
&amp;key_1 -&gt; addr_1
&amp;key_2 -&gt; addr_2

<span class="org-comment-delimiter"># </span><span class="org-comment">&#22914;&#26524;</span>
<span class="org-variable-name">key_1</span> = &amp;key_2
<span class="org-comment-delimiter"># </span><span class="org-comment">&#21363;</span>
<span class="org-variable-name">val_1</span> == addr_2
<span class="org-comment-delimiter"># </span><span class="org-comment">&#21017;</span>
*key_1 -&gt; val_2
</pre>
</div>

<p>
<code>key_1</code> 即为 <code>key_2</code> 的指针， <code>*key_1</code> 与 <code>key_2</code> 代表的值相同。
</p>
</div>
</div>

<div id="outline-container-orgcfb3f83" class="outline-3">
<h3 id="orgcfb3f83"><span class="section-number-3">4.2</span> 类型</h3>
<div class="outline-text-3" id="text-4-2">
<p>
指针只能指向某种特定类型的对象。
</p>

<dl class="org-dl">
<dt><code>void*</code> 指针</dt><dd>可以存储（hold）任何类型的指针。
<ul class="org-ul">
<li>任何类型指针与 <code>void*</code> 相互转换（cast）不会丢失信息。</li>
<li>不可以被 dereference（ <code>*</code> 运算符）。</li>
</ul></dd>
</dl>
</div>
</div>

<div id="outline-container-orgcd8d669" class="outline-3">
<h3 id="orgcd8d669"><span class="section-number-3">4.3</span> 变量</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-org82d8502" class="outline-4">
<h4 id="org82d8502"><span class="section-number-4">4.3.1</span> 声明</h4>
<div class="outline-text-4" id="text-4-3-1">
<div class="org-src-container">
<pre class="src src-c">&lt;type&gt; *&lt;name&gt;
</pre>
</div>

<ul class="org-ul">
<li><code>name</code> 的值是一个地址，该地址用于存储一个 <code>&lt;type&gt;</code> 类型的值。</li>
<li><code>*name</code> 的值是 <code>&lt;type&gt;</code> 类型。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 21: </span>示例 1</label><pre class="src src-c"><span class="org-type">int</span> *<span class="org-variable-name">intptr</span>;
intptr = new <span class="org-type">int</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#20998;&#37197;&#20869;&#23384;&#65288;&#21021;&#22987;&#21270;&#34987;&#25351;&#21521;&#30340;&#31354;&#38388;&#65289;</span>
*intptr = 5;      <span class="org-comment-delimiter">// </span><span class="org-comment">&#20998;&#37197;&#20869;&#23384;&#21518;&#25165;&#21487;&#20197;&#24341;&#29992; *intptr&#65292;&#21542;&#21017;&#20250;&#23548;&#33268;&#38169;&#35823;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 22: </span>示例 2</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">my_int</span> = 13;
<span class="org-type">int</span> *<span class="org-variable-name">intptr</span> = &amp;my_int; <span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#38024;&#25351;&#21521;&#30340;&#22320;&#22336;&#21021;&#22987;&#21270;&#20026;&#19968;&#20010;&#24050;&#26377;&#21464;&#37327;&#30340;&#22320;&#22336;</span>
*intptr = 42;          <span class="org-comment-delimiter">// </span><span class="org-comment">my_int &#30340;&#20540;&#21464;&#20026; 42</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6dcb85c" class="outline-4">
<h4 id="org6dcb85c"><span class="section-number-4">4.3.2</span> 释放</h4>
<div class="outline-text-4" id="text-4-3-2">
<div class="org-src-container">
<pre class="src src-c"><span class="org-type">void</span> <span class="org-function-name">main</span>() {
    <span class="org-type">float</span> *<span class="org-variable-name">ptr</span> = new <span class="org-type">float</span>;
    <span class="org-type">delete</span> <span class="org-variable-name">ptr</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org775b061" class="outline-3">
<h3 id="org775b061"><span class="section-number-3">4.4</span> 函数</h3>
<div class="outline-text-3" id="text-4-4">
</div><div id="outline-container-orgeb71162" class="outline-4">
<h4 id="orgeb71162"><span class="section-number-4">4.4.1</span> 参数指针</h4>
<div class="outline-text-4" id="text-4-4-1">
<div class="org-src-container">
<pre class="src src-c">&lt;type_1&gt; &lt;function&gt;(&lt;type_2&gt; *&lt;name&gt;);
</pre>
</div>

<ul class="org-ul">
<li><code>function()</code> 的值是 <code>&lt;type_1&gt;</code> 类型。</li>
<li><code>funciton()</code> 的参数是一个指向 <code>&lt;type_2&gt;</code> 类型的指针。</li>
<li>调用函数时传入的参数值应该是一个地址： <code>function(&amp;var)</code> 。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 23: </span>示例</label><pre class="src src-c"><span class="org-type">void</span> <span class="org-function-name">Duplicate</span>(<span class="org-type">int</span> *<span class="org-variable-name">a</span>) {
    *a = 2;
}

<span class="org-type">int</span> <span class="org-function-name">main</span>() {
    <span class="org-type">int</span> <span class="org-variable-name">x</span> = 1;
    Duplicate(&amp;x); <span class="org-comment-delimiter">// </span><span class="org-comment">x == 2</span>
    <span class="org-keyword">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0beaa1" class="outline-4">
<h4 id="orgf0beaa1"><span class="section-number-4">4.4.2</span> 返回值指针</h4>
<div class="outline-text-4" id="text-4-4-2">
<div class="org-src-container">
<pre class="src src-c">&lt;type&gt;* &lt;function&gt;(...);
</pre>
</div>

<ul class="org-ul">
<li><code>0</code> 是无效的地址，返回值为指针的函数可以通过返回 <code>0</code> 来表示错误，但通常使用 <code>NULL</code> 来确切表示无效的指针值。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 24: </span>示例</label><pre class="src src-c"><span class="org-keyword">struct</span> <span class="org-type">bar</span>* <span class="org-function-name">foo</span>(<span class="org-keyword">struct</span> <span class="org-type">bar</span>* <span class="org-variable-name">baz</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org123b258" class="outline-4">
<h4 id="org123b258"><span class="section-number-4">4.4.3</span> 参数引用</h4>
<div class="outline-text-4" id="text-4-4-3">
<div class="org-src-container">
<pre class="src src-c">&lt;type_1&gt; &lt;function&gt;(&lt;type_2&gt;&amp; &lt;name&gt;);
</pre>
</div>

<ul class="org-ul">
<li>传入参数为变量引用。</li>
<li>在函数内部对参数的修改会反映到传入的变量上。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 25: </span>示例</label><pre class="src src-c"><span class="org-type">void</span> <span class="org-function-name">Duplicate</span>(<span class="org-type">int</span>&amp; a) {
    a = 2;
}

<span class="org-type">int</span> <span class="org-function-name">main</span>() {
    <span class="org-type">int</span> <span class="org-variable-name">x</span> = 1;
    Duplicate(x); <span class="org-comment-delimiter">// </span><span class="org-comment">x == 2</span>
    <span class="org-keyword">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd49b8c0" class="outline-4">
<h4 id="orgd49b8c0"><span class="section-number-4">4.4.4</span> 返回值引用</h4>
<div class="outline-text-4" id="text-4-4-4">
<div class="org-src-container">
<pre class="src src-c">&lt;type&gt;&amp; &lt;function&gt;(...);
</pre>
</div>
</div>
</div>

<div id="outline-container-org19b3d9d" class="outline-4">
<h4 id="org19b3d9d"><span class="section-number-4">4.4.5</span> 函数指针</h4>
<div class="outline-text-4" id="text-4-4-5">
<p>
函数指针可用于回调函数。
</p>

<div class="org-src-container">
<pre class="src src-c"><span class="org-type">int</span>* <span class="org-function-name">foo</span>(<span class="org-type">void</span>);    <span class="org-comment-delimiter">// </span><span class="org-comment">foo &#26159;&#20989;&#25968;&#65292;&#20989;&#25968;&#36820;&#22238;&#20540;&#26159; int &#25351;&#38024;</span>
<span class="org-type">int</span> (*foo)(<span class="org-type">void</span>);  <span class="org-comment-delimiter">// </span><span class="org-comment">foo &#26159;&#20989;&#25968;&#25351;&#38024;&#65292;&#20989;&#25968;&#36820;&#22238;&#20540;&#26159; int</span>
<span class="org-type">int</span>* (*foo)(<span class="org-type">void</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">foo &#26159;&#20989;&#25968;&#25351;&#38024;&#65292;&#20989;&#25968;&#36820;&#22238;&#20540;&#26159; int &#25351;&#38024;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 26: </span>示例</label><pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">&#21442;&#25968; comp &#26159;&#25351;&#21521;&#20989;&#25968;&#30340;&#25351;&#38024;&#65292;&#35813;&#20989;&#25968;&#20197;&#20004;&#20010;&#25351;&#38024;&#20026;&#21442;&#25968;&#65292;&#36820;&#22238; int &#31867;&#22411;</span>
<span class="org-type">void</span> <span class="org-function-name">qsort</span>(<span class="org-type">void</span> *<span class="org-variable-name">lineptr</span>[], <span class="org-type">int</span> <span class="org-variable-name">left</span>, <span class="org-type">int</span> <span class="org-variable-name">right</span>, <span class="org-type">int</span> (*<span class="org-function-name">comp</span>)(<span class="org-type">void</span> *, <span class="org-type">void</span> *))
{
    ...
    <span class="org-keyword">if</span> ((*comp)(v[i], v[left]) &lt; 0) <span class="org-comment-delimiter">// </span><span class="org-comment">&#20989;&#25968;&#21517;&#22312;&#36825;&#31181;&#19978;&#19979;&#25991;&#20013;&#20250;&#34987;&#36716;&#25442;&#20026;&#20989;&#25968;&#30340;&#22320;&#22336;</span>
                                    <span class="org-comment-delimiter">// </span><span class="org-comment">&#25152;&#20197; (*comp)(...) &#21644; comp(...) &#31561;&#20215;</span>
        swap(v, ++last, i);
}

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    ...
    <span class="org-comment-delimiter">// </span><span class="org-comment">numcmp &#21644; strcmp &#26159;&#20989;&#25968;&#30340;&#22320;&#22336;&#65292;&#34987; cast &#21040; qsort &#38656;&#35201;&#30340;&#20989;&#25968;&#25351;&#38024;&#31867;&#22411;</span>
    qsort((<span class="org-type">void</span>**) lineptr, 0, nlines-1, (<span class="org-type">int</span> (*)(<span class="org-type">void</span>*, <span class="org-type">void</span>*))(numeric ? numcmp : strcmp));
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 27: </span>示例</label><pre class="src src-c"><span class="org-keyword">typedef</span> <span class="org-type">char</span> (*<span class="org-type">trans_func</span>)(<span class="org-type">char</span> <span class="org-variable-name">c</span>);

<span class="org-type">char</span>* <span class="org-function-name">trans</span>(<span class="org-type">char</span>* <span class="org-variable-name">str</span>, <span class="org-type">trans_func</span> <span class="org-variable-name">func</span>)
{
    <span class="org-type">int</span> <span class="org-variable-name">i</span>;
    <span class="org-type">char</span>* <span class="org-variable-name">new</span> = malloc(1000);

    <span class="org-keyword">for</span> (i = 0; str[i] != <span class="org-string">'\0'</span> &amp;&amp; i &lt; 1000; i++) {
        new[i] = func(str[i]); <span class="org-comment-delimiter">// </span><span class="org-comment">&#25110; (*func)(str[i])</span>
    }
    new[i] = <span class="org-string">'\0'</span>;

    <span class="org-keyword">return</span> new;
}

<span class="org-type">char</span> <span class="org-function-name">upper</span>(<span class="org-type">char</span> <span class="org-variable-name">c</span>)
{
    <span class="org-keyword">return</span> (c &gt;= <span class="org-string">'a'</span> &amp;&amp; c &lt;= <span class="org-string">'z'</span>) ? c - 32 : c;
}

<span class="org-type">char</span> <span class="org-function-name">lower</span>(<span class="org-type">char</span> <span class="org-variable-name">c</span>)
{
    <span class="org-keyword">return</span> (c &gt;= <span class="org-string">'A'</span> &amp;&amp; c &lt;= <span class="org-string">'Z'</span>) ? c + 32 : c;
}

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    printf(<span class="org-string">"%s\n"</span>, trans(<span class="org-string">"This Is A Test."</span>, lower));
    printf(<span class="org-string">"%s\n"</span>, trans(<span class="org-string">"this is a test."</span>, upper));

    <span class="org-keyword">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org1e8f80f" class="outline-2">
<h2 id="org1e8f80f"><span class="section-number-2">5</span> 结构</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>定义一种数据类型，将一组相关的变量作为一个整体</li>
<li>可以嵌套</li>
<li>作为函数参数时，通过值传递</li>
</ul>
</div>

<div id="outline-container-org48674b1" class="outline-3">
<h3 id="org48674b1"><span class="section-number-3">5.1</span> 声明</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">struct</span> &lt;name&gt; {
    &lt;type&gt; &lt;field&gt;;
    ...
};
</pre>
</div>

<p>
结构、结构成员、普通变量的名字可以重复，通过上下文可以进行区分。
</p>
</div>
</div>

<div id="outline-container-orgae0ac67" class="outline-3">
<h3 id="orgae0ac67"><span class="section-number-3">5.2</span> 初始化</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">struct</span> <span class="org-type">foo</span> {
    <span class="org-type">int</span> <span class="org-variable-name">bar</span>;
    <span class="org-type">int</span> <span class="org-variable-name">baz</span>;
};

<span class="org-keyword">struct</span> <span class="org-type">foo</span> <span class="org-variable-name">a</span>, <span class="org-variable-name">b</span>, <span class="org-variable-name">c</span>;
<span class="org-keyword">struct</span> <span class="org-type">foo</span> <span class="org-variable-name">a</span> = {.bar = 1, .baz = 2};
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 28: </span>结构指针</label><pre class="src src-c"><span class="org-keyword">struct</span> <span class="org-type">foo</span>* <span class="org-variable-name">a</span> = malloc(<span class="org-keyword">sizeof</span>(<span class="org-keyword">struct</span> <span class="org-type">foo</span>));
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 29: </span>匿名结构</label><pre class="src src-c"><span class="org-keyword">struct</span> {...} <span class="org-variable-name">a</span>, <span class="org-variable-name">b</span>, <span class="org-variable-name">c</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3528b68" class="outline-3">
<h3 id="org3528b68"><span class="section-number-3">5.3</span> 访问</h3>
<div class="outline-text-3" id="text-5-3">
</div><div id="outline-container-org05af0c3" class="outline-4">
<h4 id="org05af0c3"><span class="section-number-4">5.3.1</span> 访问成员</h4>
<div class="outline-text-4" id="text-5-3-1">
<div class="org-src-container">
<pre class="src src-c">&lt;name&gt;.&lt;field&gt;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 30: </span>示例</label><pre class="src src-c"><span class="org-keyword">struct</span> <span class="org-type">name</span> {...};
<span class="org-keyword">struct</span> <span class="org-type">name</span> <span class="org-variable-name">a</span> = {...};
printf(<span class="org-string">"%d"</span>, a.x);
</pre>
</div>
</div>
</div>

<div id="outline-container-org3807656" class="outline-4">
<h4 id="org3807656"><span class="section-number-4">5.3.2</span> 通过结构指针访问成员</h4>
<div class="outline-text-4" id="text-5-3-2">
<div class="org-src-container">
<pre class="src src-c">(*&lt;name&gt;).&lt;field&gt;
<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
&lt;name&gt;-&gt;&lt;field&gt;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 31: </span>示例</label><pre class="src src-c"><span class="org-keyword">struct</span> <span class="org-type">name</span> <span class="org-variable-name">a</span>, *<span class="org-variable-name">ap</span>;
a.x = 1;
ap = &amp;a;
printf(<span class="org-string">"%d"</span>, (*ap).x);
<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
printf(<span class="org-string">"%d"</span>, ap-&gt;x);
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfe3c795" class="outline-2">
<h2 id="orgfe3c795"><span class="section-number-2">6</span> 变量</h2>
<div class="outline-text-2" id="text-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>声明（declaration）</b></th>
<th scope="col" class="org-left">说明变量的性质（nature, property），比如类型，但不分配存储空间。</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">变量必须先声明后使用。</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">声明通常在函数起始处，所有可执行语句之前。</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">数组在声明时不需要指定大小。</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>定义（definition）</b></td>
<td class="org-left">声明变量，并分配存储空间。</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">数组在定义时必须指定大小。</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">本地变量</th>
<th scope="col" class="org-left">静态本地变量</th>
<th scope="col" class="org-left">静态外部变量</th>
<th scope="col" class="org-left">外部变量</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">当前函数（代码块）</td>
<td class="org-left">可用</td>
<td class="org-left">可用</td>
<td class="org-left">可用</td>
<td class="org-left">（定义/声明后）可用</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">同一文件其他函数</td>
<td class="org-left">不可用</td>
<td class="org-left">不可用</td>
<td class="org-left">可用</td>
<td class="org-left">（定义/声明后）可用</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">其他文件代码</td>
<td class="org-left">不可用</td>
<td class="org-left">不可用</td>
<td class="org-left">不可用</td>
<td class="org-left">（ <code>extern</code> 声明后）可用</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">保留值</td>
<td class="org-left">不保留</td>
<td class="org-left">保留</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org40b1c9e" class="outline-3">
<h3 id="org40b1c9e"><span class="section-number-3">6.1</span> 变量名</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>字母、数字、下划线组成。</li>
<li>区分大小写，变量名通常只用小写字母（大写字母用于 symbolic 常量）。</li>
<li>不能由数字开头，也避免使用下划线开头（library routine 使用下划线开头的变量名）。</li>
</ul>
</div>
</div>

<div id="outline-container-orgbbf9da2" class="outline-3">
<h3 id="orgbbf9da2"><span class="section-number-3">6.2</span> 初始化</h3>
<div class="outline-text-3" id="text-6-2">
<ul class="org-ul">
<li>initialization</li>
<li>scalar 变量声明时可以直接初始化，但这种初始化容易被忽视，因为离变量的使用位置较远。</li>
<li>非本地变量只能初始化一次，且初始化值必须为常量表达式。</li>
<li>外部变量、静态变量默认初始化为 0，未初始化的本地变量、寄存器变量的值是不确定的（garbage）。</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">a</span> = 1;     <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
<span class="org-type">int</span> <span class="org-variable-name">b</span> = a + 1; <span class="org-comment-delimiter">// </span><span class="org-comment">Error</span>
<span class="org-type">int</span> <span class="org-function-name">main</span>() {
    <span class="org-keyword">static</span> <span class="org-type">int</span> <span class="org-variable-name">c</span> = a + 2; <span class="org-comment-delimiter">// </span><span class="org-comment">Error</span>
    <span class="org-type">int</span> <span class="org-variable-name">d</span> = a + 3;        <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 32: </span>数组初始化时，未指定的元素初始化为 0，适用于本地、外部、静态变量</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">seq</span>[5] = {1,2,3,4};
printf(<span class="org-string">"%d\n"</span>, seq[4]); <span class="org-comment-delimiter">// </span><span class="org-comment">0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab64505" class="outline-3">
<h3 id="orgab64505"><span class="section-number-3">6.3</span> 本地变量</h3>
<div class="outline-text-3" id="text-6-3">
<ul class="org-ul">
<li>也称为自动变量（automatic variable）。</li>
<li>函数形参可以看做本地变量。</li>
<li>在函数（或代码块）开始时生成（初始化），在函数（或代码块）范围内有效。</li>
<li>值无法保留，如果不进行初始化，则其中包含的是垃圾数据（garbage）。</li>
<li>本地变量会覆盖函数（或代码块）之外的同名变量，为避免混乱，应避免使用和外部变量同名的本地变量。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 33: </span>本地变量覆盖同名外部变量</label><pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">&#38750;&#20989;&#25968;</span>
<span class="org-type">int</span> <span class="org-variable-name">i</span> = 1, <span class="org-variable-name">j</span> = 2;
<span class="org-keyword">if</span> (1) {
    <span class="org-type">int</span> <span class="org-variable-name">i</span> = 3;
    printf(<span class="org-string">"%d,%d\n"</span>, i, j); <span class="org-comment-delimiter">// </span><span class="org-comment">3,2</span>
}
printf(<span class="org-string">"%d,%d\n"</span>, i, j); <span class="org-comment-delimiter">// </span><span class="org-comment">1,2</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">&#20989;&#25968;</span>
<span class="org-type">int</span> <span class="org-variable-name">x</span> = 1, <span class="org-variable-name">y</span> = 2, <span class="org-variable-name">z</span> = 3; <span class="org-comment-delimiter">// </span><span class="org-comment">&#22806;&#37096;&#21464;&#37327;</span>
<span class="org-type">void</span> <span class="org-function-name">foo</span>(<span class="org-type">int</span> <span class="org-variable-name">y</span>)          <span class="org-comment-delimiter">// </span><span class="org-comment">&#24418;&#21442;&#35206;&#30422;&#22806;&#37096;&#21464;&#37327;</span>
{
    <span class="org-type">int</span> <span class="org-variable-name">x</span> = 4;           <span class="org-comment-delimiter">// </span><span class="org-comment">&#26412;&#22320;&#21464;&#37327;&#35206;&#30422;&#22806;&#37096;&#21464;&#37327;</span>
    printf(<span class="org-string">"%d,%d,%d\n"</span>, x, y, z);
}
<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    printf(<span class="org-string">"%d,%d,%d\n"</span>, x, y, z); <span class="org-comment-delimiter">// </span><span class="org-comment">1,2,3</span>
    foo(5);                        <span class="org-comment-delimiter">// </span><span class="org-comment">4,5,3</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbdf33a8" class="outline-3">
<h3 id="orgbdf33a8"><span class="section-number-3">6.4</span> 外部变量</h3>
<div class="outline-text-3" id="text-6-4">
<ul class="org-ul">
<li>定义在所有函数之外的变量，在所有文件中只能定义一次。</li>
<li>外部变量的作用域（scope）从声明（或定义）处开始，到文件结束。</li>
<li>外部变量可在全局范围内访问，程序执行期间一直存在。</li>
<li>函数也可以看作是外部变量。</li>
<li>对外部变量（或函数）的引用，即使在分别编译的函数里，指向也是相同的（reference to the same thing）。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 34: </span>在定义之前引用外部变量，或引用其他文件中的外部变量，必须使用 <code>extern</code> 声明。</label><pre class="src src-c"><span class="org-keyword">extern</span> &lt;type&gt; &lt;name&gt;;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>优点：</b></th>
<th scope="col" class="org-left">简化函数参数。</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>缺点：</b></td>
<td class="org-left">数据关系（data connection）混乱，外部变量的值容易被意外修改。</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">函数失去一般性（generality）。</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org0fd0177" class="outline-4">
<h4 id="org0fd0177"><span class="section-number-4">6.4.1</span> 使用</h4>
<div class="outline-text-4" id="text-6-4-1">
<ul class="org-ul">
<li>访问同一文件中定义的外部变量时，如果定义在访问之前，可以不 <code>extern</code> 显式声明。</li>
<li>访问其他文件中定义的外部变量时，必须 <code>extern</code> 显式声明。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 35: </span>示例</label><pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">&#23450;&#20041;</span>
<span class="org-type">int</span> <span class="org-variable-name">local1</span>;
<span class="org-type">char</span> <span class="org-variable-name">local2</span>[10]; <span class="org-comment-delimiter">// </span><span class="org-comment">&#25968;&#32452;&#23450;&#20041;&#26102;&#24517;&#39035;&#25351;&#23450;&#22823;&#23567;</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#65288;&#24341;&#29992;&#20854;&#20182;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#22806;&#37096;&#21464;&#37327;&#65289;</span>
<span class="org-keyword">extern</span> <span class="org-type">int</span> <span class="org-variable-name">remote1</span>;
<span class="org-keyword">extern</span> <span class="org-type">char</span> <span class="org-variable-name">remote2</span>[]; <span class="org-comment-delimiter">// </span><span class="org-comment">&#25968;&#32452;&#22768;&#26126;&#26102;&#21487;&#20197;&#19981;&#25351;&#23450;&#22823;&#23567;</span>

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    <span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#65288;&#35775;&#38382;&#21516;&#19968;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#22806;&#37096;&#21464;&#37327;&#26102;&#65292;&#21487;&#30465;&#30053;&#65289;</span>
    <span class="org-keyword">extern</span> <span class="org-type">int</span> <span class="org-variable-name">local1</span>;
    <span class="org-keyword">extern</span> <span class="org-type">char</span> <span class="org-variable-name">local2</span>[];

    <span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#65288;&#24341;&#29992;&#20854;&#20182;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#22806;&#37096;&#21464;&#37327;&#65289;</span>
    <span class="org-keyword">extern</span> <span class="org-type">int</span> <span class="org-variable-name">remote1</span>;
    <span class="org-keyword">extern</span> <span class="org-type">char</span> <span class="org-variable-name">remote2</span>[];
}
</pre>
</div>

<p>
通常做法：
</p>

<ul class="org-ul">
<li>访问同一文件中定义的外部变量：在文件头部（所有函数之前）定义外部，之后不再重复声明。</li>
<li>访问其他文件中定义的外部变量：在 <code>.h</code> 文件中 <code>extern</code> 显式声明引用外部变量， <code>.c</code> 文件中不再重复声明。</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf987d9c" class="outline-3">
<h3 id="orgf987d9c"><span class="section-number-3">6.5</span> 静态变量</h3>
<div class="outline-text-3" id="text-6-5">
<ul class="org-ul">
<li>静态外部变量（或函数）的作用域只在当前文件，对当前文件的不同函数可见，但对其他文件不可见，不会和其他文件中的同名变量（和函数）冲突。</li>
<li>静态本地变量的作用域与普通本地变量相同，但函数调用结束时不会消失，在下次调用时还保存最后的值，可以为函数提供私有的、永久的存储。</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">static</span> &lt;type&gt; &lt;name&gt;;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 36: </span>示例</label><pre class="src src-c"><span class="org-type">char</span>* <span class="org-function-name">monthName</span>(<span class="org-type">int</span> <span class="org-variable-name">n</span>)
{
    <span class="org-keyword">static</span> <span class="org-type">char</span>* <span class="org-variable-name">name</span>[] = {
        <span class="org-string">"Illegal month"</span>,
        <span class="org-string">"January"</span>, <span class="org-string">"February"</span>, <span class="org-string">"March"</span>, <span class="org-string">"April"</span>, <span class="org-string">"May"</span>, <span class="org-string">"June"</span>,
        <span class="org-string">"July"</span>, <span class="org-string">"August"</span>, <span class="org-string">"September"</span>, <span class="org-string">"October"</span>, <span class="org-string">"November"</span>, <span class="org-string">"December"</span>
    };
    <span class="org-keyword">return</span> (n &lt; 1 || n &gt; 12) ? name[0] : name[n];
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org948a9d1" class="outline-3">
<h3 id="org948a9d1"><span class="section-number-3">6.6</span> 寄存器变量</h3>
<div class="outline-text-3" id="text-6-6">
<ul class="org-ul">
<li>register variable</li>
<li>存储在寄存器中，可以使程序更小更快，用于重度使用（heavily used）的变量。</li>
<li>只能用于本地变量和函数形参（formal parameters）。</li>
<li>每个函数只允许有少量和特定类型的变量声明为 <code>register</code> ，具体限制依赖于硬件，声明超过限制和不支持类型的变量时， <code>register</code> 会编译器被忽略。</li>
<li>声明为 <code>register</code> 的变量无法获取地址，无论其是否存储在寄存器中。</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">register</span> &lt;type&gt; &lt;name&gt;;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb0611ab" class="outline-2">
<h2 id="orgb0611ab"><span class="section-number-2">7</span> 常量</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-orgd048af0" class="outline-3">
<h3 id="orgd048af0"><span class="section-number-3">7.1</span> 常量</h3>
<div class="outline-text-3" id="text-7-1">
<p>
在变量声明前加 <code>const</code> 表示变量的值不会改变。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 37: </span>示例</label><pre class="src src-c"><span class="org-keyword">const</span> <span class="org-type">double</span> <span class="org-variable-name">e</span> = 2.71828182845905;
e += 1.0; <span class="org-comment-delimiter">// </span><span class="org-comment">Error</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 38: </span>用 <code>const</code> 表示函数不会修改参数值</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">strlen</span>(<span class="org-keyword">const</span> <span class="org-type">char</span>[]);
</pre>
</div>
</div>
</div>

<div id="outline-container-orge0fabef" class="outline-3">
<h3 id="orge0fabef"><span class="section-number-3">7.2</span> 符号常量</h3>
<div class="outline-text-3" id="text-7-2">
<p>
<a id="orgb9b4269"></a>
</p>

<ul class="org-ul">
<li>symbolic constant</li>
<li>通过 <a href="#orgb80a8b2"><code>#define</code></a> 定义，名称通常为大写字母。</li>
</ul>
</div>
</div>

<div id="outline-container-orga68379c" class="outline-3">
<h3 id="orga68379c"><span class="section-number-3">7.3</span> 枚举常量</h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li>枚举常量是一个常量列表。</li>
<li>列表中的每个名字对应一个整数，默认为 0 起始的连续的整数值。</li>
<li>不同列表中的常量名不能重复，同一列表中的常量值不能重复。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 39: </span>定义</label><pre class="src src-c"><span class="org-keyword">enum</span> <span class="org-type">months</span> {<span class="org-variable-name">JAN</span> = 1, <span class="org-variable-name">FEB</span>, ...};
<span class="org-comment-delimiter">// </span><span class="org-comment">JAN =1, FEB = 2, ... </span>
<span class="org-keyword">enum</span> <span class="org-type">marks</span> {<span class="org-variable-name">GREAT</span> = <span class="org-string">'A'</span>, <span class="org-variable-name">GOOD</span> = <span class="org-string">'B'</span>, <span class="org-variable-name">AVERAGE</span> = <span class="org-string">'C'</span>, ...};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org50819a8" class="outline-2">
<h2 id="org50819a8"><span class="section-number-2">8</span> 运算符</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-org0ad1a40" class="outline-3">
<h3 id="org0ad1a40"><span class="section-number-3">8.1</span> 优先级</h3>
<div class="outline-text-3" id="text-8-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><b>结合律</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>()</code> <code>[]</code> <code>-&gt;</code> <code>.</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>!</code></td>
<td class="org-left">右到左</td>
</tr>

<tr>
<td class="org-left"><code>~</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>++</code> <code>--</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>+</code> <code>-</code> （一元运算符）</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>*</code> <code>&amp;</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>(type)</code> <code>sizeof()</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>*</code> <code>/</code> <code>%</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>+</code> <code>-</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&lt;&lt;</code> <code>&gt;&gt;</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&lt;</code> <code>&lt;=</code> <code>&gt;</code> <code>&gt;=</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>==</code> <code>!=</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&amp;</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>^</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&#124;</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&amp;&amp;</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&#124;&#124;</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>? :</code></td>
<td class="org-left">右到左</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>=</code> <code>+=</code> <code>-=</code> <code>*=</code> <code>/=</code> <code>%=</code></td>
<td class="org-left">右到左</td>
</tr>

<tr>
<td class="org-left"><code>&amp;=</code> <code>^=</code> <code>&#124;=</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>&lt;&lt;=</code> <code>&gt;&gt;=</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>,</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org3f1baf7" class="outline-3">
<h3 id="org3f1baf7"><span class="section-number-3">8.2</span> 运算顺序</h3>
<div class="outline-text-3" id="text-8-2">
<p>
除以下运算符外，C 语言不规定表达式中操作数的计算顺序： <code>&amp;&amp;</code> 、 <code>||</code> 、 <code>?:</code> 、 <code>,</code> 。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 40: </span>操作数计算顺序不确定</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">n</span> = f() + g(); <span class="org-comment-delimiter">// </span><span class="org-comment">f() &#21644; g() &#30340;&#35843;&#29992;&#39034;&#24207;&#19981;&#30830;&#23450;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 41: </span>函数参数的计算顺序不确定</label><pre class="src src-c">printf(<span class="org-string">"%d %d\n"</span>, ++n, power(2, n)); <span class="org-comment-delimiter">// </span><span class="org-comment">&#19981;&#21516;&#32534;&#35793;&#22120;&#32467;&#26524;&#19981;&#21516;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5aecbd3" class="outline-3">
<h3 id="org5aecbd3"><span class="section-number-3">8.3</span> 赋值运算符</h3>
<div class="outline-text-3" id="text-8-3">
<p>
赋值表达式的值，等于赋给左边变量的值。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 42: </span>示例</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">c</span>;
<span class="org-keyword">while</span> ((c = getchar()) != EOF) <span class="org-function-name">putchar</span>(c);
</pre>
</div>

<hr />

<p>
赋值运算符的结合次序是从右至左。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 43: </span>示例</label><pre class="src src-c">a = b = c = 0;
<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
a = ( b = (c = 0));
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbca947c" class="outline-3">
<h3 id="orgbca947c"><span class="section-number-3">8.4</span> 指针运算符</h3>
<div class="outline-text-3" id="text-8-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><code>.</code></th>
<th scope="col" class="org-left">取结构成员， <code>object.member</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>-&gt;</code></td>
<td class="org-left">取结构成员， <code>object_p-&gt;member</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>*</code></td>
<td class="org-left">取指针目标（dereference）</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&amp;</code></td>
<td class="org-left">取对象地址</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-orgda143ef" class="outline-4">
<h4 id="orgda143ef"><span class="section-number-4">8.4.1</span> <code>*</code></h4>
<div class="outline-text-4" id="text-8-4-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 44: </span><code>*</code> 和 <code>++</code> <code>--</code> 优先级相同，且自右至左结合</label><pre class="src src-c"><span class="org-type">char</span>* <span class="org-variable-name">str</span> = malloc(<span class="org-keyword">sizeof</span>(<span class="org-type">char</span>) * 4);
<span class="org-type">str</span>[0] = <span class="org-string">'A'</span>, str[1] = <span class="org-string">'C'</span>, str[2] = <span class="org-string">'E'</span>, str[3] = <span class="org-string">'\0'</span>;

printf(<span class="org-string">"%c,"</span>, ++*str),   printf(<span class="org-string">"%s\n"</span>, str); <span class="org-comment-delimiter">// </span><span class="org-comment">B,BCE</span>
printf(<span class="org-string">"%c,"</span>, ++(*str)), printf(<span class="org-string">"%s\n"</span>, str); <span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;</span>

printf(<span class="org-string">"%c,"</span>, *++str),   printf(<span class="org-string">"%s\n"</span>, str); <span class="org-comment-delimiter">// </span><span class="org-comment">C,CE</span>
printf(<span class="org-string">"%c,"</span>, *(++str)), printf(<span class="org-string">"%s\n"</span>, str); <span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;</span>

printf(<span class="org-string">"%c,"</span>, *str++),   printf(<span class="org-string">"%s\n"</span>, str); <span class="org-comment-delimiter">// </span><span class="org-comment">A,CE</span>
printf(<span class="org-string">"%c,"</span>, *(str++)), printf(<span class="org-string">"%s\n"</span>, str); <span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;</span>
printf(<span class="org-string">"%c,"</span>, (*str)++), printf(<span class="org-string">"%s\n"</span>, str); <span class="org-comment-delimiter">// </span><span class="org-comment">A,BCE</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac9f014" class="outline-4">
<h4 id="orgac9f014"><span class="section-number-4">8.4.2</span> <code>&amp;</code></h4>
<div class="outline-text-4" id="text-8-4-2">
<ul class="org-ul">
<li>只能用于内存中的对象：变量、数组元素；不能用于表达式、常量、寄存器变量。</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge2e7a66" class="outline-3">
<h3 id="orge2e7a66"><span class="section-number-3">8.5</span> 位运算符</h3>
<div class="outline-text-3" id="text-8-5">
<p>
只能用于整数。
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><code>&amp;</code></th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&#124;</code></td>
<td class="org-left">或（inclusive OR）</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>^</code></td>
<td class="org-left">异或（exclusive OR）</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&lt;&lt;</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>&gt;&gt;</code></td>
<td class="org-left"><code>unsigned</code> 数字左侧由 <code>0</code> 填充</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>signed</code> 数字左侧由表示正负的二进制位（arithmetic shift）或 <code>0</code> （logical shift）填充，与硬件相关</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>~</code></td>
<td class="org-left">按位取反</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 45: </span><code>&amp;</code> 用于 mask</label><pre class="src src-c">n = n &amp; 0177; <span class="org-comment-delimiter">// </span><span class="org-comment">n &#38500;&#26368;&#21518; 7 &#20301;&#22806;&#20840;&#37096;&#21464;&#20026; 0</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 46: </span><code>|</code> 用于打开位开关</label><pre class="src src-c">x = x | SET_ON;
</pre>
</div>
</div>
</div>

<div id="outline-container-org184dc83" class="outline-3">
<h3 id="org184dc83"><span class="section-number-3">8.6</span> <code>sizeof</code></h3>
<div class="outline-text-3" id="text-8-6">
<p>
<code>sizeof</code> 返回类型或变量的长度。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 47: </span>示例</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-variable-name">seq</span>[] = {1, 2, 3, 4, 5};
<span class="org-keyword">sizeof</span>(<span class="org-type">int</span>);               <span class="org-comment-delimiter">// </span><span class="org-comment">4</span>
<span class="org-keyword">sizeof</span>(seq);               <span class="org-comment-delimiter">// </span><span class="org-comment">20</span>
<span class="org-keyword">sizeof</span>(seq) / <span class="org-keyword">sizeof</span>(<span class="org-type">int</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">5</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9628f93" class="outline-3">
<h3 id="org9628f93"><span class="section-number-3">8.7</span> 逗号</h3>
<div class="outline-text-3" id="text-8-7">
<ul class="org-ul">
<li>用于连接几个相关的操作。</li>
<li>由左至右结算（evaluate）。</li>
<li>整个表达式的类型和值等于最右的操作数。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 48: </span>交换数值。</label><pre class="src src-c">tmp = a, a = b, b = tmp;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgad0209f" class="outline-2">
<h2 id="orgad0209f"><span class="section-number-2">9</span> 语句</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-org1c51e2d" class="outline-3">
<h3 id="org1c51e2d"><span class="section-number-3">9.1</span> <code>continue</code></h3>
<div class="outline-text-3" id="text-9-1">
<ul class="org-ul">
<li>在 <code>while</code> 和 <code>do</code> 循环体中，表示执行测试条件。</li>
<li>在 <code>for</code> 循环体中，表示执行递增部分。</li>
</ul>
</div>
</div>

<div id="outline-container-org8d06ec5" class="outline-3">
<h3 id="org8d06ec5"><span class="section-number-3">9.2</span> <code>for</code></h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 49: </span><code>for</code> 的循环体可以为空</label><pre class="src src-c"><span class="org-type">long</span> <span class="org-variable-name">nc</span>;
<span class="org-keyword">for</span> (nc = 0; <span class="org-function-name">getchar</span>() != EOF; nc++)
    ;
printf(<span class="org-string">"%d"</span>, nc);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 50: </span><code>for</code> 的条件可以为空，等于无限循环</label><pre class="src src-c"><span class="org-keyword">for</span> (;;) {
    ...
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb6eafd" class="outline-3">
<h3 id="orgeb6eafd"><span class="section-number-3">9.3</span> <code>goto</code></h3>
<div class="outline-text-3" id="text-9-3">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">goto</span> &lt;label&gt;;
...
&lt;label&gt;: <span class="org-comment-delimiter">// </span><span class="org-comment">label &#21487;&#20197;&#38468;&#21152;&#22312;&#21516;&#19968;&#20989;&#25968;&#20013;&#30340;&#20219;&#20309;&#35821;&#21477;</span>
    ...
</pre>
</div>

<ul class="org-ul">
<li>可用于从嵌套的循环体中跳出（break out），因为 <code>break</code> 只能跳出一层循环体。</li>
<li><code>goto</code> 总能用其他方法代替，但可能需要引入新的变量，或进行重复的测试。</li>
</ul>
</div>
</div>

<div id="outline-container-org0b40a71" class="outline-3">
<h3 id="org0b40a71"><span class="section-number-3">9.4</span> <code>if</code></h3>
<div class="outline-text-3" id="text-9-4">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">if</span> (&lt;expr&gt;) {
    ...
} <span class="org-keyword">else</span> <span class="org-keyword">if</span> (&lt;expr&gt;) {
    ...
} <span class="org-keyword">else</span> {
    ...
}
</pre>
</div>

<hr />

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 51: </span><code>if</code> 测试表达式的数字值（numeric value），表达式可以进行简写。</label><pre class="src src-c"><span class="org-keyword">if</span> (&lt;expr&gt;)
<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
<span class="org-keyword">if</span> (&lt;expr&gt; != 0)
</pre>
</div>

<hr />

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 52: </span><code>if</code> 嵌套时用 <code>{}</code> 关联 <code>if</code> 和 <code>else</code> ，否则 <code>else</code> 会关联到距离最近的没有 <code>else</code> 的 <code>if</code> 。</label><pre class="src src-c"><span class="org-keyword">if</span> (1)
    <span class="org-keyword">if</span> (0)
        a = 1;
    <span class="org-keyword">else</span>
        a = 2;

<span class="org-keyword">if</span> (1) {
    <span class="org-keyword">if</span> (0)
        a = 1;
} <span class="org-keyword">else</span>
    a = 2;
</pre>
</div>
</div>
</div>

<div id="outline-container-org5f94050" class="outline-3">
<h3 id="org5f94050"><span class="section-number-3">9.5</span> <code>switch</code></h3>
<div class="outline-text-3" id="text-9-5">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">switch</span> (&lt;expr&gt;) {
    <span class="org-keyword">case</span> &lt;expr&gt;:
        &lt;statement&gt;;
    ...
    <span class="org-keyword">default</span>:
        &lt;statement&gt;;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org07c891b" class="outline-3">
<h3 id="org07c891b"><span class="section-number-3">9.6</span> <code>while</code></h3>
<div class="outline-text-3" id="text-9-6">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">for</span> (&lt;expr1&gt;; &lt;expr2&gt;; &lt;expr3&gt;) {
    &lt;statement&gt;;
}
<span class="org-comment-delimiter">// </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
&lt;expr1&gt;;
<span class="org-keyword">while</span> (&lt;expr2&gt;) {
    &lt;statement&gt;;
    &lt;expr3&gt;;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd769960" class="outline-2">
<h2 id="orgd769960"><span class="section-number-2">10</span> 函数</h2>
<div class="outline-text-2" id="text-10">
<p>
函数之间的通信方式：参数/返回值，或者外部变量。
</p>
</div>

<div id="outline-container-org88cab4f" class="outline-3">
<h3 id="org88cab4f"><span class="section-number-3">10.1</span> 声明</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">
<pre class="src src-c">&lt;type&gt; &lt;function&gt;(&lt;arg&gt;, ...);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 53: </span>函数声明的形式和变量声明一致，可以同时声明：</label><pre class="src src-c"><span class="org-type">double</span> <span class="org-variable-name">sum</span>, <span class="org-function-name">atof</span>(<span class="org-type">char</span> <span class="org-variable-name">s</span>[]);
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb8cfe3c" class="outline-3">
<h3 id="orgb8cfe3c"><span class="section-number-3">10.2</span> 参数</h3>
<div class="outline-text-3" id="text-10-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border dense">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>形参（formal parameters）</b></th>
<th scope="col" class="org-left">函数定义中的参数</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>实参（actual parameters）</b></td>
<td class="org-left">函数调用时的参数</td>
</tr>
</tbody>
</table>

<hr />

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 54: </span>函数没有参数时，用 <code>void</code> 代替参数列表：</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">foo</span>(<span class="org-type">void</span>);
</pre>
</div>
</div>

<div id="outline-container-orgba33a2a" class="outline-4">
<h4 id="orgba33a2a"><span class="section-number-4">10.2.1</span> 传值 vs 传地址</h4>
<div class="outline-text-4" id="text-10-2-1">
<p>
一般类型实参传递的是值，数组（指针）类型实参传递的是数组首元素的地址。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 55: </span>参数传值可以使程序更紧凑，传入参数作为已初始化的本地变量使用，可以对其进行任意修改：</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">power</span>(<span class="org-type">int</span> <span class="org-variable-name">b</span>, <span class="org-type">int</span> <span class="org-variable-name">p</span>)
{
    <span class="org-type">int</span> <span class="org-variable-name">r</span> = 1;
    <span class="org-keyword">while</span> (p-- &gt; 0) r *= b;
    <span class="org-keyword">return</span> r;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org30334b5" class="outline-3">
<h3 id="org30334b5"><span class="section-number-3">10.3</span> 返回值</h3>
<div class="outline-text-3" id="text-10-3">
<ul class="org-ul">
<li>未声明返回值类型时默认为 <code>int</code> 。</li>
</ul>
</div>
</div>

<div id="outline-container-org5b70f98" class="outline-3">
<h3 id="org5b70f98"><span class="section-number-3">10.4</span> 返回语句</h3>
<div class="outline-text-3" id="text-10-4">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">return</span> &lt;expr&gt;;
</pre>
</div>

<ul class="org-ul">
<li>表达式的值会被转换为返回值的类型。</li>
<li>没有表达式的返回语句，只是把控制返回给调用方。</li>
<li>没有返回语句的函数被称为「falling off the end」。</li>
</ul>
</div>
</div>

<div id="outline-container-org3875421" class="outline-3">
<h3 id="org3875421"><span class="section-number-3">10.5</span> 函数原型</h3>
<div class="outline-text-3" id="text-10-5">
<ul class="org-ul">
<li>与实际函数的返回值、参数个数、参数类型必须一致。</li>
<li>不要求有参数名，也不要求参数名和实际参数一致（但通过参数名可以更清晰地表明函数的使用方法）。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 56: </span>函数原型通常在文件开头，所有函数定义之前</label><pre class="src src-c">...
<span class="org-type">int</span> power(<span class="org-type">int</span>, <span class="org-type">int</span>);       <span class="org-comment-delimiter">// </span><span class="org-comment">&#20989;&#25968;&#21407;&#22411;</span>
...
<span class="org-type">int</span> power(<span class="org-type">int</span> <span class="org-variable-name">base</span>, <span class="org-type">int</span> <span class="org-variable-name">n</span>) <span class="org-comment-delimiter">// </span><span class="org-comment">&#20989;&#25968;&#22768;&#26126;</span>
{
    ...
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 57: </span>函数原型也可以在其他函数内</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">foo</span>(<span class="org-type">int</span> <span class="org-variable-name">arg</span>)
{
    <span class="org-type">int</span> <span class="org-function-name">bar</span>(<span class="org-type">int</span> <span class="org-variable-name">arg</span>);
    ...
}

<span class="org-type">int</span> <span class="org-function-name">bar</span>(<span class="org-type">int</span> <span class="org-variable-name">arg</span>)
{
}
</pre>
</div>

<hr />

<p>
没有函数原型时，会根据函数第一次在表达式中出现时的形式隐式地声明函数。
</p>
</div>
</div>

<div id="outline-container-orgc17d3f0" class="outline-3">
<h3 id="orgc17d3f0"><span class="section-number-3">10.6</span> <code>main()</code></h3>
<div class="outline-text-3" id="text-10-6">
<ul class="org-ul">
<li>程序从 <code>main()</code> 开始执行，程序必须包含 <code>main()</code> 。</li>
<li><code>main()</code> 的调用者是程序的执行环境。</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">main</span>(<span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span> *<span class="org-variable-name">argv</span>[]);
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><code>argc</code></th>
<th scope="col" class="org-left"><code>int</code></th>
<th scope="col" class="org-left">命令行参数个数</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>argv</code></td>
<td class="org-left"><code>char**</code></td>
<td class="org-left">命令行参数数组</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">第一个元素为程序名</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">返回值</td>
<td class="org-left"><code>int</code></td>
<td class="org-left"><code>0</code> 表示正常终止</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">非 <code>0</code> 表示异常、出错</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 58: </span>命令行参数示例</label><pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">main</span>(<span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span> *<span class="org-variable-name">argv</span>[])
{
    <span class="org-keyword">for</span> (<span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; argc; i++) {
        printf(<span class="org-string">"arg %d = %s\n"</span>, i, argv[i]);
    }
    <span class="org-keyword">return</span> 0;
}

$ ./foo This is <span class="org-string">"a test"</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">arg 0 = ./foo</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">arg 1 = This</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">arg 2 = is</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">arg 3 = a test</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orged1a239" class="outline-2">
<h2 id="orged1a239"><span class="section-number-2">11</span> 程序</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-org9f8ccac" class="outline-3">
<h3 id="org9f8ccac"><span class="section-number-3">11.1</span> 头文件</h3>
<div class="outline-text-3" id="text-11-1">
<ul class="org-ul">
<li>将文件之间共享的定义的声明集中（centralize）在头文件中，通过加载头文件，可以避免重复定义和声明。</li>
<li>理想状态下每个文件只访问它需要的信息，但为了避免管理多个头文件，信息可以集中在一个头文件中，由多个文件共享。</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org9819d5d" class="outline-2">
<h2 id="org9819d5d"><span class="section-number-2">12</span> 预处理</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-org2d547d8" class="outline-3">
<h3 id="org2d547d8"><span class="section-number-3">12.1</span> <code>#include</code></h3>
<div class="outline-text-3" id="text-12-1">
<ul class="org-ul">
<li>相当于在该位置载入指定文件的内容。</li>
<li><code>""</code> 表示优先在当前目录下查找， <code>&lt;&gt;</code> 表示根据特定的规则在其他目录下查找。</li>
<li>当一个文件被修改时，所有加载此文件的文件需要重新编译。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 59: </span>示例</label><pre class="src src-c"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;library.h&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8856adc" class="outline-3">
<h3 id="org8856adc"><span class="section-number-3">12.2</span> <code>#define</code></h3>
<div class="outline-text-3" id="text-12-2">
<p>
<a id="orgb80a8b2"></a>
</p>

<ul class="org-ul">
<li>定义<a href="#orgb9b4269">符号常量</a>或宏（macro）。</li>
<li>替换文本可以是任意字符序列。</li>
<li>作用域只在当前文件。</li>
<li>名称只能用于标记（token），在引号内无效。</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#define</span> &lt;name&gt; &lt;replacement&gt; <span class="org-comment-delimiter">// </span><span class="org-comment">&#26411;&#23614;&#27809;&#26377; ;</span>
<span class="org-preprocessor">#define</span> &lt;name&gt; ...\          <span class="org-comment-delimiter">// </span><span class="org-comment">&#29992; \ &#20998;&#38548;&#20026;&#22810;&#34892;</span>
...\
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 60: </span>参数名前加 <code>#</code> ，表示将输入参数转换为字符串表示</label><pre class="src src-c"><span class="org-preprocessor">#define</span> <span class="org-function-name">tostr</span>(<span class="org-variable-name">expr</span>) #expr
<span class="org-function-name">printf</span>(tostr(Hello\n)); <span class="org-comment-delimiter">// </span><span class="org-comment">printf("Hello\n");</span>

<span class="org-preprocessor">#define</span> <span class="org-function-name">dprint</span>(<span class="org-variable-name">expr</span>) printf(#expr <span class="org-string">" = %g\n"</span> expr)
<span class="org-function-name">dprint</span>(x / y); <span class="org-comment-delimiter">// </span><span class="org-comment">printf("x / y" " = %g\n", x / y);</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 61: </span><code>##</code> 表示将输入参数连接为新的标记</label><pre class="src src-c"><span class="org-preprocessor">#define</span> <span class="org-function-name">concat</span>(<span class="org-variable-name">a</span>, <span class="org-variable-name">b</span>) a ## b <span class="org-comment-delimiter">// </span><span class="org-comment">## &#20004;&#36793;&#30340;&#31354;&#26684;&#34987;&#24573;&#30053;</span>
<span class="org-type">int</span> <span class="org-variable-name">foobar</span> = 1;
printf(<span class="org-string">"%d\n"</span>, concat(foo, bar)); <span class="org-comment-delimiter">// </span><span class="org-comment">1</span>
</pre>
</div>
</div>

<div id="outline-container-org6f46089" class="outline-4">
<h4 id="org6f46089"><span class="section-number-4">12.2.1</span> 宏</h4>
<div class="outline-text-4" id="text-12-2-1">
<ul class="org-ul">
<li>符号常量是固定的值，宏可以通过输入参数生成动态的结果。</li>
<li>宏可用于任何数据类型，而函数只能用于固定的参数类型。</li>
<li>宏可以减少调用函数的消耗，可用于频繁使用的操作，如 <code>getchar</code> 和 <code>putchar</code> 。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 62: </span>示例</label><pre class="src src-c"><span class="org-preprocessor">#define</span> <span class="org-variable-name">FOREVER</span> <span class="org-keyword">for</span>(;;)
<span class="org-preprocessor">#define</span> <span class="org-function-name">SQR</span>(<span class="org-variable-name">A</span>) (A) * (A) <span class="org-comment-delimiter">// </span><span class="org-comment">&#29992; () &#30830;&#20445;&#35745;&#31639;&#39034;&#24207;</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">MAX</span>(<span class="org-variable-name">A</span>, <span class="org-variable-name">B</span>) ((A) &gt; (B) ? (A) : (B))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 63: </span>示例：复合宏</label><pre class="src src-c"><span class="org-preprocessor">#define</span> <span class="org-function-name">FUNCTION</span>(<span class="org-variable-name">name</span>, <span class="org-variable-name">compare</span>)\
<span class="org-type">void</span> <span class="org-function-name">name</span>(<span class="org-type">int</span>&amp; a, <span class="org-type">int</span>&amp; b) {\
    <span class="org-keyword">if</span> (b <span class="org-type">compare</span> <span class="org-variable-name">a</span>) a = b;\
}

<span class="org-function-name">FUNCTION</span>(min, &lt;)
<span class="org-function-name">FUNCTION</span>(max, &gt;)

<span class="org-function-name">min</span>(a, b); <span class="org-comment-delimiter">// </span><span class="org-comment">&#23558;&#36739;&#23567;&#30340;&#20540;&#36171;&#32473; a</span>
<span class="org-function-name">max</span>(a, b); <span class="org-comment-delimiter">// </span><span class="org-comment">&#23558;&#36739;&#22823;&#30340;&#20540;&#36171;&#32473; a</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7934b83" class="outline-3">
<h3 id="org7934b83"><span class="section-number-3">12.3</span> <code>#undef</code></h3>
<div class="outline-text-3" id="text-12-3">
<ul class="org-ul">
<li>删除已定义的符号常量或宏。</li>
<li>可用于确保一个名称是函数而不是宏。</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#undef</span> getchar
<span class="org-type">int</span> <span class="org-function-name">getchar</span>(<span class="org-type">void</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org44e3d2b" class="outline-3">
<h3 id="org44e3d2b"><span class="section-number-3">12.4</span> <code>#if</code> <code>#elif</code> <code>#else</code> <code>#endif</code></h3>
<div class="outline-text-3" id="text-12-4">
<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#if</span> &lt;expr&gt;
    ...
<span class="org-preprocessor">#elif</span> &lt;expr&gt;
    ...
<span class="org-preprocessor">#else</span>
    ...
<span class="org-preprocessor">#endif</span>
</pre>
</div>

<ul class="org-ul">
<li><code>&lt;expr&gt;</code> 是整数常量表达式（不包括 <code>sizeof()</code> 、类型转换、枚举常量）。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 64: </span>确保文件只加载一次</label><pre class="src src-c"><span class="org-preprocessor">#if</span> <span class="org-negation-char">!</span><span class="org-preprocessor">defined</span>(FOO)
<span class="org-preprocessor">#define</span> <span class="org-variable-name">FOO</span>
<span class="org-preprocessor">#include</span> <span class="org-string">"foo.h"</span>
<span class="org-preprocessor">#endif</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 65: </span>选择性加载文件</label><pre class="src src-c"><span class="org-preprocessor">#if</span> SYSTEM == SYSV
<span class="org-preprocessor">    #define</span> <span class="org-variable-name">HDR</span> <span class="org-string">"sysv.h"</span>
<span class="org-preprocessor">#elif</span> SYSTEM == BSD
<span class="org-preprocessor">    #define</span> <span class="org-variable-name">HDR</span> <span class="org-string">"bsd.h"</span>
<span class="org-preprocessor">#elif</span> SYSTEM == MSDOS
<span class="org-preprocessor">    #define</span> <span class="org-variable-name">HDR</span> <span class="org-string">"msdos.h"</span>
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">    #define</span> <span class="org-variable-name">HDR</span> <span class="org-string">"default.h"</span>
<span class="org-preprocessor">#endif</span>
<span class="org-preprocessor">#include</span> HDR
</pre>
</div>
</div>
</div>

<div id="outline-container-orga1fa240" class="outline-3">
<h3 id="orga1fa240"><span class="section-number-3">12.5</span> <code>#ifdef</code> <code>#ifndef</code></h3>
<div class="outline-text-3" id="text-12-5">
<ul class="org-ul">
<li><code>#ifdef</code> 等价于 <code>#if defined()</code> 。</li>
<li><code>#ifndef</code> 等价于 <code>#if !defined()</code> 。</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 66: </span>确保文件只加载一次</label><pre class="src src-c"><span class="org-preprocessor">#if</span><span class="org-preprocessor"><span class="org-negation-char">n</span></span><span class="org-preprocessor">def</span> FOO
<span class="org-preprocessor">#define</span> <span class="org-variable-name">FOO</span>
<span class="org-preprocessor">#include</span> <span class="org-string">"foo.h"</span>
<span class="org-preprocessor">#endif</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org79c5058" class="outline-3">
<h3 id="org79c5058"><span class="section-number-3">12.6</span> <code>#error</code></h3>
<div class="outline-text-3" id="text-12-6">
<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#if</span> <span class="org-negation-char">!</span><span class="org-preprocessor">defined</span> FUNCTION || <span class="org-negation-char">!</span><span class="org-preprocessor">defined</span> INF
<span class="org-preprocessor">#error</span> <span class="org-string">Missing preprocessor definitions</span>
<span class="org-preprocessor">#endif</span> 
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd8bf780" class="outline-2">
<h2 id="orgd8bf780"><span class="section-number-2">13</span> 编译</h2>
<div class="outline-text-2" id="text-13">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> 编译器</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">GNU C Compiler (gcc)</th>
<th scope="col" class="org-left">The De facto standard. Ships with most Unix systems.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Tiny C Compiler (tcc)</td>
<td class="org-left">Small, fast and simple compiler.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Clang</td>
<td class="org-left">A front-end which compiles (Objective) C/C++ using a LLVM backend.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Microsoft Visual Studio Express</td>
<td class="org-left">Powerful and student-friendly version of an industry standard compiler.</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org2390bff" class="outline-3">
<h3 id="org2390bff"><span class="section-number-3">13.1</span> <code>cc</code></h3>
<div class="outline-text-3" id="text-13-1">
<div class="org-src-container">
<pre class="src src-sh">cc &lt;options&gt; &lt;file&gt;.c
    -Wall <span class="org-comment-delimiter"># </span><span class="org-comment">Warnings</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3edb85c" class="outline-3">
<h3 id="org3edb85c"><span class="section-number-3">13.2</span> <code>gcc</code></h3>
<div class="outline-text-3" id="text-13-2">
<div class="org-src-container">
<pre class="src src-sh">gcc &lt;options&gt; &lt;file&gt;.c
    -o &lt;file&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#25991;&#20214;&#21517;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1a9bc1b" class="outline-3">
<h3 id="org1a9bc1b"><span class="section-number-3">13.3</span> <code>make</code></h3>
<div class="outline-text-3" id="text-13-3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 67: </span>示例</label><pre class="src src-sh">make foo
<span class="org-comment-delimiter"># </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
cc foo.c -o foo
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 68: </span>示例</label><pre class="src src-sh"><span class="org-variable-name">CFLAGS</span>=<span class="org-string">"-Wall"</span> make foo
<span class="org-comment-delimiter"># </span><span class="org-comment">&#31561;&#20215;&#20110;</span>
cc -Wall foo.c -o foo
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d19c80" class="outline-3">
<h3 id="org1d19c80"><span class="section-number-3">13.4</span> <code>makefile</code></h3>
<div class="outline-text-3" id="text-13-4">
<p>
<code>makefile</code> 由多个条目组成，每个条目包含：
</p>
<ul class="org-ul">
<li>目标：通常是一个文件</li>
<li>依赖：目标依赖的文件</li>
<li>命令：编译目标的命令</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 69: </span><code>makefile</code> 语法</label><pre class="src src-sh">&lt;NAME&gt;=&lt;value&gt;             <span class="org-comment-delimiter"># </span><span class="org-comment">&#29615;&#22659;&#21464;&#37327;&#65292;e.g. CFLAGS=-Wall</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Comment                  # &#27880;&#37322;</span>
&lt;target&gt;: &lt;dependency&gt; ... <span class="org-comment-delimiter"># </span><span class="org-comment">&#20381;&#36182;&#25991;&#20214;&#26356;&#26032;&#21518;&#65288;&#36890;&#36807;&#27604;&#36739;&#26102;&#38388;&#25139;&#65289;&#65292;&#25165;&#37325;&#26032;&#32534;&#35793;&#36825;&#20010;&#30446;&#26631;</span>
    &lt;command&gt;              <span class="org-comment-delimiter"># </span><span class="org-comment">&#38656;&#35201;&#20197; tab &#24320;&#22836;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 70: </span><code>make</code> 命令</label><pre class="src src-sh">make &lt;target&gt;
</pre>
</div>
</div>

<div id="outline-container-orgf306ccb" class="outline-4">
<h4 id="orgf306ccb"><span class="section-number-4">13.4.1</span> 条目示例</h4>
<div class="outline-text-4" id="text-13-4-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 71: </span>清除编译结果</label><pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">makefile</span>
clean:
    rm -f foo

<span class="org-comment-delimiter"># </span><span class="org-comment">make</span>
make clean
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org8b0611c" class="outline-2">
<h2 id="org8b0611c"><span class="section-number-2">14</span> 标准</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-org456e093" class="outline-3">
<h3 id="org456e093"><span class="section-number-3">14.1</span> ANSI C</h3>
<div class="outline-text-3" id="text-14-1">
<p>
ANSI (American National Standards Institute) C 是 1983 年制定的 C 语言标准，是无歧义的（unambiguous）、与硬件无关的（machine-independent） C 语言定义。
</p>
</div>
</div>
</div>

<div id="outline-container-orge9d9352" class="outline-2">
<h2 id="orge9d9352"><span class="section-number-2">15</span> 链接</h2>
<div class="outline-text-2" id="text-15">
<ol class="org-ol">
<li><a href="https://en.wikipedia.org/wiki/C_data_types">C data types</a></li>
</ol>

<hr />

<ol class="org-ol">
<li><a href="http://www.maultech.com/chrislott/resources/cstyle/">C and C++ Style Guides</a></li>
<li><a href="http://www.gnu.org/prep/standards/standards.html">GNU Coding Standards</a></li>
<li><a href="https://www.kernel.org/doc/Documentation/CodingStyle">Linux kernel coding style</a></li>
</ol>

<hr />

<ol class="org-ol">
<li><a href="http://c-faq.com/">comp.lang.c Frequently Asked Questions</a></li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Victor Chen</p>
<p class="date">Created: 2019-07-23 Tue 16:06</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
