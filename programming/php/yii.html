---
title: "Yii"
---
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Yii</title>
<!-- 2016-11-30 Wed 09:28 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/font.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/readtheorg.css"/>
<script type="text/javascript" src="../../styles/readtheorg/js/jquery.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Yii</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Yii</a></li>
<li><a href="#sec-2">2. Dir</a>
<ul>
<li><a href="#sec-2-1">2.1. 项目文件</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Config</a>
<ul>
<li><a href="#sec-3-1">3.1. 常量</a></li>
<li><a href="#sec-3-2">3.2. Web server 配置</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Controller</a>
<ul>
<li><a href="#sec-4-1">4.1. 路由</a></li>
<li><a href="#sec-4-2">4.2. 示例</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Model</a>
<ul>
<li><a href="#sec-5-1">5.1. 示例</a></li>
<li><a href="#sec-5-2">5.2. API</a></li>
</ul>
</li>
<li><a href="#sec-6">6. AR</a>
<ul>
<li><a href="#sec-6-1">6.1. 示例</a></li>
<li><a href="#sec-6-2">6.2. API</a></li>
</ul>
</li>
<li><a href="#sec-7">7. View</a>
<ul>
<li><a href="#sec-7-1">7.1. Layout</a></li>
<li><a href="#sec-7-2">7.2. Block</a></li>
<li><a href="#sec-7-3">7.3. 示例</a>
<ul>
<li><a href="#sec-7-3-1">7.3.1. 列表</a></li>
<li><a href="#sec-7-3-2">7.3.2. 表单</a></li>
<li><a href="#sec-7-3-3">7.3.3. 查询</a></li>
</ul>
</li>
<li><a href="#sec-7-4">7.4. <code>yii\base\View</code></a>
<ul>
<li><a href="#sec-7-4-1">7.4.1. <code>beginContent()</code></a></li>
</ul>
</li>
<li><a href="#sec-7-5">7.5. <code>yii\helpers\BaseHtml</code></a>
<ul>
<li><a href="#sec-7-5-1">7.5.1. <code>addCssClass()</code> <code>removeCssClass()</code></a></li>
<li><a href="#sec-7-5-2">7.5.2. <code>addCssStyle()</code> <code>removeCssStyle()</code></a></li>
<li><a href="#sec-7-5-3">7.5.3. <code>beginForm()</code> <code>endForm()</code></a></li>
<li><a href="#sec-7-5-4">7.5.4. <code>beginTag()</code> <code>endTag()</code></a></li>
<li><a href="#sec-7-5-5">7.5.5. <code>button()</code> <code>submitButton()</code> <code>resetButton()</code></a></li>
<li><a href="#sec-7-5-6">7.5.6. <code>cssStyleFromArray()</code> <code>cssStyleToArray()</code></a></li>
<li><a href="#sec-7-5-7">7.5.7. <code>encode()</code> <code>decode()</code></a></li>
<li><a href="#sec-7-5-8">7.5.8. <code>input()</code></a></li>
<li><a href="#sec-7-5-9">7.5.9. <code>tag()</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-8">8. Widget</a></li>
<li><a href="#sec-9">9. Database</a></li>
<li><a href="#sec-10">10. API</a>
<ul>
<li><a href="#sec-10-1">10.1. <code>\yii\web\Request</code></a>
<ul>
<li><a href="#sec-10-1-1">10.1.1. <code>get()</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-11">11. Tool</a>
<ul>
<li><a href="#sec-11-1">11.1. Composer</a></li>
<li><a href="#sec-11-2">11.2. Codeception</a></li>
<li><a href="#sec-11-3">11.3. Console</a>
<ul>
<li><a href="#sec-11-3-1">11.3.1. <code>migrate</code></a></li>
</ul>
</li>
<li><a href="#sec-11-4">11.4. MongoDB</a>
<ul>
<li><a href="#sec-11-4-1">11.4.1. 安装</a></li>
<li><a href="#sec-11-4-2">11.4.2. 配置</a></li>
<li><a href="#sec-11-4-3">11.4.3. 示例</a></li>
<li><a href="#sec-11-4-4">11.4.4. ActiveRecord</a></li>
</ul>
</li>
<li><a href="#sec-11-5">11.5. 组件</a></li>
</ul>
</li>
<li><a href="#sec-12">12. Install</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Yii</h2>
<div class="outline-text-2" id="text-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Basic</th>
<th scope="col" class="left">简单网站，没有子系统、前后台</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Advanced</td>
<td class="left">中型网站，两套界面：前台、CMS</td>
</tr>
</tbody>
</table>

<hr  />

<p>
组成
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">MVC</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Entry script</td>
<td class="left">PHP scripts that are directly accessible by end users</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">Responsible for starting a request handling cycle</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Application</td>
<td class="left">Globally accessible objects</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">Manage application components, and coordinate them to fulfill requests</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Application component</td>
<td class="left">Objects registered with applications</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">Provide various services for fulfilling requests</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Module</td>
<td class="left">Self-contained packages that contain complete MVC by themselves</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">An application can be organized in terms of multiple modules</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Filter</td>
<td class="left">Code to be invoked before / after the actual handling of each request by controllers</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Widget</td>
<td class="left">Objects that can be embedded in views</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">May contain controller logic and can be reused in different views</td>
</tr>
</tbody>
</table>


<div class="figure">
<p><img src="../images/yii/01.png" alt="01.png" />
</p>
</div>

<hr  />

<p>
请求流程
</p>
<ul class="org-ul">
<li>web server 接受请求，传递到 <code>index.php</code> ；
</li>
<li>创建 <code>Application</code> 对象，决定处理请求需要使用的 <code>Controller</code> 类；
</li>
<li><code>Controller</code> 对象创建，决定需要执行的 <code>Action</code> 并执行，传递请求细节数据；
</li>
<li>动作执行，返回渲染结果；
</li>
<li>一个特殊组件（component）将数据格式化；
</li>
<li>结果数据：HTML、JSON、XML 返回给用户；
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Dir</h2>
<div class="outline-text-2" id="text-2">
<p>
Project root
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>backend/</code></th>
<th scope="col" class="left">Advanced 后台</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>common/</code></td>
<td class="left">前后台共用代码</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>console/</code></td>
<td class="left">自定义 console 命令</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>frontend/</code></td>
<td class="left">Advanced 前台</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>vendor/</code></td>
<td class="left">Composer 安装的包</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>requirements.php</code></td>
<td class="left">检查部署环境是否满足 Yii 要求</td>
</tr>
</tbody>
</table>

<hr  />

<p>
<code>@app/</code>
</p>
<ul class="org-ul">
<li>Application root;
</li>
<li>For Basic app, it's project root;
</li>
<li>For Advanced app, it's <code>backend/</code> or <code>frontend/</code> under project root;
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>config/</code></th>
<th scope="col" class="left">配置文件</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>controllers/</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>models/</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>views/</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>web/</code></td>
<td class="left">应用公开目录</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 项目文件</h3>
<div class="outline-text-3" id="text-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>controllers/&lt;Menu&gt;Controller.php</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>models/&lt;model&gt;/&lt;Model&gt;.php</code></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>models/&lt;model&gt;/&lt;Model&gt;Record.php</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>views/&lt;menu&gt;/&lt;action&gt;.php</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Config</h2>
<div class="outline-text-2" id="text-3">
<p>
<code>config/</code>
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>console.php</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="#config_db"><code>db.php</code></a></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>web.php</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<code>config/web.php</code>
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>id</code></th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">应用名</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>basePath</code></td>
<td class="left">&#xa0;</td>
<td class="left">应用绝对路径，所有相对路径都基于此</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>components.request.cookieValidationKey</code></td>
<td class="left">&#xa0;</td>
<td class="left">用于基于 Cookie 的身份验证</td>
</tr>

<tr>
<td class="left"><code>components.request.enableCookieValidation</code></td>
<td class="left">&#xa0;</td>
<td class="left">设为 <code>false</code> 关闭基于 Cookie 的认证</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>components.urlManager.enablePrettyUrl</code></td>
<td class="left"><code>boolean</code></td>
<td class="left">优化 URL 模式</td>
</tr>

<tr>
<td class="left"><code>components.urlManager.showScriptName</code></td>
<td class="left"><code>boolean</code></td>
<td class="left">URL 是否显示 <code>index.php</code></td>
</tr>
</tbody>
</table>

<p>
<code>config/db.php</code> <a id="config_db" name="config_db"></a>
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>class</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>dsn</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>username</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>password</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> 常量</h3>
<div class="outline-text-3" id="text-3-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>YII_DEBUG</code></th>
<th scope="col" class="left">Debug 模式开关</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Web server 配置</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Apache
</p>
<div class="org-src-container">

<pre class="src src-code"># Set document root to be "basic/web"
DocumentRoot "path/to/basic/web"

&lt;Directory "path/to/basic/web"&gt;
    # use mod_rewrite for pretty URL support
    RewriteEngine on
    # If a directory or a file exists, use the request directly
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    # Otherwise forward the request to index.php
    RewriteRule . index.php

    # ...other settings...
&lt;/Directory&gt;
</pre>
</div>

<hr  />

<p>
Nginx
</p>
<div class="org-src-container">

<pre class="src src-code">server {
    charset utf-8;
    client_max_body_size 128M;

    listen 80; ## listen for ipv4
    #listen [::]:80 default_server ipv6only=on; ## listen for ipv6

    server_name mysite.local;
    root        /path/to/basic/web;
    index       index.php;

    access_log  /path/to/basic/log/access.log;
    error_log   /path/to/basic/log/error.log;

    location / {
        # Redirect everything that isn't a real file to index.php
        try_files $uri $uri/ /index.php?$args;
    }

    # uncomment to avoid processing of calls to non-existing static files by Yii
    #location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {
    #    try_files $uri =404;
    #}
    #error_page 404 /404.html;

    location ~ \.php$ {
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root/$fastcgi_script_name;
        fastcgi_pass  127.0.0.1:9000;
        #fastcgi_pass unix:/var/run/php5-fpm.sock;
        try_files $uri =404;
    }

    location ~ /\.(ht|svn|git) {
        deny all;
    }
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Controller</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 路由</h3>
<div class="outline-text-3" id="text-4-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">默认 URL</th>
<th scope="col" class="left"><code>http://yourdomain/index.php?r=menu/action</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">优化 URL</td>
<td class="left"><code>http://yourdomain/menu/action</code></td>
</tr>
</tbody>
</table>

<p>
<code>config/web.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php">$<span class="org-variable-name">config</span> = [
    <span class="org-string">'components'</span> =&gt; [
        <span class="org-string">'urlManager'</span> =&gt; [
            <span class="org-string">'class'</span> =&gt; <span class="org-string">'yii\web\UrlManager'</span>,
            <span class="org-string">'enablePrettyUrl'</span> =&gt; <span class="org-constant">true</span>,
            <span class="org-string">'showScriptName'</span> =&gt; <span class="org-constant">false</span>,
            <span class="org-string">'rules'</span> =&gt; [
                <span class="org-string">'&lt;controller:\w+&gt;/&lt;id:\d+&gt;'</span> =&gt; <span class="org-string">'&lt;controller&gt;/view'</span>,
                <span class="org-string">'&lt;controller:\w+&gt;/&lt;action:\w+&gt;/&lt;id:\d+&gt;'</span> =&gt; <span class="org-string">'&lt;controller&gt;/&lt;action&gt;'</span>,
                <span class="org-string">'&lt;controller:\w+&gt;/&lt;action:\w+&gt;'</span> =&gt; <span class="org-string">'&lt;controller&gt;/&lt;action&gt;'</span>,
            ],
        ],
    ],
];
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> 示例</h3>
<div class="outline-text-3" id="text-4-2">
<p>
<code>controllers/&lt;Menu&gt;Controller.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">app\controllers</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#23646;&#20110; Application &#31867;&#30340; controllerNamespace &#23450;&#20041;&#30340;&#21629;&#21517;&#31354;&#38388;</span>
<span class="org-keyword">use</span> <span class="org-type">yii\web\Controller</span>;    <span class="org-comment-delimiter">// </span><span class="org-comment">&#32487;&#25215; \yii\web\Controller &#25110; \yii\base\Controller&#65288;&#29992;&#20110; console&#65289;</span>

<span class="org-keyword">class</span> <span class="org-type">MenuController</span> <span class="org-keyword">extends</span> <span class="org-type">Controller</span> <span class="org-comment-delimiter">// </span><span class="org-comment">&#31867;&#21517;&#20197; Controller &#20026;&#21518;&#32512;</span>
{
    <span class="org-keyword">public</span> $<span class="org-variable-name">layout</span> = <span class="org-string">'menu'</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">&#21015;&#34920;&#21160;&#20316;</span>
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">actionIndex</span>()       <span class="org-comment-delimiter">// </span><span class="org-comment">&#26041;&#27861;&#21517;&#20197; action &#20026;&#21069;&#32512;</span>
    {
        $<span class="org-variable-name">records</span> = $<span class="org-constant">this</span>-&gt;<span class="org-function-name">findRecords</span>();
        <span class="org-keyword">return</span> $<span class="org-constant">this</span>-&gt;<span class="org-function-name">render</span>(<span class="org-string">'index'</span>, <span class="org-function-name">compact</span>(<span class="org-string">'records'</span>));
    }

    <span class="org-comment-delimiter">// </span><span class="org-comment">&#28155;&#21152;&#21160;&#20316;</span>
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">actionAdd</span>()
    {
        $<span class="org-variable-name">model</span> = <span class="org-keyword">new</span> <span class="org-type">ModelRecord</span>();
        <span class="org-keyword">if</span> ($<span class="org-constant">this</span>-&gt;<span class="org-function-name">load</span>($<span class="org-variable-name">model</span>, $<span class="org-constant">_POST</span>)) <span class="org-comment-delimiter">// </span><span class="org-comment">Yii &#20551;&#35774;&#28210;&#26579;&#34920;&#21333;&#30340;&#36335;&#24452;&#65292;&#20063;&#26159;&#34920;&#21333;&#25552;&#20132;&#30340;&#21160;&#20316;</span>
        {
            $<span class="org-constant">this</span>-&gt;<span class="org-function-name">store</span>($<span class="org-constant">this</span>-&gt;<span class="org-function-name">makeModel</span>($<span class="org-variable-name">model</span>));
            <span class="org-keyword">return</span> $<span class="org-constant">this</span>-&gt;<span class="org-function-name">redirect</span>(<span class="org-string">'/menu'</span>);
        }
        <span class="org-keyword">return</span> $<span class="org-constant">this</span>-&gt;<span class="org-function-name">render</span>(<span class="org-string">'add'</span>, <span class="org-function-name">compact</span>(<span class="org-string">'model'</span>));
    }

    <span class="org-comment-delimiter">// </span><span class="org-comment">&#26597;&#35810;&#21160;&#20316;</span>
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">actionQuery</span>()
    {
        <span class="org-keyword">return</span> $<span class="org-constant">this</span>-&gt;<span class="org-function-name">render</span>(<span class="org-string">'query'</span>);
    }

    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">findRecords</span>()
    {
        $<span class="org-variable-name">property</span> = <span class="org-type">Yii</span>::$<span class="org-variable-name">app</span>-&gt;<span class="org-variable-name">request</span>-&gt;<span class="org-function-name">get</span>(<span class="org-string">'property'</span>);
        $<span class="org-variable-name">records</span> = $<span class="org-constant">this</span>-&gt;<span class="org-function-name">getRecordsByProperty</span>($<span class="org-variable-name">property</span>);
        $<span class="org-variable-name">dataProvider</span> = $<span class="org-constant">this</span>-&gt;<span class="org-function-name">wrapIntoDataProvider</span>($<span class="org-variable-name">records</span>);
        <span class="org-keyword">return</span> $<span class="org-variable-name">dataProvider</span>;
    }

    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">getRecordsByProperty</span>($<span class="org-variable-name">property</span>)
    {
        $<span class="org-variable-name">record</span> = <span class="org-type">ModelRecord</span>::<span class="org-function-name">findOne</span>([<span class="org-string">'property'</span> =&gt; $<span class="org-variable-name">property</span>]);
        <span class="org-keyword">if</span> (!$<span class="org-variable-name">record</span>)
            <span class="org-keyword">return</span> [];
        <span class="org-keyword">return</span> [$<span class="org-constant">this</span>-&gt;<span class="org-function-name">makeModel</span>($<span class="org-variable-name">record</span>)];
    }

    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">wrapIntoDataProvider</span>($<span class="org-variable-name">data</span>)
    {
        <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">ArrayDataProvider</span>([
            <span class="org-string">'allModels'</span> =&gt; $<span class="org-variable-name">data</span>,
            <span class="org-string">'pagination'</span> =&gt; <span class="org-constant">false</span>
        ]);
    }

    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">load</span>(<span class="org-type">ModelRecord</span> $<span class="org-variable-name">model</span>, <span class="org-type">array</span> $<span class="org-variable-name">post</span>)
    {
        <span class="org-keyword">return</span> $<span class="org-variable-name">model</span>-&gt;<span class="org-function-name">load</span>($<span class="org-variable-name">post</span>) <span class="org-comment-delimiter">// </span><span class="org-comment">&#20174; POST &#35831;&#27714;&#25968;&#25454;&#20013;&#35835;&#21462; Model &#23646;&#24615;</span>
           <span class="org-keyword">and</span> $<span class="org-variable-name">model</span>-&gt;<span class="org-function-name">validate</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">&#25968;&#25454;&#39564;&#35777;</span>
    }

    <span class="org-comment-delimiter">// </span><span class="org-comment">&#23558;&#25968;&#25454;&#24211;&#35760;&#24405;&#29983;&#25104; Model</span>
    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">makeModel</span>(<span class="org-type">ModelRecord</span> $<span class="org-variable-name">record</span>)
    {
        $<span class="org-variable-name">property</span> = $<span class="org-variable-name">record</span>-&gt;<span class="org-variable-name">property</span>;
        $<span class="org-variable-name">model</span> = <span class="org-keyword">new</span> <span class="org-type">Model</span>($<span class="org-variable-name">property</span>);
        <span class="org-keyword">return</span> $<span class="org-variable-name">model</span>;
    }

    <span class="org-comment-delimiter">// </span><span class="org-comment">&#23558; Model &#25968;&#25454;&#23384;&#20648;&#21040;&#25968;&#25454;&#24211;</span>
    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">store</span>(<span class="org-type">Model</span> $<span class="org-variable-name">model</span>)
    {
        $<span class="org-variable-name">record</span> = <span class="org-keyword">new</span> <span class="org-type">ModelRecord</span>();
        $<span class="org-variable-name">record</span>-&gt;<span class="org-variable-name">property</span> = $<span class="org-variable-name">model</span>-&gt;<span class="org-variable-name">property</span>;
        ...
        $<span class="org-variable-name">record</span>-&gt;<span class="org-function-name">save</span>();
        <span class="org-comment-delimiter">// </span><span class="org-comment">save() &#20043;&#21518;&#29983;&#25104;&#20102; $record-&gt;id</span>
    }
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Model</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>Model 被用作数据的容器，而不直接与数据库相关；
</li>
</ul>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 示例</h3>
<div class="outline-text-3" id="text-5-1">
<p>
<code>models/&lt;model&gt;/&lt;Model&gt;.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">app\models\model</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#23558;&#30456;&#20851;&#31867;&#32452;&#32455;&#22312;&#19968;&#20010;&#21629;&#21517;&#31354;&#38388;</span>
                            <span class="org-comment-delimiter">// </span><span class="org-comment">&#23545;&#24212;&#30446;&#24405; models/model/</span>
<span class="org-warning">Class</span> <span class="org-warning">Model</span>
{
    <span class="org-comment-delimiter">// </span><span class="org-comment">Properties</span>
    ...

    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__construct</span>()
    {
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> API</h3>
<div class="outline-text-3" id="text-5-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>load()</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>validate()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><code>$errors</code></td>
<td class="left">存储 <code>validate()</code> 产生的错误信息</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> AR</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>ActiveRecord；
</li>
<li>对象关系映射（ORM），定义类与数据表之间的映射关系；
</li>
<li>存储到数据库之前对字段进行验证；
</li>
<li>通过主键、属性、自定义查询，从数据库获取记录数据；
</li>
</ul>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> 示例</h3>
<div class="outline-text-3" id="text-6-1">
<p>
<code>models/&lt;model&gt;/&lt;Model&gt;Record.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">yii\models\model</span>;
<span class="org-keyword">use</span> <span class="org-type">yii\db\ActiveRecord</span>;

<span class="org-keyword">class</span> <span class="org-type">ModelRecord</span> <span class="org-keyword">extends</span> <span class="org-type">ActiveRecord</span>
{
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">tableName</span>()
    {
        <span class="org-keyword">return</span> <span class="org-string">'&lt;table&gt;'</span>;
    }

    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">rules</span>()
    {
        <span class="org-keyword">return</span> [
            [<span class="org-string">'&lt;column&gt;'</span>, <span class="org-string">'&lt;rule&gt;'</span>, ...],
            ...
        ];
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> API</h3>
<div class="outline-text-3" id="text-6-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>rules()</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>save()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>findOne()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr  />

<p>
验证规则
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">类型</th>
<th scope="col" class="left"><code>number</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left"><code>string</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left"><code>date</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">存在</td>
<td class="left"><code>required</code></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>safe</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">长度</td>
<td class="left"><code>max</code></td>
<td class="left"><code>256</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">格式</td>
<td class="left"><code>format</code></td>
<td class="left"><code>Y-m-d</code></td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li><code>safe</code> 表示无特定规则，可被 <code>setAttributes()</code> 设置；
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> View</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li>Controller 执行 <code>render()</code> ，将数据传递给 View；
</li>
<li>Controller 调用 Layout，将渲染结果通过 <code>$content</code> 传递给 Layout；
</li>
</ul>

<p>
变量
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$this</code></th>
<th scope="col" class="left">View component <code>yii\web\View</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">预定义变量</td>
<td class="left">由 Controller 传递给 View 的数据</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">通常用块注释在 View 的头部列出</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Layout</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>Views that represent the common parts of multiple views, eg. header, footer;
</li>
<li>Stored in <code>@app/views/layouts</code> by default, can be customized by configuring <code>yii\base\Module::$layoutPath</code>;
</li>
</ul>

<p>
Trigger methods
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">Example data</th>
<th scope="col" class="left">Event</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>beginPage()</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>EVENT_BEGIN_PAGE</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>head()</code></td>
<td class="left">Link tags, meta tags</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>beginBody()</code></td>
<td class="left">JS targeted at <code>&lt;body&gt;</code> begin position</td>
<td class="left"><code>EVENT_BEGIN_BODY</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>endBody()</code></td>
<td class="left">JS targeted at <code>&lt;body&gt;</code> end position</td>
<td class="left"><code>EVENT_END_BODY</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>endPage()</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>EVENT_END_PAGE</code></td>
</tr>
</tbody>
</table>

<p>
Example
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?php</span>
<span class="org-keyword">use</span> <span class="org-type">yii\helpers\Html</span>;

<span class="org-comment-delimiter">/* </span><span class="org-comment">@var $this yii\web\View </span><span class="org-comment-delimiter">*/</span>
<span class="org-comment-delimiter">/* </span><span class="org-comment">@var $content string </span><span class="org-comment-delimiter">*/</span>
<span class="org-preprocessor">?&gt;</span>
<span class="org-preprocessor">&lt;?php</span> $<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-function-name">beginPage</span>() <span class="org-preprocessor">?&gt;</span>
<span class="org-constant">&lt;!</span><span class="org-warning">DOCTYPE</span> <span class="org-warning">html</span><span class="org-constant">&gt;</span>
<span class="org-constant">&lt;html</span> <span class="org-constant">lang=</span><span class="org-string">"en"</span><span class="org-constant">&gt;</span>
<span class="org-constant">&lt;head&gt;</span>
    <span class="org-constant">&lt;meta</span> <span class="org-constant">charset=</span><span class="org-string">"UTF-8"</span>/<span class="org-constant">&gt;</span>
    <span class="org-preprocessor">&lt;?=</span> <span class="org-type">Html</span>::<span class="org-function-name">csrfMetaTags</span>() <span class="org-preprocessor">?&gt;</span>
    <span class="org-constant">&lt;title&gt;</span><span class="org-preprocessor">&lt;?=</span> <span class="org-type">Html</span>::<span class="org-function-name">encode</span>($<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-variable-name">title</span>) <span class="org-preprocessor">?&gt;</span><span class="org-constant">&lt;/title&gt;</span>
    <span class="org-preprocessor">&lt;?php</span> $<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-function-name">head</span>() <span class="org-preprocessor">?&gt;</span>
<span class="org-constant">&lt;/head&gt;</span>
<span class="org-constant">&lt;body&gt;</span>
<span class="org-preprocessor">&lt;?php</span> $<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-function-name">beginBody</span>() <span class="org-preprocessor">?&gt;</span>
    <span class="org-constant">&lt;header&gt;</span><span class="org-warning">My</span> <span class="org-warning">Company</span><span class="org-constant">&lt;/header&gt;</span>
    <span class="org-preprocessor">&lt;?=</span> $<span class="org-variable-name">content</span> <span class="org-preprocessor">?&gt;</span> <span class="org-comment-delimiter">/* </span><span class="org-comment">Rendering result of content views </span><span class="org-comment-delimiter">*/</span>
                    <span class="org-comment-delimiter">/* </span><span class="org-comment">Pushed into the layout when yii\base\Controller::render() is called </span><span class="org-comment-delimiter">*/</span>
    <span class="org-constant">&lt;footer&gt;</span>&amp;<span class="org-warning">copy</span>; <span class="org-default">2014</span> <span class="org-warning">by</span> <span class="org-warning">My</span> <span class="org-warning">Company</span><span class="org-constant">&lt;/footer&gt;</span>
<span class="org-preprocessor">&lt;?php</span> $<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-function-name">endBody</span>() <span class="org-preprocessor">?&gt;</span>
<span class="org-constant">&lt;/body&gt;</span>
<span class="org-constant">&lt;/html&gt;</span>
<span class="org-preprocessor">&lt;?php</span> $<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-function-name">endPage</span>() <span class="org-preprocessor">?&gt;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> Block</h3>
<div class="outline-text-3" id="text-7-2">
<ul class="org-ul">
<li>Specify view content in one place, display it in another place;
</li>
</ul>

<p>
In View
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span class="org-keyword">?php</span> $this-&gt;beginBlock('block'); ?&gt;
... content ...
&lt;<span class="org-keyword">?php</span> $this-&gt;endBlock(); ?&gt;
</pre>
</div>

<p>
In Layout
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span class="org-keyword">?php</span> if (isset($this-&gt;blocks['block'])): ?&gt;
    &lt;?= $this-&gt;blocks['block'] ?&gt;
&lt;<span class="org-keyword">?php</span> else: ?&gt;
    ... default content ...
&lt;<span class="org-keyword">?php</span> endif; ?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> 示例</h3>
<div class="outline-text-3" id="text-7-3">
</div><div id="outline-container-sec-7-3-1" class="outline-4">
<h4 id="sec-7-3-1"><span class="section-number-4">7.3.1</span> 列表</h4>
<div class="outline-text-4" id="text-7-3-1">
<p>
列表页面 <code>views/&lt;menu&gt;/index.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">echo</span> <span class="org-type">\yii\widgets\ListView</span>::<span class="org-function-name">widget</span>([
    <span class="org-string">'options'</span> =&gt; [
        <span class="org-string">'class'</span> =&gt; <span class="org-string">'list-view'</span>,
        <span class="org-string">'id'</span>    =&gt; <span class="org-string">'search_results'</span> <span class="org-comment-delimiter">// </span><span class="org-comment">&#26174;&#31034;&#21015;&#34920;&#30340; HTML &#26631;&#31614;&#30340; id</span>
    ],
    <span class="org-string">'itemView'</span> =&gt; <span class="org-string">'_model'</span>,
    <span class="org-string">'dataProvider'</span> =&gt; $<span class="org-variable-name">records</span>
]);
</pre>
</div>

<hr  />

<p>
列表项 <code>views/&lt;menu&gt;/_&lt;model&gt;.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">echo</span> <span class="org-type">\yii\widgets\DetailView</span>::<span class="org-function-name">widget</span>([
    <span class="org-string">'model'</span> =&gt; $<span class="org-variable-name">model</span>,
    <span class="org-string">'attributes'</span> =&gt; [
        [<span class="org-string">'attribute'</span> =&gt; <span class="org-string">'&lt;property&gt;'</span>],
        [<span class="org-string">'attribute'</span> =&gt; <span class="org-string">'&lt;property&gt;'</span>, <span class="org-string">'value'</span> =&gt; $<span class="org-variable-name">model</span>-&gt;<span class="org-variable-name">property</span>],
        <span class="org-string">'&lt;property&gt;:text'</span>,
        [<span class="org-string">'label'</span> =&gt; <span class="org-string">'&lt;Property'</span><span class="org-constant">&gt;</span>, <span class="org-string">'attribute'</span> =&gt; <span class="org-string">'property.0.number'</span>]
    ]
]);
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-3-2" class="outline-4">
<h4 id="sec-7-3-2"><span class="section-number-4">7.3.2</span> 表单</h4>
<div class="outline-text-4" id="text-7-3-2">
<p>
<code>views/&lt;menu&gt;/add.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">use</span> <span class="org-type">app\models\model\ModelRecord</span>;
<span class="org-keyword">use</span> <span class="org-type">yii\web\View</span>;
<span class="org-keyword">use</span> <span class="org-type">yii\helpers\Html</span>;
<span class="org-keyword">use</span> <span class="org-type">yii\widgets\ActiveForm</span>;

$<span class="org-variable-name">form</span> = <span class="org-type">ActiveForm</span>::<span class="org-function-name">begin</span>([
    <span class="org-string">'id'</span> =&gt; <span class="org-string">'form'</span>,
]);
<span class="org-keyword">echo</span> $<span class="org-variable-name">form</span>-&gt;<span class="org-function-name">errorSummary</span>([$<span class="org-variable-name">model</span>]);   <span class="org-comment-delimiter">// </span><span class="org-comment">&#39564;&#35777;&#38169;&#35823;&#20449;&#24687;</span>
                                      <span class="org-comment-delimiter">// </span><span class="org-comment">Model &#23545;&#35937;&#30001; render() &#26041;&#27861;&#20256;&#20837;</span>
<span class="org-keyword">echo</span> $<span class="org-variable-name">form</span>-&gt;<span class="org-function-name">field</span>($<span class="org-variable-name">model</span>, <span class="org-string">'&lt;field&gt;'</span>);
<span class="org-keyword">echo</span> <span class="org-type">Html</span>::<span class="org-function-name">submitButton</span>(<span class="org-string">'Submit'</span>, [<span class="org-string">'class'</span> =&gt; <span class="org-string">'btn btn-primary'</span>]);
<span class="org-type">ActiveForm</span>::<span class="org-function-name">end</span>();
</pre>
</div>

<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?php</span>
<span class="org-keyword">use</span> <span class="org-type">yii\helpers\Html</span>;
<span class="org-keyword">use</span> <span class="org-type">yii\widgets\ActiveForm</span>;

<span class="org-comment-delimiter">/* </span><span class="org-comment">@var $this yii\web\View </span><span class="org-comment-delimiter">*/</span>
<span class="org-comment-delimiter">/* </span><span class="org-comment">@var $form yii\widgets\ActiveForm </span><span class="org-comment-delimiter">*/</span>
<span class="org-comment-delimiter">/* </span><span class="org-comment">@var $model app\models\LoginForm </span><span class="org-comment-delimiter">*/</span>

$<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-variable-name">title</span> = <span class="org-string">'Login'</span>;
<span class="org-preprocessor">?&gt;</span>
<span class="org-constant">&lt;h</span>1<span class="org-constant">&gt;</span><span class="org-preprocessor">&lt;?=</span> <span class="org-type">Html</span>::<span class="org-function-name">encode</span>($<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-variable-name">title</span>) <span class="org-preprocessor">?&gt;</span><span class="org-constant">&lt;/h</span>1<span class="org-constant">&gt;</span>

<span class="org-constant">&lt;p&gt;</span><span class="org-warning">Please</span> <span class="org-warning">fill</span> <span class="org-warning">out</span> <span class="org-warning">the</span> <span class="org-warning">following</span> <span class="org-warning">fields</span> <span class="org-warning">to</span> <span class="org-warning">login</span>:<span class="org-constant">&lt;/p&gt;</span>

<span class="org-preprocessor">&lt;?php</span> $<span class="org-variable-name">form</span> = <span class="org-type">ActiveForm</span>::<span class="org-function-name">begin</span>(); <span class="org-preprocessor">?&gt;</span>
    <span class="org-preprocessor">&lt;?=</span> $<span class="org-variable-name">form</span>-<span class="org-constant">&gt;</span><span class="org-function-name">field</span>($<span class="org-variable-name">model</span>, <span class="org-string">'username'</span>) <span class="org-preprocessor">?&gt;</span>
    <span class="org-preprocessor">&lt;?=</span> $<span class="org-variable-name">form</span>-<span class="org-constant">&gt;</span><span class="org-function-name">field</span>($<span class="org-variable-name">model</span>, <span class="org-string">'password'</span>)-&gt;<span class="org-function-name">passwordInput</span>() <span class="org-preprocessor">?&gt;</span>
    <span class="org-preprocessor">&lt;?=</span> <span class="org-type">Html</span>::<span class="org-function-name">submitButton</span>(<span class="org-string">'Login'</span>) <span class="org-preprocessor">?&gt;</span>
<span class="org-preprocessor">&lt;?php</span> <span class="org-type">ActiveForm</span>::<span class="org-function-name">end</span>(); <span class="org-preprocessor">?&gt;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-3-3" class="outline-4">
<h4 id="sec-7-3-3"><span class="section-number-4">7.3.3</span> 查询</h4>
<div class="outline-text-4" id="text-7-3-3">
<p>
<code>viewe/&lt;menu&gt;/query.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">use</span> <span class="org-type">yii\helpers\Html</span>;

<span class="org-keyword">echo</span> <span class="org-type">Html</span>::<span class="org-function-name">beginForm</span>([<span class="org-string">'/menu'</span>], <span class="org-string">'get'</span>);
<span class="org-keyword">echo</span> <span class="org-type">Html</span>::<span class="org-function-name">label</span>(<span class="org-string">'Property to search:'</span>, <span class="org-string">'property'</span>);
<span class="org-keyword">echo</span> <span class="org-type">Html</span>::<span class="org-function-name">textInput</span>(<span class="org-string">'property'</span>);
<span class="org-keyword">echo</span> <span class="org-type">Html</span>::<span class="org-function-name">submitButton</span>(<span class="org-string">'Search'</span>);
<span class="org-keyword">echo</span> <span class="org-type">Html</span>::<span class="org-function-name">endForm</span>();
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> <code>yii\base\View</code></h3>
<div class="outline-text-3" id="text-7-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><a href="#view_begincontent"><code>beginContent()</code></a></th>
<th scope="col" class="left">Begins rendering of content decorated by specified view</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-7-4-1" class="outline-4">
<h4 id="sec-7-4-1"><span class="section-number-4">7.4.1</span> <code>beginContent()</code></h4>
<div class="outline-text-4" id="text-7-4-1">
<p>
<a id="view_begincontent" name="view_begincontent"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-function-name">beginContent</span> (
    $<span class="org-variable-name">viewFile</span>,
    $<span class="org-variable-name">params</span> = []
)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$viewFile</code></th>
<th scope="col" class="left">String</th>
<th scope="col" class="left">The view file to decorate the content enclosed</th>
</tr>

<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">Can be view file path or path alias</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$params</code></td>
<td class="left">Array</td>
<td class="left">Variables to be extracted and made available in decorative view</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Return</td>
<td class="left"><code>yii\widgets\ContentDecorator</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Implement nested layout
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span class="org-keyword">?php</span> $this-&gt;beginContent('@app/views/layouts/base.php'); ?&gt;
... layout content ...
&lt;<span class="org-keyword">?php</span> $this-&gt;endContent(); ?&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5"><span class="section-number-3">7.5</span> <code>yii\helpers\BaseHtml</code></h3>
<div class="outline-text-3" id="text-7-5">
<p>
View 中调用
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?=</span> <span class="org-warning">Html</span>::<span class="org-constant">&lt;method&gt;</span>() <span class="org-preprocessor">?&gt;</span>
</pre>
</div>

<hr  />

<p>
<code>$options</code> 属性值通用规则
</p>
<ul class="org-ul">
<li>值为 Null 时，属性不会输出；
</li>
<li>值为 Boolean 时，属性只输出名称，eg. <code>checked</code> <code>disabled</code> ；
</li>
<li>自动通过 <code>Html::encode()</code> 编码；
</li>
<li>值为数组时：
<ul class="org-ul">
<li>属性名属于 <code>yii\helpers\Html::$dataAttributes</code> 时，会生成多个数据属性：
<ul class="org-ul">
<li><code>['data' =&gt; ['id' =&gt; 1, 'name' =&gt; 'yii']]</code> 生成 <code>data-id="1" data-name="yii"</code> ；
</li>
<li><code>['data' =&gt; ['params' =&gt; ['id' =&gt; 1, 'name' =&gt; 'yii'], 'status' =&gt; 'ok']]</code> 生成 <code>data-params='{"id":1,"name":"yii"}' data-status="ok"</code> ；
</li>
</ul>
</li>
<li>属性为 <code>class</code> 时，属性值用空格分隔：
<ul class="org-ul">
<li><code>['class' =&gt; ['btn', 'btn-default']]</code> 生成 <code>class="btn btn-default"</code> ；
</li>
</ul>
</li>
<li>其他属性名，属性值输出成 JSON 格式：
<ul class="org-ul">
<li><code>['params' =&gt; ['id' =&gt; 1, 'name' =&gt; 'yii']</code> 生成 <code>params='{"id":1,"name":"yii"}'</code> ；
</li>
</ul>
</li>
</ul>
</li>
</ul>

<hr  />

<p>
内容
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><a href="#html_encode"><code>encode()</code></a></td>
<td class="left">特殊字符编码为 HTML entity</td>
</tr>

<tr>
<td class="left"><a href="#html_decode"><code>decode()</code></a></td>
<td class="left">HTML entity 解码成字符</td>
</tr>
</tbody>
</table>

<p>
标签
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><a href="#html_tag"><code>tag()</code></a></th>
<th scope="col" class="left">完整标签</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="#html_beginTag"><code>beginTag()</code></a></td>
<td class="left">起始标签</td>
</tr>

<tr>
<td class="left"><a href="#html_endTag"><code>endTag()</code></a></td>
<td class="left">结束标签</td>
</tr>
</tbody>
</table>

<p>
Form
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><a href="#html_beginForm"><code>beginForm()</code></a></th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left"><a href="#html_endForm"><code>endForm()</code></a></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="#html_input"><code>input()</code></a></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><a href="#html_button"><code>button()</code></a></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><a href="#html_submitButton"><code>submitButton()</code></a></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><a href="#html_resetButton"><code>resetButton()</code></a></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
CSS
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><a href="#html_addCssClass"><code>addCssClass()</code></a></th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left"><a href="#html_removeCssClass"><code>removeCssClass()</code></a></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="#html_addCssStyle"><code>addCssStyle()</code></a></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><a href="#html_removeCssStyle"><code>removeCssStyle()</code></a></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><a href="#html_cssStyleFromArray"><code>cssStyleFromArray()</code></a></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><a href="#html_cssStyleToArray"><code>cssStyleToArray()</code></a></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-7-5-1" class="outline-4">
<h4 id="sec-7-5-1"><span class="section-number-4">7.5.1</span> <code>addCssClass()</code> <code>removeCssClass()</code></h4>
<div class="outline-text-4" id="text-7-5-1">
<p>
<a id="html_addCssClass" name="html_addCssClass"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">void</span> <span class="org-function-name">addCssClass</span> (
   &amp;$<span class="org-variable-name">options</span>
,   $<span class="org-variable-name">class</span>
)
</pre>
</div>

<p>
<a id="html_removeCssClass" name="html_removeCssClass"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">void</span> <span class="org-function-name">removeCssClass</span> (
   &amp;$<span class="org-variable-name">options</span>
,   $<span class="org-variable-name">class</span>
)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$options</code></th>
<th scope="col" class="left">Array</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$class</code></td>
<td class="left">String / Array</td>
</tr>
</tbody>
</table>

<p>
示例
</p>
<div class="org-src-container">

<pre class="src src-php">$<span class="org-variable-name">options</span> = [<span class="org-string">'class'</span> =&gt; <span class="org-string">'btn btn-default'</span>];
<span class="org-keyword">if</span> ($<span class="org-variable-name">type</span> === <span class="org-string">'success'</span>) {
    <span class="org-type">Html</span>::<span class="org-function-name">removeCssClass</span>($<span class="org-variable-name">options</span>, <span class="org-string">'btn-default'</span>);
    <span class="org-type">Html</span>::<span class="org-function-name">addCssClass</span>($<span class="org-variable-name">options</span>, [<span class="org-string">'btn-success'</span>, <span class="org-string">'btn-submit'</span>]);
}
<span class="org-comment-delimiter">// </span><span class="org-comment">&lt;div class="btn btn-success btn-submit"&gt;content&lt;/div&gt;</span>
<span class="org-keyword">echo</span> <span class="org-type">Html</span>::<span class="org-function-name">tag</span>(<span class="org-string">'div'</span>, <span class="org-string">'content'</span>, $<span class="org-variable-name">options</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-2" class="outline-4">
<h4 id="sec-7-5-2"><span class="section-number-4">7.5.2</span> <code>addCssStyle()</code> <code>removeCssStyle()</code></h4>
<div class="outline-text-4" id="text-7-5-2">
<p>
<a id="html_addCssStyle" name="html_addCssStyle"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">void</span> <span class="org-function-name">addCssStyle</span> (
   &amp;$<span class="org-variable-name">options</span>
,   $<span class="org-variable-name">style</span>
,   $<span class="org-variable-name">overwrite</span> = <span class="org-constant">true</span>
)
</pre>
</div>

<hr  />

<p>
<a id="html_removeCssStyle" name="html_removeCssStyle"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">void</span> <span class="org-function-name">removeCssStyle</span> (
   &amp;$<span class="org-variable-name">options</span>
,   $<span class="org-variable-name">properties</span>
)
</pre>
</div>

<p>
示例
</p>
<div class="org-src-container">

<pre class="src src-php">$<span class="org-variable-name">options</span> = [<span class="org-string">'style'</span> =&gt; [<span class="org-string">'width'</span> =&gt; <span class="org-string">'100px'</span>, <span class="org-string">'height'</span> =&gt; <span class="org-string">'100px'</span>]];
<span class="org-comment-delimiter">// </span><span class="org-comment">new style="width: 100px; height: 200px; position: absolute;"</span>
<span class="org-type">Html</span>::<span class="org-function-name">addCssStyle</span>($<span class="org-variable-name">options</span>, <span class="org-string">'height: 200px; position: absolute;'</span>);
<span class="org-comment-delimiter">// </span><span class="org-comment">new style="position: absolute;"</span>
<span class="org-type">Html</span>::<span class="org-function-name">removeCssStyle</span>($<span class="org-variable-name">options</span>, [<span class="org-string">'width'</span>, <span class="org-string">'height'</span>]);
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-3" class="outline-4">
<h4 id="sec-7-5-3"><span class="section-number-4">7.5.3</span> <code>beginForm()</code> <code>endForm()</code></h4>
<div class="outline-text-4" id="text-7-5-3">
<p>
<a id="html_beginForm" name="html_beginForm"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">beginForm</span> (
    $<span class="org-variable-name">action</span> = <span class="org-string">''</span>,
    $<span class="org-variable-name">method</span> = <span class="org-string">'post'</span>, 
    $<span class="org-variable-name">options</span> = []
)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$action</code></th>
<th scope="col" class="left">Array / String</th>
<th scope="col" class="left">提交动作，由 <code>yii\helpers\Url::to()</code> 处理</th>
<th scope="col" class="left"><code>order/update</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$method</code></td>
<td class="left">String</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$options</code></td>
<td class="left">Array</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
示例
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?=</span> <span class="org-type">Html</span>::<span class="org-function-name">beginForm</span>([<span class="org-string">'order/update'</span>, <span class="org-string">'id'</span> =<span class="org-constant">&gt;</span> $<span class="org-variable-name">id</span>], <span class="org-string">'post'</span>, [<span class="org-string">'enctype'</span> =&gt; <span class="org-string">'multipart/form-data'</span>]) <span class="org-preprocessor">?&gt;</span>
</pre>
</div>

<hr  />

<p>
<a id="html_endForm" name="html_endForm"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">endForm</span> ( )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-4" class="outline-4">
<h4 id="sec-7-5-4"><span class="section-number-4">7.5.4</span> <code>beginTag()</code> <code>endTag()</code></h4>
<div class="outline-text-4" id="text-7-5-4">
<p>
<a id="html_beginTag" name="html_beginTag"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">beginTag</span> (
    $<span class="org-variable-name">name</span>,
    $<span class="org-variable-name">options</span> = []
)
</pre>
</div>

<hr  />

<p>
<a id="html_endTag" name="html_endTag"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">endTag</span> ( $<span class="org-variable-name">name</span> )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-5" class="outline-4">
<h4 id="sec-7-5-5"><span class="section-number-4">7.5.5</span> <code>button()</code> <code>submitButton()</code> <code>resetButton()</code></h4>
<div class="outline-text-4" id="text-7-5-5">
<p>
<a id="html_button" name="html_button"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">button</span> (
    $<span class="org-variable-name">content</span> = <span class="org-string">'Button'</span>,
    $<span class="org-variable-name">options</span> = []
)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$content</code></th>
<th scope="col" class="left">String</th>
<th scope="col" class="left">不经过转码，所以可以使用图片标签等</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$options</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr  />

<p>
<a id="html_submitButton" name="html_submitButton"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">submitButton</span> (
    $<span class="org-variable-name">content</span> = <span class="org-string">'Submit'</span>,
    $<span class="org-variable-name">options</span> = []
)
</pre>
</div>

<hr  />

<p>
<a id="html_resetButton" name="html_resetButton"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">resetButton</span> (
    $<span class="org-variable-name">content</span> = <span class="org-string">'Reset'</span>,
    $<span class="org-variable-name">options</span> = []
)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-6" class="outline-4">
<h4 id="sec-7-5-6"><span class="section-number-4">7.5.6</span> <code>cssStyleFromArray()</code> <code>cssStyleToArray()</code></h4>
<div class="outline-text-4" id="text-7-5-6">
<p>
<a id="html_cssStyleFromArray" name="html_cssStyleFromArray"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">cssStyleFromArray</span> ( <span class="org-type">array</span> $<span class="org-variable-name">style</span> )
</pre>
</div>

<p>
<a id="html_cssStyleToArray" name="html_cssStyleToArray"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">array</span> <span class="org-function-name">cssStyleToArray</span> ( $<span class="org-variable-name">style</span> )
</pre>
</div>

<p>
示例
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-comment-delimiter">// </span><span class="org-comment">'width: 100px; height: 200px;'</span>
<span class="org-type">Html</span>::<span class="org-function-name">cssStyleFromArray</span>([<span class="org-string">'width'</span> =&gt; <span class="org-string">'100px'</span>, <span class="org-string">'height'</span> =&gt; <span class="org-string">'200px'</span>]);
<span class="org-comment-delimiter">// </span><span class="org-comment">['width' =&gt; '100px', 'height' =&gt; '200px']</span>
<span class="org-type">Html</span>::<span class="org-function-name">cssStyleToArray</span>(<span class="org-string">'width: 100px; height: 200px;'</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-7" class="outline-4">
<h4 id="sec-7-5-7"><span class="section-number-4">7.5.7</span> <code>encode()</code> <code>decode()</code></h4>
<div class="outline-text-4" id="text-7-5-7">
<p>
<a id="html_encode" name="html_encode"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">encode</span> (
    $<span class="org-variable-name">content</span>,
    $<span class="org-variable-name">doubleEncode</span> = <span class="org-constant">true</span>
)
</pre>
</div>

<ul class="org-ul">
<li>编码字符集取决于 <code>yii\base\Application::$charset</code> ；
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$content</code></th>
<th scope="col" class="left">String</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$doubleEncode</code></td>
<td class="left">Boolean</td>
<td class="left">是否对已有 HTML entity 进行二次编码</td>
</tr>
</tbody>
</table>

<hr  />

<p>
<a id="html_decode" name="html_decode"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">decode</span> ( $<span class="org-variable-name">content</span> )
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-8" class="outline-4">
<h4 id="sec-7-5-8"><span class="section-number-4">7.5.8</span> <code>input()</code></h4>
<div class="outline-text-4" id="text-7-5-8">
<p>
<a id="html_input" name="html_input"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">input</span> (
    $<span class="org-variable-name">type</span>
,   $<span class="org-variable-name">name</span> = <span class="org-constant">null</span>
,   $<span class="org-variable-name">value</span> = <span class="org-constant">null</span>
,   $<span class="org-variable-name">options</span> = []
)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$type</code></th>
<th scope="col" class="left">String</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$name</code></td>
<td class="left">String</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$value</code></td>
<td class="left">String</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$options</code></td>
<td class="left">Array</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-7-5-9" class="outline-4">
<h4 id="sec-7-5-9"><span class="section-number-4">7.5.9</span> <code>tag()</code></h4>
<div class="outline-text-4" id="text-7-5-9">
<p>
<a id="html_tag" name="html_tag"></a>
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">string</span> <span class="org-function-name">tag</span> (
    $<span class="org-variable-name">name</span>,
    $<span class="org-variable-name">content</span> = <span class="org-string">''</span>,
    $<span class="org-variable-name">options</span> = []
)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$name</code></th>
<th scope="col" class="left">String</th>
<th scope="col" class="left">标签名称</th>
<th scope="col" class="left"><code>'p'</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$content</code></td>
<td class="left">String</td>
<td class="left">标签内容</td>
<td class="left"><code>Html::encode($userName)</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">不进行 HTML 编码，需要用 <code>encode()</code> 处理</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$options</code></td>
<td class="left">Array</td>
<td class="left">标签属性</td>
<td class="left"><code>['class' =&gt; 'list-item']</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">返回值</td>
<td class="left">String</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Widget</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>渲染数据的辅助类，进行排序、分页、过滤等操作；
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">DetailView</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">ListView</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">GridView</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Database</h2>
<div class="outline-text-2" id="text-9">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><a href="#config_db"><code>config/db.php</code></a></td>
<td class="left">配置文件</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> API</h2>
<div class="outline-text-2" id="text-10">
<p>
<code>\yii\</code>
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><code>Yii</code></td>
<td class="left">Bootstrap 类</td>
</tr>
</tbody>
</table>

<p>
<code>\yii\web\</code>
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">继承</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>Application</code></td>
<td class="left"><code>\yii\base\Application</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>Request</code></td>
<td class="left"><code>\yii\base\Request</code></td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> <code>\yii\web\Request</code></h3>
<div class="outline-text-3" id="text-10-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>get()</code></th>
<th scope="col" class="left">获取 GET 参数</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-10-1-1" class="outline-4">
<h4 id="sec-10-1-1"><span class="section-number-4">10.1.1</span> <code>get()</code></h4>
<div class="outline-text-4" id="text-10-1-1">
<div class="org-src-container">

<pre class="src src-php"><span class="org-type">mixed</span> <span class="org-function-name">get</span> (
    $<span class="org-variable-name">name</span> = <span class="org-constant">null</span>,
    $<span class="org-variable-name">defaultValue</span> = <span class="org-constant">null</span>
)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$name</code></th>
<th scope="col" class="left">String</th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">Null</th>
<th scope="col" class="left">返回全部 GET 参数（数组）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Tool</h2>
<div class="outline-text-2" id="text-11">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Composer</th>
<th scope="col" class="left">依赖管理</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Codeception</td>
<td class="left">测试框架</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Console</td>
<td class="left">命令行</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">MongoDB</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> Composer</h3>
<div class="outline-text-3" id="text-11-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><code>composer.json</code></td>
<td class="left">依赖信息、Composer 数据</td>
</tr>
</tbody>
</table>

<p>
<code>composer.json</code>
</p>
<div class="org-src-container">

<pre class="src src-code">{
    "require": {
        "&lt;package&gt;": "&lt;version&gt;",
        ...
    }
}
</pre>
</div>

<p>
命令
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">## </span><span class="org-comment">&#23433;&#35013;</span>
curl -sS https://getcomposer.org/installer | php

php composer.phar install
php composer.phar update

<span class="org-comment-delimiter">## </span><span class="org-comment">&#23558;&#20381;&#36182;&#21152;&#20837; .json &#25991;&#20214;&#24182;&#25191;&#34892; update</span>
php composer.phar require <span class="org-string">"&lt;package&gt;:&lt;version&gt;"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2"><span class="section-number-3">11.2</span> Codeception</h3>
<div class="outline-text-3" id="text-11-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>vendor/bin/codecept</code></th>
<th scope="col" class="left">可执行文件</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>tests/codeception/*.suite.yml</code></td>
<td class="left">配置文件</td>
</tr>
</tbody>
</table>

<p>
命令
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">## </span><span class="org-comment">&#22312;&#39033;&#30446;&#26681;&#30446;&#24405;&#23433;&#35013;</span>
php composer.phar require <span class="org-string">"codeception/codeception:*"</span>
alias <span class="org-variable-name">cept</span>=<span class="org-string">"./vendor/bin/codecept"</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">&#29983;&#25104; tests &#30446;&#24405;&#21644;&#37197;&#32622;&#26641;</span>
cept bootstrap

<span class="org-comment-delimiter">## </span><span class="org-comment">&#29983;&#25104;&#27979;&#35797;&#25991;&#20214; tests/acceptance/SmokeTestCept.php</span>
cept generate:cept acceptance SmokeTest

<span class="org-comment-delimiter">## </span><span class="org-comment">&#36816;&#34892;&#27979;&#35797;</span>
cept run

<span class="org-comment-delimiter">## </span><span class="org-comment">&#20462;&#25913;&#37197;&#32622;&#25991;&#20214;&#21518; rebuild</span>
cept build
</pre>
</div>

<hr  />

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Acceptance test</th>
<th scope="col" class="left">接受测试，模拟用户通过浏览器访问，速度慢</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Functional test</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">Unit test</td>
<td class="left">单元测试，速度快</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3"><span class="section-number-3">11.3</span> Console</h3>
<div class="outline-text-3" id="text-11-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>yii</code></th>
<th scope="col" class="left">默认 Console，位于项目根目录</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>config/console.php</code></td>
<td class="left">配置文件</td>
</tr>
</tbody>
</table>

<p>
命令
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><code>migrate</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-11-3-1" class="outline-4">
<h4 id="sec-11-3-1"><span class="section-number-4">11.3.1</span> <code>migrate</code></h4>
<div class="outline-text-4" id="text-11-3-1">
<div class="org-src-container">

<pre class="src src-sh">./yii migrate/create &lt;table&gt; <span class="org-comment-delimiter"># </span><span class="org-comment">&#22312; migrations/ &#30446;&#24405;&#19979;&#21019;&#24314;&#36801;&#31227; Migration &#31867;&#33050;&#26412;</span>
./yii migrate/up             <span class="org-comment-delimiter"># </span><span class="org-comment">&#36816;&#34892; migrations/ &#19979;&#25152;&#26377;&#33050;&#26412;&#30340; up() &#26041;&#27861;</span>
./yii migrate/down
</pre>
</div>

<p>
<code>Migration</code> 类
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> ... <span class="org-keyword">extends</span> <span class="org-type">Migration</span>
{
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">up</span>()
    {
        $<span class="org-constant">this</span>-&gt;<span class="org-function-name">createTable</span>(
            <span class="org-string">'&lt;table&gt;'</span>,
            [
                <span class="org-string">'&lt;column&gt;'</span> =&gt; <span class="org-string">'&lt;type_and_options&gt;'</span>,
                ...
            ],
            <span class="org-string">'ENGINE=InnoDB'</span>
        );
        $<span class="org-constant">this</span>-&gt;<span class="org-function-name">addForeignKey</span>(
            <span class="org-string">'&lt;key_name&gt;'</span>,
            <span class="org-string">'&lt;table&gt;'</span>,
            <span class="org-string">'&lt;column&gt;'</span>,
            <span class="org-string">'&lt;foreign_table&gt;'</span>,
            <span class="org-string">'&lt;foreign_column&gt;'</span>
        );
    }

    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">down</span>()
    {
        $<span class="org-constant">this</span>-&gt;<span class="org-function-name">dropForeignKey</span>(<span class="org-string">'&lt;key_name&gt;'</span>, <span class="org-string">'&lt;table&gt;'</span>);
        $<span class="org-constant">this</span>-&gt;<span class="org-function-name">dropTable</span>(<span class="org-string">'&lt;table&gt;'</span>);
    }
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-11-4" class="outline-3">
<h3 id="sec-11-4"><span class="section-number-3">11.4</span> MongoDB</h3>
<div class="outline-text-3" id="text-11-4">
</div><div id="outline-container-sec-11-4-1" class="outline-4">
<h4 id="sec-11-4-1"><span class="section-number-4">11.4.1</span> 安装</h4>
<div class="outline-text-4" id="text-11-4-1">
<div class="org-src-container">

<pre class="src src-sh">sudo pecl install mongo
<span class="org-comment-delimiter">## </span><span class="org-comment">php.ini &#21152;&#20837;&#19968;&#34892;</span>
<span class="org-variable-name">extension</span>=mongo.so

php composer.phar require --prefer-dist yiisoft/yii2-mongodb
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-4-2" class="outline-4">
<h4 id="sec-11-4-2"><span class="section-number-4">11.4.2</span> 配置</h4>
<div class="outline-text-4" id="text-11-4-2">
<p>
<code>config/web.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php">$<span class="org-variable-name">config</span> = [
    <span class="org-string">'components'</span> =&gt; [
        <span class="org-string">'mongodb'</span> =&gt; [
            <span class="org-string">'class'</span> =&gt; <span class="org-string">'\yii\mongodb\Connection'</span>,
            <span class="org-string">'dsn'</span>   =&gt; <span class="org-string">'mongodb://&lt;user&gt;:&lt;password&gt;@localhost:27017/&lt;db&gt;'</span>,
        ],
    ],
];
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-4-3" class="outline-4">
<h4 id="sec-11-4-3"><span class="section-number-4">11.4.3</span> 示例</h4>
<div class="outline-text-4" id="text-11-4-3">
<p>
插入
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">use</span> <span class="org-type">Yii</span>;

$<span class="org-variable-name">collection</span> = <span class="org-type">Yii</span>::$<span class="org-variable-name">app</span>-&gt;<span class="org-variable-name">mongodb</span>-&gt;<span class="org-function-name">getCollection</span>(<span class="org-string">'&lt;coll&gt;'</span>);
$<span class="org-variable-name">collection</span>-&gt;<span class="org-function-name">insert</span>([<span class="org-string">'&lt;key&gt;'</span> =&gt; <span class="org-string">'&lt;value&gt;'</span>, ...]);
</pre>
</div>

<p>
查询
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">use</span> <span class="org-type">yii\mongodb\Query</span>;

$<span class="org-variable-name">query</span> = <span class="org-keyword">new</span> <span class="org-type">Query</span>;
$<span class="org-variable-name">query</span>-&gt;<span class="org-function-name">select</span>([<span class="org-string">'&lt;key&gt;'</span>, ...])
      -&gt;<span class="org-function-name">from</span>(<span class="org-string">'&lt;coll&gt;'</span>)
      -&gt;<span class="org-function-name">limit</span>(<span class="org-constant">&lt;int&gt;</span>);
$<span class="org-variable-name">rows</span> = $<span class="org-variable-name">query</span>-&gt;<span class="org-function-name">all</span>();
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-4-4" class="outline-4">
<h4 id="sec-11-4-4"><span class="section-number-4">11.4.4</span> ActiveRecord</h4>
<div class="outline-text-4" id="text-11-4-4">
<p>
ActiveRecord 类
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">use</span> <span class="org-type">yii\mongodb\ActiveRecord</span>;

<span class="org-keyword">class</span> <span class="org-type">ModelRecord</span> <span class="org-keyword">extends</span> <span class="org-type">ActiveRecord</span>
{
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">collectionName</span>()
    {
        <span class="org-keyword">return</span> <span class="org-string">'&lt;coll&gt;'</span>;
    }

    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">attributes</span>()
    {
        <span class="org-keyword">return</span> [<span class="org-string">'_id'</span>, <span class="org-string">'&lt;key&gt;'</span>, ...];
    }
}
</pre>
</div>

<p>
查询示例 1
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">use</span> <span class="org-type">yii\data\ActiveDataProvider</span>;
<span class="org-keyword">use</span> <span class="org-type">yii\mongodb\Query</span>;

$<span class="org-variable-name">query</span> = <span class="org-keyword">new</span> <span class="org-type">Query</span>;
$<span class="org-variable-name">query</span>-&gt;<span class="org-function-name">from</span>(<span class="org-string">'&lt;coll&gt;'</span>)-&gt;<span class="org-function-name">where</span>([<span class="org-string">'&lt;key&gt;'</span> =&gt; <span class="org-string">'&lt;value&gt;'</span>]);
$<span class="org-variable-name">provider</span> = <span class="org-keyword">new</span> <span class="org-type">ActiveDataProvider</span>([
    <span class="org-string">'query'</span> =&gt; $<span class="org-variable-name">query</span>,
    <span class="org-string">'pagination'</span> =&gt; [
        <span class="org-string">'pageSize'</span> =&gt; <span class="org-constant">&lt;size&gt;</span>,
    ]
]);
$<span class="org-variable-name">models</span> = $<span class="org-variable-name">provider</span>-&gt;<span class="org-function-name">getModels</span>();
</pre>
</div>

<p>
查询示例 2
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">use</span> <span class="org-type">yii\data\ActiveDataProvider</span>;
<span class="org-keyword">use</span> <span class="org-type">app\models\Model</span>;

$<span class="org-variable-name">provider</span> = <span class="org-keyword">new</span> <span class="org-type">ActiveDataProvider</span>([
    <span class="org-string">'query'</span> =&gt; <span class="org-type">Model</span>::<span class="org-function-name">find</span>(),
    <span class="org-string">'pagination'</span> =&gt; [
        <span class="org-string">'pageSize'</span> =&gt; <span class="org-constant">&lt;size&gt;</span>,
    ]
]);
$<span class="org-variable-name">models</span> = $<span class="org-variable-name">provider</span>-&gt;<span class="org-function-name">getModels</span>();
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-11-5" class="outline-3">
<h3 id="sec-11-5"><span class="section-number-3">11.5</span> 组件</h3>
<div class="outline-text-3" id="text-11-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Debug console</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Gii</td>
<td class="left">代码生成工具</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">SwiftMailer</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Install</h2>
<div class="outline-text-2" id="text-12">
<p>
Basic 应用
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">## </span><span class="org-comment">&#35774;&#23450;&#23433;&#35013;&#30446;&#24405;</span>
<span class="org-builtin">cd</span> /usr/local/yii

<span class="org-comment-delimiter">## </span><span class="org-comment">&#19979;&#36733; Composer PHP ARchive (PHAR)</span>
curl -sS https://getcomposer.org/installer | php
sudo php composer.phar global require <span class="org-string">"fxp/composer-asset-plugin:~1.0.0"</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">&#21019;&#24314;&#23376;&#30446;&#24405;&#65292;&#29983;&#25104; basic &#39033;&#30446;</span>
php composer.phar create-project --prefer-dist --stability=dev yiisoft/yii2-app-basic basic

<span class="org-comment-delimiter">## </span><span class="org-comment">&#21551;&#21160; PHP &#20869;&#32622; web server</span>
php -S localhost:8000 -t basic/web
</pre>
</div>

<hr  />

<p>
Advanced 应用
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">## </span><span class="org-comment">&#35774;&#23450;&#23433;&#35013;&#30446;&#24405;</span>
<span class="org-builtin">cd</span> /usr/local/yii

<span class="org-comment-delimiter">## </span><span class="org-comment">&#19979;&#36733; Composer PHP ARchive (PHAR)</span>
curl -sS https://getcomposer.org/installer | php
sudo php composer.phar global require <span class="org-string">"fxp/composer-asset-plugin:~1.0.0"</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">&#21019;&#24314;&#23376;&#30446;&#24405;&#65292;&#29983;&#25104; advanced &#39033;&#30446;</span>
php composer.phar create-project --prefer-dist --stability=dev yiisoft/yii2-app-advanced advanced

<span class="org-comment-delimiter">## </span><span class="org-comment">&#29983;&#25104;&#26412;&#22320;&#37197;&#32622;</span>
<span class="org-builtin">cd</span> advanced
php init

<span class="org-comment-delimiter">## </span><span class="org-comment">&#36801;&#31227;&#25968;&#25454;&#24211;&#65292;&#38656;&#35201;&#20808;&#24314;&#31435;&#19968;&#20010;&#26412;&#22320; MySQL &#25968;&#25454;&#24211;</span>
<span class="org-comment-delimiter">## </span><span class="org-comment">-h localhost -P 3306 -u root&#65288;&#26080;&#23494;&#30721;&#65289;</span>
mysql -u root -e <span class="org-string">"create database yii2advanced"</span>
php yii migrate

<span class="org-comment-delimiter">## </span><span class="org-comment">&#21551;&#21160; PHP &#20869;&#32622; web server</span>
php -S localhost:8080 -t frontend/web
php -S localhost:8081 -t backend/web
</pre>
</div>

<hr  />

<p>
自定义项目
</p>
<ul class="org-ul">
<li>不依赖于 Yii 的目录结构，只使用类；
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh">php composer.phar require <span class="org-string">"yiisoft/yii2:*"</span>
php composer.phar install
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2016-11-30 Wed 09:28</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.5h)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
