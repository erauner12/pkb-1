---
title: "PHP"
---
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>PHP</title>
<!-- 2017-09-15 Fri 21:18 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/font.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/htmlize.css"/>
<script type="text/javascript" src="../../styles/readtheorg/js/jquery.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">PHP</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 类型</a>
<ul>
<li><a href="#sec-1-1">1.1. 弱类型</a></li>
<li><a href="#sec-1-2">1.2. 字符串</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. 引号</a></li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. 类型判断</a></li>
<li><a href="#sec-1-4">1.4. 类型转换</a></li>
<li><a href="#sec-1-5">1.5. Callable</a></li>
</ul>
</li>
<li><a href="#sec-2">2. 变量</a>
<ul>
<li><a href="#sec-2-1">2.1. 变量名</a></li>
<li><a href="#sec-2-2">2.2. 传递</a></li>
<li><a href="#sec-2-3">2.3. 作用域</a></li>
<li><a href="#sec-2-4">2.4. 本地变量</a></li>
<li><a href="#sec-2-5">2.5. 静态变量</a></li>
<li><a href="#sec-2-6">2.6. 全局变量</a></li>
<li><a href="#sec-2-7">2.7. 超级全局变量</a>
<ul>
<li><a href="#sec-2-7-1">2.7.1. <code>$_SERVER</code></a></li>
</ul>
</li>
<li><a href="#sec-2-8">2.8. 预定义变量</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 常量</a>
<ul>
<li><a href="#sec-3-1">3.1. 预定义常量</a></li>
<li><a href="#sec-3-2">3.2. Magic 常量</a></li>
</ul>
</li>
<li><a href="#sec-4">4. 运算符</a>
<ul>
<li><a href="#sec-4-1">4.1. 比较</a></li>
<li><a href="#sec-4-2">4.2. <code>instanceof</code></a></li>
</ul>
</li>
<li><a href="#sec-5">5. 语法</a>
<ul>
<li><a href="#sec-5-1">5.1. heredoc</a></li>
</ul>
</li>
<li><a href="#sec-6">6. 函数</a>
<ul>
<li><a href="#sec-6-1">6.1. 类型约束</a>
<ul>
<li><a href="#sec-6-1-1">6.1.1. 类型转换</a></li>
<li><a href="#sec-6-1-2">6.1.2. 严格类型</a></li>
</ul>
</li>
<li><a href="#sec-6-2">6.2. 类型声明</a></li>
<li><a href="#sec-6-3">6.3. 闭包</a>
<ul>
<li><a href="#sec-6-3-1">6.3.1. Attach state</a></li>
</ul>
</li>
<li><a href="#sec-6-4">6.4. 函数式编程</a></li>
<li><a href="#sec-6-5">6.5. 回调函数</a></li>
</ul>
</li>
<li><a href="#sec-7">7. OO</a>
<ul>
<li><a href="#sec-7-1">7.1. 对象</a>
<ul>
<li><a href="#sec-7-1-1">7.1.1. 对象 ID</a></li>
<li><a href="#sec-7-1-2">7.1.2. 打印对象</a></li>
</ul>
</li>
<li><a href="#sec-7-2">7.2. 可见性</a></li>
<li><a href="#sec-7-3">7.3. 属性</a></li>
<li><a href="#sec-7-4">7.4. 常量</a></li>
<li><a href="#sec-7-5">7.5. 静态</a>
<ul>
<li><a href="#sec-7-5-1">7.5.1. 示例</a></li>
<li><a href="#sec-7-5-2">7.5.2. 静态方法</a></li>
</ul>
</li>
<li><a href="#sec-7-6">7.6. 抽象</a>
<ul>
<li><a href="#sec-7-6-1">7.6.1. 抽象方法</a></li>
<li><a href="#sec-7-6-2">7.6.2. 抽象类</a></li>
</ul>
</li>
<li><a href="#sec-7-7">7.7. 接口</a></li>
<li><a href="#sec-7-8">7.8. <code>final</code> 类</a></li>
<li><a href="#sec-7-9">7.9. Trait</a>
<ul>
<li><a href="#sec-7-9-1">7.9.1. 语法</a></li>
<li><a href="#sec-7-9-2">7.9.2. <code>as</code></a></li>
<li><a href="#sec-7-9-3">7.9.3. <code>insteadof</code></a></li>
<li><a href="#sec-7-9-4">7.9.4. 静态方法</a></li>
<li><a href="#sec-7-9-5">7.9.5. 抽象方法</a></li>
<li><a href="#sec-7-9-6">7.9.6. 示例</a></li>
</ul>
</li>
<li><a href="#sec-7-10">7.10. <code>::</code> 运算符</a>
<ul>
<li><a href="#sec-7-10-1">7.10.1. <code>parent</code></a></li>
<li><a href="#sec-7-10-2">7.10.2. <code>self</code></a></li>
<li><a href="#sec-7-10-3">7.10.3. <code>static</code></a></li>
<li><a href="#sec-7-10-4">7.10.4. <code>class</code></a></li>
</ul>
</li>
<li><a href="#sec-7-11">7.11. <code>clone</code></a></li>
</ul>
</li>
<li><a href="#sec-8">8. 错误</a>
<ul>
<li><a href="#sec-8-1">8.1. 错误等级</a></li>
<li><a href="#sec-8-2">8.2. 配置</a></li>
<li><a href="#sec-8-3">8.3. <code>@</code></a></li>
<li><a href="#sec-8-4">8.4. <code>Error</code> 类</a></li>
</ul>
</li>
<li><a href="#sec-9">9. 异常</a>
<ul>
<li><a href="#sec-9-1">9.1. 自定义异常</a></li>
</ul>
</li>
<li><a href="#sec-10">10. 配置</a>
<ul>
<li><a href="#sec-10-1">10.1. 可设定范围</a></li>
<li><a href="#sec-10-2">10.2. 错误处理</a></li>
<li><a href="#sec-10-3">10.3. 文件上传</a></li>
<li><a href="#sec-10-4">10.4. 路径和目录</a></li>
<li><a href="#sec-10-5">10.5. 安全模式</a></li>
<li><a href="#sec-10-6">10.6. 扩展控制</a></li>
</ul>
</li>
<li><a href="#sec-11">11. 环境</a>
<ul>
<li><a href="#sec-11-1">11.1. 环境变量</a></li>
</ul>
</li>
<li><a href="#sec-12">12. 高级</a>
<ul>
<li><a href="#sec-12-1">12.1. 命名空间</a>
<ul>
<li><a href="#sec-12-1-1">12.1.1. 声明</a></li>
<li><a href="#sec-12-1-2">12.1.2. 引用</a></li>
<li><a href="#sec-12-1-3">12.1.3. 全局命名空间</a></li>
<li><a href="#sec-12-1-4">12.1.4. 规范</a></li>
</ul>
</li>
<li><a href="#sec-12-2">12.2. 生成器</a>
<ul>
<li><a href="#sec-12-2-1">12.2.1. Compare with standard iterator</a></li>
<li><a href="#sec-12-2-2">12.2.2. CSV generator example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-13">13. 框架</a></li>
<li><a href="#sec-14">14. 命令</a>
<ul>
<li><a href="#sec-14-1">14.1. <code>php</code></a>
<ul>
<li><a href="#sec-14-1-1">14.1.1. 参数</a></li>
<li><a href="#sec-14-1-2">14.1.2. 执行代码</a></li>
<li><a href="#sec-14-1-3">14.1.3. 内置服务器</a></li>
<li><a href="#sec-14-1-4">14.1.4. Router script</a></li>
<li><a href="#sec-14-1-5">14.1.5. CGI</a></li>
<li><a href="#sec-14-1-6">14.1.6. 进程</a></li>
</ul>
</li>
<li><a href="#sec-14-2">14.2. <code>phpenmod</code> <code>phpdismod</code></a></li>
</ul>
</li>
<li><a href="#sec-15">15. 链接</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 类型</h2>
<div class="outline-text-2" id="text-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">基本类型</th>
<th scope="col" class="left"><code>int</code> <code>float</code> <code>string</code> <code>bool</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">复合类型</td>
<td class="left"><code>array</code> <code>object</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>null</code></td>
<td class="left">没有赋值的变量</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">被 <code>unset()</code> 的变量</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">被赋值为 <code>null</code> 的变量</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>resource</code></td>
<td class="left">外部资源，如数据库连接</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 弱类型</h3>
<div class="outline-text-3" id="text-1-1">
<p>
PHP 是弱类型（loosely typed）语言，即：变量使用前不需要声明类型，变量使用时根据上下文自动转换（cast）类型。
</p>

<div class="org-src-container">
<label class="org-src-name">字符串中的数字在数学表达式中被转换为整数、浮点数。</label>
<pre class="src src-php">$<span class="org-variable-name">a</span> = <span class="org-string">'5'</span>;
$<span class="org-variable-name">b</span> = <span class="org-default">6</span>;
$<span class="org-variable-name">c</span> = $<span class="org-variable-name">a</span> + $<span class="org-variable-name">b</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">11</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> 字符串</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">
<label class="org-src-name">字符串作为字符数组进行读写</label>
<pre class="src src-php">$<span class="org-variable-name">s</span> = <span class="org-string">'test'</span>;
$<span class="org-variable-name">c</span> = $<span class="org-variable-name">str</span>[<span class="org-default">0</span>];
$<span class="org-variable-name">s</span>[<span class="org-default">0</span>] = <span class="org-string">'n'</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">字符串自增</label>
<pre class="src src-php">$<span class="org-variable-name">a</span> = <span class="org-string">'A'</span>;
<span class="org-keyword">echo</span> ++$<span class="org-variable-name">a</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">B</span>
$<span class="org-variable-name">b</span> = <span class="org-string">'A00'</span>;
<span class="org-keyword">echo</span> ++$<span class="org-variable-name">b</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">A01</span>
</pre>
</div>
</div>

<div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> 引号</h4>
<div class="outline-text-4" id="text-1-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">单引号</th>
<th scope="col" class="left">严格保留字符串的内容</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">双引号</td>
<td class="left">PHP 会试图将变量名替换为变量值</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>双引号可以方便地将字符串和变量值连接，避免重复使用连接符和引号。
</li>
<li>如果已知字符串中没有变量，最好使用单引号，节约搜索可替换变量的时间。
</li>
</ul>

<div class="org-src-container">
<label class="org-src-name">使用大括号将变量名与前后连接的字符隔离开</label>
<pre class="src src-php">$<span class="org-variable-name">foo</span> = <span class="org-string">'bar'</span>;
<span class="org-keyword">echo</span> <span class="org-string">"get{$foo}function()"</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> 类型判断</h3>
<div class="outline-text-3" id="text-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>is_bool()</code></th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left"><code>is_float()</code></th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left"><code>is_integer()</code></th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="left"><code>is_string()</code></th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>is_array()</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>is_object()</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>is_resource()</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>is_null()</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>is_scalar()</code></td>
<td class="left"><code>true</code></td>
<td class="left"><code>int</code> <code>float</code> <code>string</code> <code>boolean</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>false</code></td>
<td class="left"><code>array</code> <code>object</code> <code>resource</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>is_numeric()</code></td>
<td class="left"><code>true</code></td>
<td class="left"><code>int</code> <code>float</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">二、八、十六进制数</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">可以解释为以上数的字符串</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> 类型转换</h3>
<div class="outline-text-3" id="text-1-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">规则</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>(&lt;type&gt;)</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>intval()</code></td>
<td class="left">空数组转换为 0，非空数组转换为 1。</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">不以数字开头的字符串转换为 0。</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>boolval()</code></td>
<td class="left"><code>0</code> <code>0.0</code> <code>""</code> <code>"0"</code> <code>[]</code> 转换为 <code>false</code> 。</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>strval()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Callable</h3>
<div class="outline-text-3" id="text-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>string</code></th>
<th scope="col" class="left">函数名，原生或自定义</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>array</code></td>
<td class="left">类名、方法名， <code>array(&lt;class&gt;, &lt;method&gt;)</code></td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<label class="org-src-name">普通函数</label>
<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">foo</span>() {}
<span class="org-function-name">call_user_func</span>(<span class="org-string">'foo'</span>);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">类函数</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">bar</span>() {}
}

$<span class="org-variable-name">foo</span> = <span class="org-keyword">new</span> <span class="org-type">Foo</span>();
<span class="org-function-name">call_user_func</span>(<span class="org-string">'Foo::bar'</span>);
<span class="org-function-name">call_user_func</span>([<span class="org-string">'Foo'</span>, <span class="org-string">'bar'</span>]);
<span class="org-function-name">call_user_func</span>([<span class="org-keyword">new</span> <span class="org-type">Foo</span>(), <span class="org-string">'bar'</span>]);
<span class="org-function-name">call_user_func</span>([$<span class="org-variable-name">foo</span>, <span class="org-string">'bar'</span>]);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">子类函数</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-constant">A</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">who</span>() {}
}
<span class="org-keyword">class</span> <span class="org-constant">B</span> <span class="org-keyword">extends</span> <span class="org-constant">A</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">who</span>() {}
}
<span class="org-function-name">call_user_func</span>([<span class="org-string">'B'</span>, <span class="org-string">'parent::who'</span>]);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 变量</h2>
<div class="outline-text-2" id="text-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">声明</th>
<th scope="col" class="left">可见性</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$var</code></td>
<td class="left">本地变量</td>
<td class="left">&#xa0;</td>
<td class="left">函数内声明，只在函数内部有效</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">静态变量</td>
<td class="left"><code>static</code></td>
<td class="left">函数外声明，只在（所有）函数外部有效</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$VAR</code></td>
<td class="left">全局变量</td>
<td class="left"><code>global</code></td>
<td class="left">代码任意位置有效</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_VAR</code></td>
<td class="left">超级全局变量</td>
<td class="left">预定义</td>
<td class="left">代码任意位置有效</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>VAR</code></td>
<td class="left">常量</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>__VAR__</code></td>
<td class="left">预定义常量</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 变量名</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>字母、下划线开头。
</li>
<li>包含字母、数字、下划线。
</li>
<li>大小写敏感。
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 传递</h3>
<div class="outline-text-3" id="text-2-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left"><b>传值</b></th>
<th scope="col" class="left"><b>传引用</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">函数参数</td>
<td class="left">默认</td>
<td class="left">签名中的参数前加 <code>&amp;</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">变量赋值</td>
<td class="left">默认</td>
<td class="left">等式右边变量前加 <code>&amp;</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">数组赋值</td>
<td class="left">始终传值（复制）</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">对象赋值</td>
<td class="left">PHP 5 之前</td>
<td class="left">PHP 5 之后</td>
</tr>
</tbody>
</table>

<p>
需要函数内的变化影响到输入的变量时，可以使用<a href="#global_variable">全局变量</a>。
</p>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 作用域</h3>
<div class="outline-text-3" id="text-2-3">
<p>
在函数内定义的变量为本地变量，在所有函数外定义的变量为全局变量。
</p>

<p>
代码不能读取比当前作用域更「本地」的变量，比如在函数内可以读取全局变量，但函数外不能读取函数内的本地变量。
</p>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> 本地变量</h3>
<div class="outline-text-3" id="text-2-4">
<p>
变量在声明时默认为本地变量。函数内的本地变量，包括函数内声明的变量和输入参数。
</p>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> 静态变量</h3>
<div class="outline-text-3" id="text-2-5">
<p>
普通的本地变量在函数结束时会清空，要在函数结束后保留变量的值，需要声明为静态变量。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">incr</span>() {
    <span class="org-keyword">static</span> $<span class="org-variable-name">count</span> = <span class="org-default">0</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#38750;&#39318;&#27425;&#35843;&#29992;&#20989;&#25968;&#26102;&#65292;&#22768;&#26126;&#20250;&#34987;&#24573;&#30053;</span>
    $<span class="org-variable-name">count</span>++;
    <span class="org-keyword">echo</span> $<span class="org-variable-name">count</span>;
}
<span class="org-function-name">incr</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">1</span>
<span class="org-function-name">incr</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">2</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">静态变量不能用表达式为静态变量赋值，只能用确定的值。</label>
<pre class="src src-php"><span class="org-keyword">static</span> $<span class="org-variable-name">int</span> = <span class="org-default">1</span> + <span class="org-default">2</span>;     <span class="org-comment-delimiter">// </span><span class="org-comment">&#38169;&#35823;</span>
<span class="org-keyword">static</span> $<span class="org-variable-name">int</span> = <span class="org-function-name">sqrt</span>(<span class="org-default">144</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">&#38169;&#35823;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> 全局变量</h3>
<div class="outline-text-3" id="text-2-6">
<p>
<a id="global_variable" name="global_variable"></a>
</p>

<p>
全局变量是 <code>$GLOBALS</code> 数组中的元素，可以直接通过 <code>$GLOBALS['&lt;NAME&gt;']</code> 进行声明、读写。
</p>

<p>
应避免使用全局变量，代码和数据隔离的程序，更容易维护和 debug。且全局变量在函数内外同名，不是良好的习惯。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">bar</span>() {
    <span class="org-keyword">global</span> $<span class="org-variable-name">foo</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#24341;&#29992;&#20840;&#23616;&#21464;&#37327;</span>
    <span class="org-keyword">echo</span> $<span class="org-constant">GLOBALS</span>[<span class="org-string">'foo'</span>] . <span class="org-string">"\n"</span>;
}
$<span class="org-variable-name">foo</span> = <span class="org-string">'global variable'</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#20840;&#23616;&#21464;&#37327;</span>
<span class="org-function-name">bar</span>();
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> 超级全局变量</h3>
<div class="outline-text-3" id="text-2-7">
<p>
PHP 预定义的全局变量。
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$GLOBALS</code></th>
<th scope="col" class="left">保存当前所有全局变量，键为全局变量名</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$_SERVER</code></td>
<td class="left">由服务器创建，包含服务器和执行环境的信息</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_GET</code></td>
<td class="left">通过 GET 方法传递的变量</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_POST</code></td>
<td class="left">通过 POST 方法传递的变量</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_FILES</code></td>
<td class="left">通过 POST 方法上传的文件</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_COOKIE</code></td>
<td class="left">通过 cookie 传递的变量</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_SESSION</code></td>
<td class="left">当前代码中可用的 session 变量</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_REQUEST</code></td>
<td class="left">浏览器传递的内容，包括 <code>$_GET</code> <code>$_POST</code> <code>$_COOKIE</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$_ENV</code></td>
<td class="left">通过 <code>environment</code> 方法传递的变量</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<label class="org-src-name">为避免通过 <code>$_GET</code> 和 <code>$_POST</code> 向服务器发送恶意代码，使用前需要转义</label>
<pre class="src src-php">$<span class="org-variable-name">came_from</span> = <span class="org-function-name">htmlentities</span>($<span class="org-constant">_SERVER</span>[<span class="org-string">'HTTP_REFERER'</span>]);
</pre>
</div>
</div>

<div id="outline-container-sec-2-7-1" class="outline-4">
<h4 id="sec-2-7-1"><span class="section-number-4">2.7.1</span> <code>$_SERVER</code></h4>
<div class="outline-text-4" id="text-2-7-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><b>客户端</b></th>
<th scope="col" class="left"><code>REMOTE_ADDR</code></th>
<th scope="col" class="left">客户端 IP 地址</th>
<th scope="col" class="left"><code>::ffff:10.245.205.147</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>REMOTE_PORT</code></td>
<td class="left">客户端端口号</td>
<td class="left"><code>49718</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>REMOTE_HOST</code></td>
<td class="left">客户端主机名，DNS 反向查找</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>请求</b></td>
<td class="left"><code>REQUEST_URI</code></td>
<td class="left">请求 URI</td>
<td class="left"><code>/render.php</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>QUERY_STRING</code></td>
<td class="left">请求参数</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>REQUEST_METHOD</code></td>
<td class="left">请求方法</td>
<td class="left"><code>POST</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>CONTENT_LENGTH</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>72</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>CONTENT_TYPE</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>application/x-www-form-urlencoded</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_COOKIE</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>__utmt=1; __utma=165884987; ...</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTPS</code></td>
<td class="left">请求是否使用 HTTPS 协议</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>请求 header</b></td>
<td class="left"><code>HTTP_HOST</code></td>
<td class="left"><code>Host</code></td>
<td class="left"><code>www.tehplayground.com</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_REFERER</code></td>
<td class="left">转向当前页面之前的页面地址（不可信）</td>
<td class="left"><code>http://www.tehplayground.com/</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">若直接输入地址到浏览器，则为空字符串</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_USER_AGENT</code></td>
<td class="left"><code>User-Agent</code></td>
<td class="left"><code>Mozilla/5.0 (Windows NT 6.1; WOW64) ...</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_CONNECTION</code></td>
<td class="left"><code>Connection</code></td>
<td class="left"><code>Keep-Alive</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_CONTENT_LENGTH</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>72</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_ACCEPT</code></td>
<td class="left"><code>Accept</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_ACCEPT_CHARSET</code></td>
<td class="left"><code>Accept-Charset</code></td>
<td class="left"><code>iso-8859-1,*,utf-8</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_ACCEPT_ENCODING</code></td>
<td class="left"><code>Accept-Encoding</code></td>
<td class="left"><code>gzip</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_ACCEPT_LANGUAGE</code></td>
<td class="left"><code>Accept-Language</code></td>
<td class="left"><code>en-US,en;q=0.8</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_X_FORWARDED_FOR</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>129.173.43.60</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>HTTP_X_FORWARDED_PROTO</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>http</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>服务器端</b></td>
<td class="left"><code>SERVER_NAME</code></td>
<td class="left">服务器主机名，或虚拟主机名</td>
<td class="left"><code>www.tehplayground.com</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>SERVER_ADDR</code></td>
<td class="left">服务器 IP 地址</td>
<td class="left"><code>::ffff:10.245.205.147</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>SERVER_PORT</code></td>
<td class="left">服务器端口号</td>
<td class="left"><code>80</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>SERVER_SOFTWARE</code></td>
<td class="left">服务器软件、版本号</td>
<td class="left"><code>lighttpd/1.4.31</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>SERVER_PROTOCOL</code></td>
<td class="left">请求的协议、版本号</td>
<td class="left"><code>HTTP/1.1</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>GATEWAY_INTERFACE</code></td>
<td class="left">服务器使用的 CGI 规范版本号</td>
<td class="left"><code>CGI/1.1</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>身份验证</b></td>
<td class="left"><code>AUTH_TYPE</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>PHP_AUTH_USER</code></td>
<td class="left">HTTP 验证时用户输入的用户名</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>PHP_AUTH_PW</code></td>
<td class="left">HTTP 验证时用户输入的密码</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>REMOTE_USER</code></td>
<td class="left">验证用户</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>执行脚本</b></td>
<td class="left"><code>DOCUMENT_ROOT</code></td>
<td class="left">根目录（服务器配置文件中定义）</td>
<td class="left"><code>/var/www/</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>PHP_SELF</code></td>
<td class="left">当前脚本相对路径</td>
<td class="left"><code>/render.php</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>SCRIPT_NAME</code></td>
<td class="left">当前脚本路径</td>
<td class="left"><code>/render.php</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>SCRIPT_FILENAME</code></td>
<td class="left">当前脚本绝对路径</td>
<td class="left"><code>/var/www/render.php</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>REQUEST_TIME</code></td>
<td class="left">请求时间戳</td>
<td class="left"><code>1456329981</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>REQUEST_TIME_FLOAT</code></td>
<td class="left">请求时间戳，精确到毫秒</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>执行环境</b></td>
<td class="left"><code>PATH</code></td>
<td class="left">&#xa0;</td>
<td class="left"><code>/sbin:/usr/sbin:/bin:/usr/bin</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>PATH_INFO</code></td>
<td class="left">URL 中脚本名之后、请求参数之前的部分</td>
<td class="left"><code>/some/stuff</code> （ <code>http://foo.com/index.php/some/stuff?foo=bar</code> ）</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>命令行</b></td>
<td class="left"><code>argv</code></td>
<td class="left">命令行参数数组，或 GET 请求的参数数组</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>argc</code></td>
<td class="left">命令行参数个数</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> 预定义变量</h3>
<div class="outline-text-3" id="text-2-8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>$argc</code></th>
<th scope="col" class="left">从命令行传递的参数个数</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>$argv</code></td>
<td class="left">从命令行传递的参数数组</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$php_errormsg</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$HTTP_RAW_POST_DATA</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>$http_response_header</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 常量</h2>
<div class="outline-text-2" id="text-3">
<p>
常量定义之后，在程序运行的过程中值不会改变。
</p>

<p>
常量名不能加 <code>$</code> 前缀，通常用大写字母命名。
</p>

<div class="org-src-container">
<label class="org-src-name">示例</label>
<pre class="src src-php"><span class="org-function-name">define</span>(<span class="org-string">'ROOT_LOCATION'</span>, <span class="org-string">'/usr/local/www/'</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">&#23450;&#20041;</span>
$<span class="org-variable-name">directory</span> = <span class="org-constant">ROOT_LOCATION</span>;                 <span class="org-comment-delimiter">// </span><span class="org-comment">&#24341;&#29992;</span>
</pre>
</div>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> 预定义常量</h3>
<div class="outline-text-3" id="text-3-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>PHP_VERSION</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Magic 常量</h3>
<div class="outline-text-3" id="text-3-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>__LINE__</code></th>
<th scope="col" class="left">当前文件的当前行数</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>__FUNCTION__</code></td>
<td class="left">当前函数名</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>__METHOD__</code></td>
<td class="left">当前类方法名</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>__CLASS__</code></td>
<td class="left">当前类名</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>__FILE__</code></td>
<td class="left">当前文件的绝对路径和文件名</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>__DIR__</code></td>
<td class="left">当前文件的目录名，等于 <code>dirname(__FILE__)</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>__NAMESPACE__</code></td>
<td class="left">当前命名空间</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 运算符</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 比较</h3>
<div class="outline-text-3" id="text-4-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>==</code></th>
<th scope="col" class="left">比较值</th>
<th scope="col" class="left">进行隐性类型转换，会混淆零值 <code>0</code> <code>false</code> <code>null</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>===</code></td>
<td class="left">比较值和类型</td>
<td class="left">无隐式类型转换</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-php">$<span class="org-variable-name">result</span> = <span class="org-function-name">strpos</span>($<span class="org-variable-name">haystack</span>, $<span class="org-variable-name">needle</span>);
<span class="org-keyword">if</span> ($<span class="org-variable-name">result</span> == <span class="org-constant">false</span>) {}  <span class="org-comment-delimiter">// </span><span class="org-comment">&#38169;&#35823;&#65292;&#36820;&#22238;&#20540;&#20026; 0 &#26102;&#26465;&#20214;&#20063;&#25104;&#31435;</span>
<span class="org-keyword">if</span> ($<span class="org-variable-name">result</span> === <span class="org-constant">false</span>) {} <span class="org-comment-delimiter">// </span><span class="org-comment">&#27491;&#30830;</span>
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> 数组比较</caption>

<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>==</code></th>
<th scope="col" class="left">比较键值（即排序后完全一致）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>===</code></td>
<td class="left">比较键值和顺序</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> <code>instanceof</code></h3>
<div class="outline-text-3" id="text-4-2">
<p>
判断对象是否属于指定类型。
</p>

<div class="org-src-container">
<label class="org-src-name">子类的对象属于基类的类型。</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {}
<span class="org-keyword">class</span> <span class="org-type">Bar</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {}
$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span> <span class="org-keyword">instanceof</span> <span class="org-type">Foo</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">true</span>
$<span class="org-variable-name">bar</span> <span class="org-keyword">instanceof</span> <span class="org-type">Bar</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">true</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 语法</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> heredoc</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>保留一段文本中的换行、空格和缩进。
</li>
<li>可以输出整段 HTML，但浏览器会按自己的方式处理换行（显示为空格）。
</li>
</ul>

<div class="org-src-container">
<label class="org-src-name">示例</label>
<pre class="src src-php">$<span class="org-variable-name">author</span> = <span class="org-string">"Alfred E Newman"</span>;
<span class="org-keyword">echo</span> &lt;&lt;&lt;<span class="org-warning">_FOO</span>          <span class="org-comment-delimiter">// </span><span class="org-comment">&#24320;&#22836;&#26631;&#31034;&#31526;&#21518;&#19981;&#33021;&#21152;&#20998;&#21495;&#65292;&#21542;&#21017;&#20135;&#29983;&#35299;&#26512;&#38169;&#35823;</span>
                      <span class="org-comment-delimiter">// </span><span class="org-comment">&#26631;&#31034;&#31526;&#21487;&#20197;&#33258;&#23450;&#20041;&#65292;&#20294;&#20026;&#20102;&#19981;&#19982;&#21464;&#37327;&#21644;&#26041;&#27861;&#37325;&#21517;&#65292;&#36890;&#24120;&#20351;&#29992; _CAPITAL</span>

<span class="org-warning">This</span> <span class="org-warning">is</span> <span class="org-warning">a</span> <span class="org-warning">Headline</span>    <span class="org-comment-delimiter">// </span><span class="org-comment">&#25442;&#34892;&#12289;&#24341;&#21495;&#19981;&#38656;&#35201;&#36716;&#20041;&#65292;&#21487;&#20197;&#20351;&#29992;&#20998;&#21495;</span>
- <span class="org-warning">Written</span> <span class="org-warning">by</span> $<span class="org-variable-name">author</span>. <span class="org-comment-delimiter">// </span><span class="org-comment">&#25991;&#26412;&#30456;&#24403;&#20110;&#34987;&#21452;&#24341;&#21495;&#21253;&#35013;&#65292;&#21464;&#37327;&#21517;&#20250;&#34987;&#26367;&#25442;</span>

<span class="org-warning">_FOO</span>;                 <span class="org-comment-delimiter">// </span><span class="org-comment">&#32467;&#23614;&#26631;&#31034;&#31526;&#21152;&#20998;&#21495;&#65292;&#21069;&#21518;&#19981;&#33021;&#21152;&#20219;&#20309;&#20869;&#23481;&#65292;&#21253;&#25324;&#31354;&#26684;&#12289;&#27880;&#37322;</span>
                      <span class="org-comment-delimiter">// </span><span class="org-comment">&#21069;&#21518;&#20004;&#20010;&#26631;&#31034;&#31526;&#24517;&#39035;&#23545;&#24212;</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 函数</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>函数名不区分大小写。
</li>
</ul>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> 类型约束</h3>
<div class="outline-text-3" id="text-6-1">
<p>
类型约束（type hinting）只在运行时（runtime），即函数被调用时检查参数类型。
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><b>类型</b></th>
<th scope="col" class="right"><b>最低版本</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">类名</td>
<td class="right">5.0</td>
</tr>

<tr>
<td class="left">接口名</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>self</code></td>
<td class="right">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>array</code></td>
<td class="right">5.1</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>callable</code></td>
<td class="right">5.4</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>bool</code></td>
<td class="right">7.0</td>
</tr>

<tr>
<td class="left"><code>float</code></td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>int</code></td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>string</code></td>
<td class="right">&#xa0;</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {}
<span class="org-keyword">class</span> <span class="org-type">Bar</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {}

<span class="org-keyword">function</span> <span class="org-function-name">foo</span>(<span class="org-type">Foo</span> $<span class="org-variable-name">arg</span>) {}
<span class="org-keyword">function</span> <span class="org-function-name">bar</span>(<span class="org-type">Bar</span> $<span class="org-variable-name">arg</span>) {}

$<span class="org-variable-name">foo</span> = <span class="org-keyword">new</span> <span class="org-type">Foo</span>();
$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();

<span class="org-function-name">foo</span>($<span class="org-variable-name">foo</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
<span class="org-function-name">foo</span>($<span class="org-variable-name">bar</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
<span class="org-function-name">bar</span>($<span class="org-variable-name">foo</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">Catchable fatal error (&lt; PHP 7)</span>
           <span class="org-comment-delimiter">// </span><span class="org-comment">Fatal error: Uncaught TypeError (hPHP 7)</span>
<span class="org-function-name">bar</span>($<span class="org-variable-name">bar</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
</pre>
</div>
</div>

<div id="outline-container-sec-6-1-1" class="outline-4">
<h4 id="sec-6-1-1"><span class="section-number-4">6.1.1</span> 类型转换</h4>
<div class="outline-text-4" id="text-6-1-1">
<div class="org-src-container">
<label class="org-src-name">PHP 默认会对标量类型的参数进行必要的类型转换。</label>
<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">foo</span>(<span class="org-type">float</span> $<span class="org-variable-name">arg</span>) {}
<span class="org-function-name">foo</span>(<span class="org-string">'123'</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
<span class="org-function-name">foo</span>(<span class="org-string">'abc'</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">Fatal error: Uncaught TypeError</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-1-2" class="outline-4">
<h4 id="sec-6-1-2"><span class="section-number-4">6.1.2</span> 严格类型</h4>
<div class="outline-text-4" id="text-6-1-2">
<p>
声明严格类型可以避免隐式类型转换。严格类型声明在客户代码，即函数调用的位置进行，且必须在文件的第一行。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-comment-delimiter">// </span><span class="org-comment">&#26410;&#22768;&#26126;&#20005;&#26684;&#31867;&#22411;</span>
<span class="org-keyword">function</span> <span class="org-function-name">foo</span>(<span class="org-type">bool</span> $<span class="org-variable-name">arg</span>) {
    <span class="org-keyword">echo</span> ($<span class="org-variable-name">arg</span>) ? <span class="org-string">'true'</span> : <span class="org-string">'false'</span>;
}
<span class="org-function-name">foo</span>(<span class="org-string">'false'</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">true&#65292;&#23383;&#31526;&#20018; false &#36716;&#25442;&#25104; bool &#20026; true</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#20005;&#26684;&#31867;&#22411;</span>
<span class="org-keyword">declare</span>(<span class="org-warning">strict_types</span>=<span class="org-default">1</span>);
<span class="org-keyword">function</span> <span class="org-function-name">foo</span>(<span class="org-type">bool</span> $<span class="org-variable-name">arg</span>) {
    <span class="org-keyword">echo</span> ($<span class="org-variable-name">arg</span>) ? <span class="org-string">'true'</span> : <span class="org-string">'false'</span>;
}
<span class="org-function-name">foo</span>(<span class="org-string">'false'</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">Fatal error: Uncaught TypeError</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> 类型声明</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">foo</span>(): <span class="org-constant">&lt;type&gt;</span> {
}
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> 闭包</h3>
<div class="outline-text-3" id="text-6-3">
<p>
闭包（closure）是在在创建时将环境状态（surrounding state）封装（encapsulate）起来的函数，封装的状态一直存在于闭包内部，即使原本的环境已经不存在，即匿名函数可以引用其父作用域中定义的变量。
</p>

<p>
PHP 的闭包和匿名函数是等价的，匿名函数使用普通函数的语法，但实际是 <code>Closure</code> 类的对象。 <code>Closure</code> 类实现 <code>__invoke()</code> 方法，当变量名后加 <code>()</code> 时，PHP 会调用 <code>__invoke()</code> 方法。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">output</span>($<span class="org-variable-name">prefix</span>) {
    $<span class="org-variable-name">count</span> = <span class="org-default">10</span>;
    <span class="org-keyword">return</span> <span class="org-keyword">function</span>(<span class="org-type">string</span> $<span class="org-variable-name">text</span>) <span class="org-keyword">use</span> ($<span class="org-variable-name">prefix</span>, $<span class="org-variable-name">count</span>) {
        <span class="org-keyword">while</span> ($<span class="org-variable-name">count</span> &gt; <span class="org-default">0</span>) {
            <span class="org-keyword">echo</span> $<span class="org-variable-name">prefix</span> . $<span class="org-variable-name">text</span> . <span class="org-string">"\n"</span>;
            $<span class="org-variable-name">count</span>--;
        }
    };
}
<span class="org-function-name">call_user_func</span>(<span class="org-function-name">output</span>(<span class="org-string">'Foo: '</span>), <span class="org-string">'bar'</span>);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">闭包修改外部变量的值</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">add</span>($<span class="org-variable-name">first</span>) {
        $<span class="org-variable-name">total</span> = <span class="org-default">0</span>;
        <span class="org-keyword">return</span> <span class="org-keyword">function</span>($<span class="org-variable-name">second</span>) <span class="org-keyword">use</span> ($<span class="org-variable-name">first</span>, &amp;$<span class="org-variable-name">total</span>) { <span class="org-comment-delimiter">// </span><span class="org-comment">&amp; &#20256;&#36882;&#24341;&#29992;</span>
            $<span class="org-variable-name">total</span> += $<span class="org-variable-name">first</span> + $<span class="org-variable-name">second</span>;
            <span class="org-keyword">return</span> $<span class="org-variable-name">total</span>;
        };
    }
}

$<span class="org-variable-name">foo</span> = <span class="org-type">Foo</span>::<span class="org-function-name">add</span>(<span class="org-default">10</span>);
<span class="org-keyword">echo</span> <span class="org-function-name">$foo</span>(<span class="org-default">5</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">15 = 10 + 5</span>
<span class="org-keyword">echo</span> <span class="org-function-name">$foo</span>(<span class="org-default">6</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">31 = 15 + 10 + 6</span>
</pre>
</div>
</div>

<div id="outline-container-sec-6-3-1" class="outline-4">
<h4 id="sec-6-3-1"><span class="section-number-4">6.3.1</span> Attach state</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
Attach state
</p>
<ul class="org-ul">
<li>with the closure object’s <code>bindTo()</code> method or the <code>use</code> keyword
</li>
<li>attached variable retains the value assigned to it at the time it is attached
</li>
</ul>

<p>
<code>use</code> example
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?php</span>
<span class="org-keyword">function</span> <span class="org-function-name">enclosePerson</span>($<span class="org-variable-name">name</span>) {
    <span class="org-keyword">return</span> <span class="org-keyword">function</span> ($<span class="org-variable-name">doCommand</span>) <span class="org-keyword">use</span> ($<span class="org-variable-name">name</span>) { <span class="org-comment-delimiter">// </span><span class="org-comment">attach multiple variables with ,</span>
        <span class="org-keyword">return</span> <span class="org-function-name">sprintf</span>(<span class="org-string">'%s, %s'</span>, $<span class="org-variable-name">name</span>, $<span class="org-variable-name">doCommand</span>);
    };
}
$<span class="org-variable-name">clay</span> = <span class="org-function-name">enclosePerson</span>(<span class="org-string">'Clay'</span>);
<span class="org-keyword">echo</span> <span class="org-function-name">$clay</span>(<span class="org-string">'get me sweet tea!'</span>);
<span class="org-comment-delimiter">// </span><span class="org-comment">Outputs --&gt; "Clay, get me sweet tea!"</span>
</pre>
</div>

<p>
<code>bindTo()</code>
</p>
<ul class="org-ul">
<li>can bind a <code>Closure</code> object’s internal state to a different object
</li>
<li>accept a second argument that specifies the PHP class of the object to which the closure is bound
</li>
<li>let the closure access protected and private member variables of the object to which it is bound
</li>
</ul>

<p>
<code>bindTo()</code> example
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?php</span>
<span class="org-keyword">class</span> <span class="org-type">App</span>
{
    <span class="org-keyword">protected</span> $<span class="org-variable-name">routes</span> = <span class="org-function-name">array</span>();
    <span class="org-keyword">protected</span> $<span class="org-variable-name">responseStatus</span> = <span class="org-string">'200 OK'</span>;
    <span class="org-keyword">protected</span> $<span class="org-variable-name">responseContentType</span> = <span class="org-string">'text/html'</span>;
    <span class="org-keyword">protected</span> $<span class="org-variable-name">responseBody</span> = <span class="org-string">'Hello world'</span>;

    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">addRoute</span>($<span class="org-variable-name">routePath</span>, $<span class="org-variable-name">routeCallback</span>)
    {
        <span class="org-comment-delimiter">// </span><span class="org-comment">accept an anonymous function and bind it to the application object</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">can create a callback function that can manipulate the App instance state</span>
        $<span class="org-constant">this</span>-<span class="org-constant">&gt;</span><span class="org-variable-name">routes</span>[$<span class="org-variable-name">routePath</span>] = $<span class="org-variable-name">routeCallback</span>-&gt;<span class="org-function-name">bindTo</span>($<span class="org-constant">this</span>, <span class="org-constant">__CLASS__</span>);
    }

    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">dispatch</span>($<span class="org-variable-name">currentPath</span>)
    {
        <span class="org-keyword">foreach</span> ($<span class="org-constant">this</span>-&gt;<span class="org-variable-name">routes</span> <span class="org-keyword">as</span> <span class="org-function-name">$routePath</span> =&gt; $<span class="org-variable-name">callback</span>) {
            <span class="org-keyword">if</span> ($<span class="org-variable-name">routePath</span> === $<span class="org-variable-name">currentPath</span>) {
                <span class="org-function-name">$callback</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">invoke the matching route callback</span>
            }
        }
        <span class="org-function-name">header</span>(<span class="org-string">'HTTP/1.1 '</span> . $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">responseStatus</span>);
        <span class="org-function-name">header</span>(<span class="org-string">'Content-type: '</span> . $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">responseContentType</span>);
        <span class="org-function-name">header</span>(<span class="org-string">'Content-length: '</span> . <span class="org-function-name">mb_strlen</span>($<span class="org-constant">this</span>-&gt;<span class="org-variable-name">responseBody</span>));
        <span class="org-keyword">echo</span> $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">responseBody</span>;
    }
}

<span class="org-preprocessor">&lt;?php</span>
$<span class="org-variable-name">app</span> = <span class="org-keyword">new</span> <span class="org-type">App</span>();
$<span class="org-variable-name">app</span>-<span class="org-constant">&gt;</span><span class="org-function-name">addRoute</span>(<span class="org-string">'/users/josh'</span>, <span class="org-keyword">function</span> () {
    <span class="org-comment-delimiter">// </span><span class="org-comment">reference the application object with $this keyword</span>
    $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">responseContentType</span> = <span class="org-string">'application/json;charset=utf8'</span>;
    $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">responseBody</span> = <span class="org-string">'{"name": "Josh"}'</span>;
});
$<span class="org-variable-name">app</span>-&gt;<span class="org-function-name">dispatch</span>(<span class="org-string">'/users/josh'</span>);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> 函数式编程</h3>
<div class="outline-text-3" id="text-6-4">
<p>
匿名函数可以被赋值给变量，或进行传递，也可用作回调函数。
</p>

<div class="org-src-container">
<label class="org-src-name">函数赋值给变量</label>
<pre class="src src-php"><span class="org-comment-delimiter">// </span><span class="org-comment">&#20869;&#32622;&#20989;&#25968;&#36171;&#20540;&#32473;&#21464;&#37327;</span>
$<span class="org-variable-name">func</span> = <span class="org-string">'time'</span>;
<span class="org-keyword">echo</span> <span class="org-function-name">$func</span>();

<span class="org-comment-delimiter">// </span><span class="org-comment">&#33258;&#23450;&#20041;&#20989;&#25968;&#36171;&#20540;&#32473;&#21464;&#37327;</span>
$<span class="org-variable-name">func</span> = <span class="org-keyword">function</span> ($<span class="org-variable-name">arg</span>) {
    <span class="org-keyword">echo</span> <span class="org-string">'Input: '</span> . $<span class="org-variable-name">arg</span> . <span class="org-string">"\n"</span>;
}; <span class="org-comment-delimiter">// </span><span class="org-comment">&#32467;&#23614;&#26377; ;</span>
<span class="org-function-name">$func</span>(<span class="org-string">'test'</span>);
<span class="org-function-name">call_user_func</span>($<span class="org-variable-name">func</span>, <span class="org-string">'test'</span>);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">函数作为参数和返回值</label>
<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">twice</span>($<span class="org-variable-name">func</span>) {
    <span class="org-keyword">return</span> <span class="org-keyword">function</span> ($<span class="org-variable-name">arg</span>) <span class="org-keyword">use</span> ($<span class="org-variable-name">func</span>) { <span class="org-comment-delimiter">// </span><span class="org-comment">&#38381;&#21253;</span>
        <span class="org-keyword">return</span> <span class="org-function-name">$func</span>(<span class="org-function-name">$func</span>($<span class="org-variable-name">arg</span>));
    };
}
$<span class="org-variable-name">func</span> = <span class="org-function-name">twice</span>(<span class="org-keyword">function</span> ($<span class="org-variable-name">arg</span>) {
    <span class="org-keyword">return</span> $<span class="org-variable-name">arg</span> * <span class="org-default">2</span>;
});
<span class="org-keyword">echo</span> <span class="org-function-name">$func</span>(<span class="org-default">3</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">12 = 3 * 2 * 2;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> 回调函数</h3>
<div class="outline-text-3" id="text-6-5">
<div class="org-src-container">
<label class="org-src-name">二维数组的元素使用指定键值进行排序</label>
<pre class="src src-php">$<span class="org-variable-name">array</span> = <span class="org-function-name">array</span>(
    <span class="org-function-name">array</span>(<span class="org-string">'a'</span> =&gt; <span class="org-default">3</span>),
    <span class="org-function-name">array</span>(<span class="org-string">'a'</span> =&gt; <span class="org-default">1</span>),
    <span class="org-function-name">array</span>(<span class="org-string">'a'</span> =&gt; <span class="org-default">2</span>),
);
$<span class="org-variable-name">column</span> = <span class="org-string">'a'</span>;
<span class="org-function-name">usort</span>($<span class="org-variable-name">array</span>, <span class="org-keyword">function</span> ($<span class="org-variable-name">a</span>, $<span class="org-variable-name">b</span>) <span class="org-keyword">use</span> ($<span class="org-variable-name">column</span>) {
    <span class="org-keyword">return</span> ($<span class="org-variable-name">a</span>[$<span class="org-variable-name">column</span>] &lt; $<span class="org-variable-name">b</span>[$<span class="org-variable-name">column</span>]) ? -<span class="org-default">1</span> : <span class="org-default">1</span>;
});
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">二维数组提取指定键值</label>
<pre class="src src-php">$<span class="org-variable-name">data</span> = <span class="org-function-name">array</span>(
    <span class="org-function-name">array</span>(<span class="org-string">'value'</span> =&gt; <span class="org-string">'a'</span>),
    <span class="org-function-name">array</span>(<span class="org-string">'value'</span> =&gt; <span class="org-string">'b'</span>),
    <span class="org-function-name">array</span>(<span class="org-string">'value'</span> =&gt; <span class="org-string">'c'</span>),
);
$<span class="org-variable-name">values</span> = <span class="org-function-name">array_map</span>(<span class="org-keyword">function</span> ($<span class="org-variable-name">a</span>) {
    <span class="org-keyword">return</span> $<span class="org-variable-name">a</span>[<span class="org-string">'value'</span>];
}, $<span class="org-variable-name">data</span>);
<span class="org-comment-delimiter">// </span><span class="org-comment">array('a', 'b', 'c');</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">数组元素累加</label>
<pre class="src src-php">$<span class="org-variable-name">nums</span> = <span class="org-function-name">array</span>(<span class="org-default">1</span>, <span class="org-default">2</span>, <span class="org-default">3</span>);
$<span class="org-variable-name">sum</span> = <span class="org-function-name">array_reduce</span>($<span class="org-variable-name">nums</span>, <span class="org-keyword">function</span> ($<span class="org-variable-name">carry</span>, $<span class="org-variable-name">item</span>) {
    $<span class="org-variable-name">carry</span> += $<span class="org-variable-name">item</span>;
    <span class="org-keyword">return</span> $<span class="org-variable-name">carry</span>;
});
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> OO</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> 对象</h3>
<div class="outline-text-3" id="text-7-1">
</div><div id="outline-container-sec-7-1-1" class="outline-4">
<h4 id="sec-7-1-1"><span class="section-number-4">7.1.1</span> 对象 ID</h4>
<div class="outline-text-4" id="text-7-1-1">
<p>
每一个 PHP 对象有唯一的 ID，对象被销毁之后，ID 会被回收并重复使用。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">Foo</span>;
<span class="org-keyword">class</span> <span class="org-type">Bar</span> {}
$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
<span class="org-function-name">var_dump</span>($<span class="org-variable-name">bar</span>);
<span class="org-comment-delimiter">// </span><span class="org-comment">object(Foo\Bar)#1 (0) {}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-1-2" class="outline-4">
<h4 id="sec-7-1-2"><span class="section-number-4">7.1.2</span> 打印对象</h4>
<div class="outline-text-4" id="text-7-1-2">
<div class="org-src-container">
<label class="org-src-name">PHP 5.2 之前可以直接打印对象。</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Bar</span> {}
$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
<span class="org-keyword">print</span> $<span class="org-variable-name">bar</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Object id #1</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">PHP 5.2 之后类必须实现 <code>__toString()</code> 方法才可以打印对象。</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__toString</span>() {
        <span class="org-keyword">return</span> <span class="org-string">'This is an object.'</span>;
    }
}
$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
<span class="org-keyword">print</span> $<span class="org-variable-name">bar</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">This is an object.</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> 可见性</h3>
<div class="outline-text-3" id="text-7-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>public</code></th>
<th scope="col" class="left">默认可见性，可以被任何代码使用</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>protected</code></td>
<td class="left">只能被当前类和子类的方法使用</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>private</code></td>
<td class="left">只能被当前类的方法使用，不能被子类的方法继承或使用</td>
</tr>
</tbody>
</table>

<p>
一般先将成员声明为 <code>private</code> 或 <code>protected</code> ，只在必要时增加其可见性。
</p>
</div>
</div>
<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> 属性</h3>
<div class="outline-text-3" id="text-7-3">
<div class="org-src-container">
<label class="org-src-name">未声明的属性可以动态添加，但不是良好的习惯，发生拼写错误时不会得到警告。</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> $<span class="org-variable-name">bar</span>;
}
$<span class="org-variable-name">foo</span> = <span class="org-keyword">new</span> <span class="org-type">Foo</span>();
$<span class="org-variable-name">foo</span>-&gt;<span class="org-variable-name">baz</span> = <span class="org-string">'123'</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> 常量</h3>
<div class="outline-text-3" id="text-7-4">
<p>
常量必须定义值，且只能定义为原始类型的值。常量只能通过类而不是对象进行访问。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">const</span> <span class="org-constant">BAR</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Parse error: syntax error, unexpected ';', expecting '=' ...</span>
    <span class="org-keyword">const</span> <span class="org-constant">BAZ</span> = <span class="org-default">1</span>;
}
<span class="org-type">Foo</span>::<span class="org-constant">BAZ</span> = <span class="org-default">2</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Parse error: syntax error, unexpected '=' ...</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5"><span class="section-number-3">7.5</span> 静态</h3>
<div class="outline-text-3" id="text-7-5">
<p>
一般成员在类实例之间各不相同，静态成员在类的所有实例中保持不变。静态成员在类而不是对象的上下文中引用，因此静态方法不能访问普通属性或 <code>$this</code> （属于对象而不是类）。
</p>

<p>
使用静态成员可以减少实例化类造成的开销（overhead）。
</p>
</div>

<div id="outline-container-sec-7-5-1" class="outline-4">
<h4 id="sec-7-5-1"><span class="section-number-4">7.5.1</span> 示例</h4>
<div class="outline-text-4" id="text-7-5-1">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> $<span class="org-variable-name">bar</span> = <span class="org-string">'test'</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#38745;&#24577;&#23646;&#24615;</span>
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">one</span>() { <span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#38745;&#24577;&#26041;&#27861;</span>
        <span class="org-keyword">echo</span> <span class="org-constant">self</span>::$<span class="org-variable-name">bar</span>;           <span class="org-comment-delimiter">// </span><span class="org-comment">&#24341;&#29992;&#38745;&#24577;&#23646;&#24615;</span>
    }
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">two</span>() {
        <span class="org-constant">self</span>::<span class="org-function-name">one</span>();               <span class="org-comment-delimiter">// </span><span class="org-comment">&#24341;&#29992;&#38745;&#24577;&#26041;&#27861;</span>
    }
}
$<span class="org-variable-name">a</span> = <span class="org-type">Foo</span>::$<span class="org-variable-name">bar</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#24341;&#29992;&#38745;&#24577;&#23646;&#24615;</span>
<span class="org-type">Foo</span>::<span class="org-function-name">one</span>();     <span class="org-comment-delimiter">// </span><span class="org-comment">&#24341;&#29992;&#38745;&#24577;&#26041;&#27861;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-5-2" class="outline-4">
<h4 id="sec-7-5-2"><span class="section-number-4">7.5.2</span> 静态方法</h4>
<div class="outline-text-4" id="text-7-5-2">
<div class="org-src-container">
<label class="org-src-name">静态方法可以作为工厂方法，生成不同的示例。</label>
<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">getFoo</span>(<span class="org-type">int</span> $<span class="org-variable-name">type</span> = <span class="org-default">1</span>) {
        <span class="org-keyword">switch</span> ($<span class="org-variable-name">type</span>) {
            <span class="org-keyword">case</span> <span class="org-constant">1</span>:
                <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">FooOne</span>();
            <span class="org-keyword">case</span> <span class="org-constant">2</span>:
                <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">FooTwo</span>();
        }
    }
}

<span class="org-keyword">class</span> <span class="org-type">FooOne</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {}
<span class="org-keyword">class</span> <span class="org-type">FooTwo</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {}

$<span class="org-variable-name">foo1</span> = <span class="org-type">Foo</span>::<span class="org-function-name">getFoo</span>(<span class="org-default">1</span>);
$<span class="org-variable-name">foo2</span> = <span class="org-type">Foo</span>::<span class="org-function-name">getFoo</span>(<span class="org-default">2</span>);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7-6" class="outline-3">
<h3 id="sec-7-6"><span class="section-number-3">7.6</span> 抽象</h3>
<div class="outline-text-3" id="text-7-6">
<p>
抽象类和抽象方法用来确保子类中一定会包含和重载（override）某些方法。接口也可以实现同样目的。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">abstract</span> <span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">abstract</span> <span class="org-keyword">function</span> <span class="org-function-name">operation</span>($<span class="org-variable-name">param1</span>, $<span class="org-variable-name">param2</span>);
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">function</span> <span class="org-function-name">operation</span>($<span class="org-variable-name">param1</span>, $<span class="org-variable-name">param2</span>) {}
}
</pre>
</div>
</div>

<div id="outline-container-sec-7-6-1" class="outline-4">
<h4 id="sec-7-6-1"><span class="section-number-4">7.6.1</span> 抽象方法</h4>
<div class="outline-text-4" id="text-7-6-1">
<p>
抽象方法是只有签名而没有实现的方法。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">abstract</span> <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">bar</span>();
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-6-2" class="outline-4">
<h4 id="sec-7-6-2"><span class="section-number-4">7.6.2</span> 抽象类</h4>
<div class="outline-text-4" id="text-7-6-2">
<p>
抽象类不能被实例化。
</p>

<p>
定义了抽象方法的类必须为抽象类，但抽象类也可以定义有实现的非抽象方法。
</p>

<p>
抽象类的作用是定义一种接口。继承了抽象类的子类，必须实现基类的所有抽象方法（且方法签名必须一致），或本身被声明被抽象类。
</p>
</div>
</div>
</div>
<div id="outline-container-sec-7-7" class="outline-3">
<h3 id="sec-7-7"><span class="section-number-3">7.7</span> 接口</h3>
<div class="outline-text-3" id="text-7-7">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">interface</span> <span class="org-type">Foo</span> {}
<span class="org-keyword">interface</span> <span class="org-type">Bar</span> {}
<span class="org-keyword">class</span> <span class="org-type">Concrete</span> <span class="org-keyword">implements</span> <span class="org-type">Foo, Bar</span> {}
</pre>
</div>

<p>
接口只有成员的声明，没有实现。
</p>

<p>
一个类只能继承一个父类，但可以实现多个接口（只要接口中没有与此类重名的方法）。实现接口的类必须实现接口定义的方法，或被声明为抽象类。
</p>

<div class="org-src-container">
<label class="org-src-name">实现了接口的类就具有了接口的类型。</label>
<pre class="src src-php"><span class="org-keyword">interface</span> <span class="org-type">Foo</span> {}
<span class="org-keyword">interface</span> <span class="org-type">Bar</span> {}
<span class="org-keyword">class</span> <span class="org-type">Hoge</span> <span class="org-keyword">implements</span> <span class="org-type">Foo, Bar</span> {}

$<span class="org-variable-name">hoge</span> = <span class="org-keyword">new</span> <span class="org-type">Hoge</span>();
<span class="org-keyword">echo</span> ($<span class="org-variable-name">hoge</span> <span class="org-keyword">instanceof</span> <span class="org-type">Foo</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">1</span>
<span class="org-keyword">echo</span> ($<span class="org-variable-name">hoge</span> <span class="org-keyword">instanceof</span> <span class="org-type">Bar</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">1</span>
</pre>
</div>

<p>
接口是对象之间的契约（contract），可以将代码和它的依赖解耦，因为面向对象的代码只能使用固定类的对象，而面向接口的代码可以使用任何实现了接口的对象，更加灵活。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">interface</span> <span class="org-type">Bar</span> {}
<span class="org-keyword">class</span> <span class="org-type">BarOne</span> <span class="org-keyword">implements</span> <span class="org-type">Bar</span> {}
<span class="org-keyword">class</span> <span class="org-type">BarTwo</span> <span class="org-keyword">implements</span> <span class="org-type">Bar</span> {}

<span class="org-keyword">function</span> <span class="org-function-name">bar</span>(<span class="org-type">Bar</span> $<span class="org-variable-name">arg</span>) {} <span class="org-comment-delimiter">// </span><span class="org-comment">&#38754;&#21521;&#25509;&#21475;</span>

<span class="org-function-name">bar</span>(<span class="org-keyword">new</span> <span class="org-type">BarOne</span>());
<span class="org-function-name">bar</span>(<span class="org-keyword">new</span> <span class="org-type">BarTwo</span>());
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-8" class="outline-3">
<h3 id="sec-7-8"><span class="section-number-3">7.8</span> <code>final</code> 类</h3>
<div class="outline-text-3" id="text-7-8">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">final</span> <span class="org-keyword">class</span> <span class="org-type">Foo</span> {}      <span class="org-comment-delimiter">// </span><span class="org-comment">final &#31867;&#26080;&#27861;&#34987;&#32487;&#25215;</span>
<span class="org-keyword">final</span> <span class="org-keyword">function</span> <span class="org-function-name">foo</span>() {} <span class="org-comment-delimiter">// </span><span class="org-comment">final &#26041;&#27861;&#22312;&#23376;&#31867;&#20013;&#26080;&#27861;&#34987;&#37325;&#36733;</span>
<span class="org-keyword">final</span> <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">bar</span>() {} <span class="org-comment-delimiter">// </span><span class="org-comment">final &#20851;&#38190;&#23383;&#22312;&#26368;&#21069;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-9" class="outline-3">
<h3 id="sec-7-9"><span class="section-number-3">7.9</span> Trait</h3>
<div class="outline-text-3" id="text-7-9">
<p>
继承不支持多个基类，而接口不提供实现，trait 提供了复用部分（partial）实现的代码的方式，而使用 trait 的类（在继承关系中）可以是不相关的。Trait 改变类的功能，但不改变类型。
</p>

<p>
Trait 语法类似于类，但不能被实例化。PHP 在编译时将 trait 代码复制到引用 trait 的位置。
</p>
</div>

<div id="outline-container-sec-7-9-1" class="outline-4">
<h4 id="sec-7-9-1"><span class="section-number-4">7.9.1</span> 语法</h4>
<div class="outline-text-4" id="text-7-9-1">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {} <span class="org-comment-delimiter">// </span><span class="org-comment">&#23450;&#20041;</span>
<span class="org-keyword">trait</span> <span class="org-type">Bar</span> {}
<span class="org-keyword">class</span> <span class="org-type">Hego</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo, Bar</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#20351;&#29992;</span>
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">含有同名方法时，类中的方法会覆盖 trait 的方法。</label>
<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">run</span>() {
        <span class="org-keyword">echo</span> <span class="org-string">'foo'</span>;
    }
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo</span>;
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">run</span>() {
        <span class="org-keyword">echo</span> <span class="org-string">'bar'</span>;
    }
}

$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">run</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">bar</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">Trait 可以访问宿主的属性和方法，但是无法保证宿主类含有指定的属性和方法，所以应该避免。</label>
<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">foo</span>() {
        <span class="org-keyword">echo</span> $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">prefix</span> . <span class="org-string">'-'</span> . $<span class="org-constant">this</span>-&gt;<span class="org-function-name">getSuffix</span>();
    }
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo</span>;
    <span class="org-keyword">private</span> $<span class="org-variable-name">prefix</span> = <span class="org-string">'123'</span>;
    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">getSuffix</span>() {
        <span class="org-keyword">return</span> <span class="org-string">'456'</span>;
    }
}

$<span class="org-variable-name">bar</span>= <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">foo</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">123-456</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-9-2" class="outline-4">
<h4 id="sec-7-9-2"><span class="section-number-4">7.9.2</span> <code>as</code></h4>
<div class="outline-text-4" id="text-7-9-2">
<div class="org-src-container">
<label class="org-src-name">为 trait 方法指定别名。</label>
<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">run</span>() {}
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo</span> {
        <span class="org-type">Foo</span>::<span class="org-constant">run</span> <span class="org-keyword">as</span> <span class="org-function-name">fooRun</span>;
    }
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">run</span>() {}
}

$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">fooRun</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">Foo::run()</span>
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">run</span>();    <span class="org-comment-delimiter">// </span><span class="org-comment">Bar::run()</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">修改 trait 方法的可见性。</label>
<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">foo</span>() {}
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo</span> {
        <span class="org-type">Foo</span>::<span class="org-constant">foo</span> <span class="org-keyword">as</span> <span class="org-keyword">public</span>;
    }
}

$<span class="org-variable-name">bar</span>= <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">foo</span>();
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-9-3" class="outline-4">
<h4 id="sec-7-9-3"><span class="section-number-4">7.9.3</span> <code>insteadof</code></h4>
<div class="outline-text-4" id="text-7-9-3">
<p>
两个 trait 包含同名方法时，用 <code>insteadof</code> 指定要使用的方法，避免冲突。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">run</span>() {}
}

<span class="org-keyword">trait</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">run</span>() {}
}

<span class="org-keyword">class</span> <span class="org-type">Hoge</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo, Bar</span> {
        <span class="org-type">Bar</span>::<span class="org-constant">run</span> <span class="org-keyword">insteadof</span> <span class="org-type">Foo</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#25351;&#23450;&#20351;&#29992; Bar &#30340; run()</span>
        <span class="org-type">Foo</span>::<span class="org-constant">run</span> <span class="org-keyword">as</span> <span class="org-function-name">fooRun</span>;     <span class="org-comment-delimiter">// </span><span class="org-comment">&#36890;&#36807;&#21035;&#21517;&#20351;&#29992; Foo &#30340; run()</span>
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-9-4" class="outline-4">
<h4 id="sec-7-9-4"><span class="section-number-4">7.9.4</span> 静态方法</h4>
<div class="outline-text-4" id="text-7-9-4">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">run</span>() {}
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo</span>;
}

$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span>::<span class="org-function-name">run</span>();
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-9-5" class="outline-4">
<h4 id="sec-7-9-5"><span class="section-number-4">7.9.5</span> 抽象方法</h4>
<div class="outline-text-4" id="text-7-9-5">
<div class="org-src-container">
<label class="org-src-name">通过定义抽象方法，trait 可以确保包含它的类一定会实现指定方法。</label>
<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">abstract</span> <span class="org-keyword">function</span> <span class="org-function-name">getText</span>(): <span class="org-warning">string</span>;
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">output</span>() {
        <span class="org-keyword">echo</span> $<span class="org-constant">this</span>-&gt;<span class="org-function-name">getText</span>();
    }
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">use</span> <span class="org-type">Foo</span>;
    <span class="org-keyword">private</span> <span class="org-keyword">function</span> <span class="org-function-name">getText</span>(): <span class="org-warning">string</span> {
        <span class="org-keyword">return</span> <span class="org-string">'text'</span>;
    }
}

$<span class="org-variable-name">bar</span>= <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">output</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">text</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-9-6" class="outline-4">
<h4 id="sec-7-9-6"><span class="section-number-4">7.9.6</span> 示例</h4>
<div class="outline-text-4" id="text-7-9-6">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">trait</span> <span class="org-type">Logger</span> {
    <span class="org-keyword">private</span> $<span class="org-variable-name">logFile</span>;
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">logError</span>(<span class="org-type">string</span> $<span class="org-variable-name">msg</span> = <span class="org-string">'unknown'</span>) {
        <span class="org-keyword">echo</span> <span class="org-string">'[file='</span> . $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">logFile</span> . <span class="org-string">'] [msg='</span> . $<span class="org-variable-name">msg</span> . <span class="org-string">']'</span>;
    }
}

<span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">use</span> <span class="org-type">Logger</span>;
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__construct</span>() {
        $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">logFile</span> = <span class="org-string">'foo.log'</span>;
    }
}

<span class="org-keyword">class</span> <span class="org-type">Bar</span> {
    <span class="org-keyword">use</span> <span class="org-type">Logger</span>;
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__construct</span>() {
        $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">logFile</span> = <span class="org-string">'bar.log'</span>;
    }
}

$<span class="org-variable-name">foo</span> = <span class="org-keyword">new</span> <span class="org-type">Foo</span>();
$<span class="org-variable-name">foo</span>-&gt;<span class="org-function-name">logError</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">[file=foo.log] [msg=unknown]</span>
$<span class="org-variable-name">bar</span> = <span class="org-keyword">new</span> <span class="org-type">Bar</span>();
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">logError</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">[file=bar.log] [msg=unknown]</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7-10" class="outline-3">
<h3 id="sec-7-10"><span class="section-number-3">7.10</span> <code>::</code> 运算符</h3>
<div class="outline-text-3" id="text-7-10">
<p>
在类而不是对象上下文中引用方法时，使用 <code>::</code> 而不是 <code>-&gt;</code> 。
</p>
</div>

<div id="outline-container-sec-7-10-1" class="outline-4">
<h4 id="sec-7-10-1"><span class="section-number-4">7.10.1</span> <code>parent</code></h4>
<div class="outline-text-4" id="text-7-10-1">
<p>
<code>parent::&lt;method&gt;()</code> 是唯一可以用静态语法调用非静态方法的场合。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__construct</span>() {}
}
<span class="org-keyword">class</span> <span class="org-type">Bar</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__construct</span>() {
        <span class="org-constant">parent</span>::<span class="org-function-name">__construct</span>();
        <span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-10-2" class="outline-4">
<h4 id="sec-7-10-2"><span class="section-number-4">7.10.2</span> <code>self</code></h4>
<div class="outline-text-4" id="text-7-10-2">
<p>
类的 <code>self</code> 相当于对象的 <code>$this</code> 。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">protected</span> <span class="org-keyword">static</span> $<span class="org-variable-name">counter</span> = <span class="org-default">0</span>;
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">visit</span>() {
        <span class="org-constant">self</span>::$<span class="org-variable-name">counter</span>++;
    }
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">create</span>() {
        <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">self</span>();
    }
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><code>self</code> 得解析不依赖于调用时的上下文，而是定义位置。</label>
<pre class="src src-php"><span class="org-keyword">abstract</span> <span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">create</span>() {
        <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">self</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">self == Foo</span>
    }
}
<span class="org-keyword">class</span> <span class="org-type">Bar</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {}
$<span class="org-variable-name">bar</span> = <span class="org-type">Bar</span>::<span class="org-function-name">create</span>();
<span class="org-comment-delimiter">// </span><span class="org-comment">Fatal error: Uncaught Error: Cannot instantiate abstract class Foo ...</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-10-3" class="outline-4">
<h4 id="sec-7-10-3"><span class="section-number-4">7.10.3</span> <code>static</code></h4>
<div class="outline-text-4" id="text-7-10-3">
<p>
PHP 5.3 引入 late static binding，以解决基类中 <code>self</code> 无法解析为子类的问题。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">abstract</span> <span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-keyword">function</span> <span class="org-function-name">create</span>() {
        <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-keyword">static</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">static == &#35843;&#29992;&#26102;&#30340;&#31867;</span>
    }
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">output</span>() {
        <span class="org-keyword">echo</span> <span class="org-constant">static</span>::<span class="org-function-name">getName</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">static &#21487;&#20197;&#22312;&#38750;&#38745;&#24577;&#19978;&#19979;&#25991;&#20013;&#65292;&#20197;&#38745;&#24577;&#35821;&#27861;&#35843;&#29992;&#38745;&#24577;&#25110;&#38750;&#38745;&#24577;&#26041;&#27861;</span>
    }
}
<span class="org-keyword">class</span> <span class="org-type">Bar</span> <span class="org-keyword">extends</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> $<span class="org-variable-name">name</span> = <span class="org-string">'Bar'</span>;
    <span class="org-keyword">protected</span> <span class="org-keyword">function</span> <span class="org-function-name">getName</span>() {
        <span class="org-keyword">return</span> $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">name</span>;
    }
}
$<span class="org-variable-name">bar</span> = <span class="org-type">Bar</span>::<span class="org-function-name">create</span>();
<span class="org-keyword">echo</span> <span class="org-function-name">get_class</span>($<span class="org-variable-name">bar</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">Bar</span>
$<span class="org-variable-name">bar</span>-&gt;<span class="org-function-name">output</span>();       <span class="org-comment-delimiter">// </span><span class="org-comment">Bar</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-10-4" class="outline-4">
<h4 id="sec-7-10-4"><span class="section-number-4">7.10.4</span> <code>class</code></h4>
<div class="outline-text-4" id="text-7-10-4">
<p>
<code>&lt;class_name&gt;::class</code> 表示类的 fully qualified 类名， <code>&lt;class_name&gt;</code> 可以是类的别名。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">Foo</span>;
<span class="org-keyword">class</span> <span class="org-type">Bar</span> {}
<span class="org-type">Bar</span>::<span class="org-constant">class</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Foo\Bar</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7-11" class="outline-3">
<h3 id="sec-7-11"><span class="section-number-3">7.11</span> <code>clone</code></h3>
<div class="outline-text-3" id="text-7-11">
<p>
PHP 5 之后对象赋值为传递引用，使用 <code>clone</code> 可以显式复制对象，此时会在副本对象上调用 <code>__clone()</code> 方法。使用 <code>__clone()</code> 方法可以解决以下问题：
</p>

<ul class="org-ul">
<li>对象属性中包含标识符，如 ID 时， <code>clone</code> 对象默认会与原对象指向同一个数据源记录的问题。
</li>
<li>对象属性中包含对象， <code>clone</code> 对象默认复制属性对象的引用。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">private</span> $<span class="org-variable-name">id</span>;
    <span class="org-keyword">public</span> $<span class="org-variable-name">name</span>;
    <span class="org-keyword">public</span> $<span class="org-variable-name">bar</span>;
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__construct</span>($<span class="org-variable-name">name</span>, <span class="org-type">Bar</span> $<span class="org-variable-name">bar</span>) {
        $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">name</span> = $<span class="org-variable-name">name</span>;
        $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">bar</span> = $<span class="org-variable-name">bar</span>;
    }
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">__clone</span>() {
        $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">id</span> = <span class="org-default">0</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#37325;&#32622; ID&#65292;&#36991;&#20813;&#25351;&#21521;&#21516;&#19968;&#26465;&#35760;&#24405;</span>
        $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">name</span> = <span class="org-string">'This is a clone of '</span> . $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">name</span>;
        $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">bar</span> = <span class="org-keyword">clone</span> $<span class="org-constant">this</span>-&gt;<span class="org-variable-name">bar</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#22797;&#21046;&#23646;&#24615;&#23545;&#35937;</span>
    }
}

$<span class="org-variable-name">a</span> = <span class="org-keyword">new</span> <span class="org-type">Foo</span>(<span class="org-string">'bar'</span>);
$<span class="org-variable-name">b</span> = <span class="org-keyword">clone</span> $<span class="org-variable-name">a</span>;
<span class="org-keyword">echo</span> $<span class="org-variable-name">b</span>-&gt;<span class="org-variable-name">name</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">This is a clone of bar</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> 错误</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> 错误等级</h3>
<div class="outline-text-3" id="text-8-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="right">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">产生者</th>
<th scope="col" class="left">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">1</td>
<td class="left"><code>---------------1</code></td>
<td class="left"><code>E_ERROR</code></td>
<td class="left">运行时致命错误，程序停止运行</td>
<td class="left">&#xa0;</td>
<td class="left">一个对象调用一个不存在的类</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">2</td>
<td class="left"><code>--------------1-</code></td>
<td class="left"><code>E_WARNING</code></td>
<td class="left">运行时警告（非致命错误），程序不会停止</td>
<td class="left">&#xa0;</td>
<td class="left">使用了未定义的包的功能</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">4</td>
<td class="left"><code>-------------1--</code></td>
<td class="left"><code>E_PARSE</code></td>
<td class="left">编译时解析错误</td>
<td class="left">解析器</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">8</td>
<td class="left"><code>------------1---</code></td>
<td class="left"><code>E_NOTICE</code></td>
<td class="left">运行时提示</td>
<td class="left">&#xa0;</td>
<td class="left">使用了未声明变量</td>
</tr>

<tr>
<td class="right">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">代码执行有可能造成问题，程序不会停止</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">16</td>
<td class="left"><code>-----------1----</code></td>
<td class="left"><code>E_CORE_ERROR</code></td>
<td class="left">PHP 启动时的致命错误</td>
<td class="left">PHP 核心</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">32</td>
<td class="left"><code>----------1-----</code></td>
<td class="left"><code>E_CORE_WARNING</code></td>
<td class="left">PHP 启动时的警告（非致命错误）</td>
<td class="left">PHP 核心</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">64</td>
<td class="left"><code>---------1------</code></td>
<td class="left"><code>E_COMPILE_ERROR</code></td>
<td class="left">编译时致命错误</td>
<td class="left">Zend 脚本引擎</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">128</td>
<td class="left"><code>--------1-------</code></td>
<td class="left"><code>E_COMPILE_WARNING</code></td>
<td class="left">编译时警告（非致命错误）</td>
<td class="left">Zend 脚本引擎</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">256</td>
<td class="left"><code>-------1--------</code></td>
<td class="left"><code>E_USER_ERROR</code></td>
<td class="left">用户生成的错误信息</td>
<td class="left"><code>trigger_error()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">512</td>
<td class="left"><code>------1---------</code></td>
<td class="left"><code>E_USER_WARNING</code></td>
<td class="left">用户生成的警告信息</td>
<td class="left"><code>trigger_error()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">1024</td>
<td class="left"><code>-----1----------</code></td>
<td class="left"><code>E_USER_NOTICE</code></td>
<td class="left">用户生成的提示信息</td>
<td class="left"><code>trigger_error()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">2048</td>
<td class="left"><code>----1-----------</code></td>
<td class="left"><code>E_STRICT</code></td>
<td class="left">对代码互操作性和向后兼容性的建议</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">4096</td>
<td class="left"><code>---1------------</code></td>
<td class="left"><code>E_RECOVERABLE_ERROR</code></td>
<td class="left">可捕获的致命错误</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">如果没有被错误处理函数捕获，则产生 <code>E_ERROR</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">8192</td>
<td class="left"><code>--1-------------</code></td>
<td class="left"><code>E_DEPRECATED</code></td>
<td class="left">运行时提示，在未来版本中无法使用的代码</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">16384</td>
<td class="left"><code>-1--------------</code></td>
<td class="left"><code>E_USER_DEPRECATED</code></td>
<td class="left">用户生成的警告信息</td>
<td class="left"><code>trigger_error()</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="right">32767</td>
<td class="left"><code>-111111111111111</code></td>
<td class="left"><code>E_ALL</code></td>
<td class="left">以上全部错误、警告、提示</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
设定错误报告等级的方式：
</p>

<ul class="org-ul">
<li><code>php.ini</code> 的 <code>error_reporting</code> 指令
</li>
<li><code>error_reporting()</code>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> 配置</h3>
<div class="outline-text-3" id="text-8-2">
<div class="org-src-container">
<label class="org-src-name">显示错误</label>
<pre class="src src-php"><span class="org-function-name">error_reporting</span>(<span class="org-constant">E_ALL</span> &amp; ~<span class="org-constant">E_STRICT</span> &amp; ~<span class="org-constant">E_NOTICE</span>);
<span class="org-function-name">ini_set</span>(<span class="org-string">'display_errors'</span>, <span class="org-string">'1'</span>);
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">记录错误日志</label>
<pre class="src src-php"><span class="org-function-name">error_reporting</span>(<span class="org-constant">E_ALL</span> &amp; ~<span class="org-constant">E_STRICT</span> &amp; ~<span class="org-constant">E_NOTICE</span>);
<span class="org-function-name">ini_set</span>(<span class="org-string">'log_errors'</span>, <span class="org-string">'1'</span>);
<span class="org-function-name">ini_set</span>(<span class="org-string">'error_log'</span>, <span class="org-string">'path/to/file'</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> <code>@</code></h3>
<div class="outline-text-3" id="text-8-3">
<div class="org-src-container">

<pre class="src src-php">@<span class="org-constant">&lt;expr&gt;</span>
</pre>
</div>

<p>
忽略表达式可能产生的错误信息。如果启动了 <code>track_errors</code> 选项，错误信息会保存在 <code>$php_errormsg</code> 中。
</p>

<div class="org-src-container">

<pre class="src src-php">$<span class="org-variable-name">foo</span> = @(<span class="org-default">57</span>/<span class="org-default">0</span>);
$<span class="org-variable-name">bar</span> = @<span class="org-function-name">file</span>(<span class="org-string">'file_name'</span>) <span class="org-keyword">or</span> <span class="org-keyword">die</span>(<span class="org-string">'Failed opening file'</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> <code>Error</code> 类</h3>
<div class="outline-text-3" id="text-8-4">
<p>
PHP 7 加入 <code>Error</code> 类，实现 <code>Throwable</code> 接口，使内部错误可以像代码错误一样被捕获。
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>ArithmeticError</code></th>
<th scope="col" class="left">数学运算错误</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>AssertionError</code></td>
<td class="left"><code>assert()</code> 错误</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>DivisionByZeroError</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>ParseError</code></td>
<td class="left">运行时 PHP 解析错误，如 <code>eval()</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>TypeError</code></td>
<td class="left">参数、返回值类型错误</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">foo</span>(<span class="org-type">int</span> $<span class="org-variable-name">arg</span>) {}
<span class="org-keyword">try</span> {
    <span class="org-function-name">foo</span>(<span class="org-string">'bar'</span>);
} <span class="org-keyword">catch</span> (<span class="org-type">Error</span> $<span class="org-variable-name">e</span>) {
    <span class="org-keyword">echo</span> $<span class="org-variable-name">e</span>-&gt;<span class="org-function-name">getMessage</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">Argument 1 passed to foo() must be of the type integer, string given ...</span>
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 异常</h2>
<div class="outline-text-2" id="text-9">
<p>
当代码运行中发现错误，而没有如何处理错误的上下文信息时，应当抛出异常，将错误处理交给客户代码。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">try</span> {
    <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">Exception</span>();
    <span class="org-comment-delimiter">// </span><span class="org-comment">&#22914;&#26524;&#25243;&#20986;&#24322;&#24120;&#65292;&#20043;&#21518;&#30340;&#20195;&#30721;&#19981;&#34987;&#25191;&#34892;</span>
} <span class="org-keyword">catch</span>(<span class="org-type">FooException</span> $<span class="org-variable-name">e</span>) {
    <span class="org-comment-delimiter">// </span><span class="org-comment">&#21482;&#25191;&#34892;&#31532;&#19968;&#20010;&#19982;&#24322;&#24120;&#31867;&#22411;&#21305;&#37197;&#30340;&#25429;&#33719;&#20195;&#30721;</span>
} <span class="org-keyword">catch</span>(<span class="org-type">Exception</span> $<span class="org-variable-name">e</span>) {
    <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">Exception</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">&#20877;&#27425;&#25243;&#20986;&#24322;&#24120;</span>
} <span class="org-keyword">finally</span> {
    <span class="org-comment-delimiter">// </span><span class="org-comment">&#25191;&#34892;&#65306;&#25243;&#20986;&#24322;&#24120;&#26102;&#65292;&#21253;&#25324;&#25429;&#33719;&#21518;&#20877;&#27425;&#25243;&#20986;&#24322;&#24120;&#25110;&#36820;&#22238;&#26102;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">&#19981;&#25191;&#34892;&#65306;try &#25110; catch &#20013;&#25191;&#34892;&#20102; die() &#25110; exit() &#26102;</span>
}
</pre>
</div>

<p>
未被捕获的异常会被隐式地再次抛出，直到异常被捕获，或无法继续抛出并导致错误。
</p>

<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">function</span> <span class="org-function-name">foo</span>() {
    <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">Exception</span>();
}
<span class="org-function-name">foo</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">Fatal error: Uncaught Exception ...</span>
</pre>
</div>
</div>

<div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> 自定义异常</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">

<pre class="src src-php"><span class="org-keyword">class</span> <span class="org-type">OpenFileException</span> <span class="org-keyword">extends</span> <span class="org-type">Exception</span> {
    <span class="org-keyword">function</span> <span class="org-function-name">open</span>() {
        <span class="org-function-name">touch</span>(<span class="org-string">"tmp.txt"</span>);
        $<span class="org-variable-name">file</span> = <span class="org-function-name">fopen</span>(<span class="org-string">"tmp.txt"</span>, <span class="org-string">"r"</span>);
        <span class="org-keyword">return</span> $<span class="org-variable-name">file</span>;
    }
}

<span class="org-keyword">class</span> <span class="org-type">MyClass</span> {
    <span class="org-keyword">function</span> <span class="org-function-name">openfile</span>() {
        $<span class="org-variable-name">file</span> = @<span class="org-function-name">fopen</span>(<span class="org-string">"non-exist.txt"</span>, <span class="org-string">"r"</span>);
        <span class="org-keyword">if</span> (!$<span class="org-variable-name">file</span>) {
            <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">OpenFileException</span>(<span class="org-string">"&#25991;&#20214;&#25171;&#24320;&#22833;&#36133;"</span>);
        }
    }
}

<span class="org-keyword">try</span> {
    $<span class="org-variable-name">my</span> = <span class="org-keyword">new</span> <span class="org-type">MyClass</span>();
    $<span class="org-variable-name">my</span>-&gt;<span class="org-function-name">openfile</span>();
} <span class="org-keyword">catch</span> (<span class="org-type">OpenFileException</span> $<span class="org-variable-name">e</span>) {
    <span class="org-keyword">echo</span> $<span class="org-variable-name">e</span>-&gt;<span class="org-function-name">getMessage</span>() . <span class="org-string">"&lt;br /&gt;"</span>;
    $<span class="org-variable-name">file</span> = $<span class="org-variable-name">e</span>-&gt;<span class="org-function-name">open</span>();
} <span class="org-keyword">catch</span> (<span class="org-type">Exception</span> $<span class="org-variable-name">e</span>) {  <span class="org-comment-delimiter">//</span><span class="org-comment">&#25509;&#25910;&#27809;&#26377;&#22788;&#29702;&#30340;&#25152;&#26377;&#24322;&#24120;</span>
    <span class="org-keyword">echo</span> $<span class="org-variable-name">e</span>-&gt;<span class="org-function-name">getMessage</span>();
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> 配置</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> 可设定范围</h3>
<div class="outline-text-3" id="text-10-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">可设定的位置</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>PHP_INI_ALL</code></td>
<td class="left">任何地方</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>PHP_INI_SYSTEM</code></td>
<td class="left"><code>php.ini</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>httpd.conf</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>PHP_INI_PERDIR</code></td>
<td class="left"><code>php.ini</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>httpd.conf</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>.htaccess</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>PHP_INI_USER</code></td>
<td class="left">PHP 脚本（使用 <code>ini_set()</code> ）</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left"><code>.user.ini</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><span class="section-number-3">10.2</span> 错误处理</h3>
<div class="outline-text-3" id="text-10-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">类型</th>
<th scope="col" class="left">默认值</th>
<th scope="col" class="left">可设定范围</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>error_reporting</code></td>
<td class="left">错误报告级别</td>
<td class="left"><code>int</code></td>
<td class="left"><code>null</code></td>
<td class="left"><code>PHP_INI_ALL</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>display_errors</code></td>
<td class="left">是否打印错误输出</td>
<td class="left"><code>string</code></td>
<td class="left"><code>1</code></td>
<td class="left"><code>PHP_INI_ALL</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>display_startup_errors</code></td>
<td class="left">是否打印 PHP 启动过程中的错误输出</td>
<td class="left"><code>boolean</code></td>
<td class="left"><code>0</code></td>
<td class="left"><code>PHP_INI_ALL</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>log_errors</code></td>
<td class="left">是否将脚本错误信息输出到日志文件</td>
<td class="left"><code>boolean</code></td>
<td class="left"><code>0</code></td>
<td class="left"><code>PHP_INI_ALL</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>error_log</code></td>
<td class="left">错误日志文件路径</td>
<td class="left"><code>string</code></td>
<td class="left"><code>null</code></td>
<td class="left"><code>PHP_INI_ALL</code></td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<label class="org-src-name">示例</label>
<pre class="src src-php"><span class="org-function-name">ini_set</span>(<span class="org-string">'display_errors'</span>, <span class="org-string">'0'</span>);
<span class="org-function-name">ini_set</span>(<span class="org-string">'log_errors'</span>, <span class="org-string">'1'</span>);
<span class="org-function-name">ini_set</span>(<span class="org-string">'error_log'</span>, <span class="org-constant">ROOT</span> . <span class="org-string">'/log/error.log'</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3"><span class="section-number-3">10.3</span> 文件上传</h3>
<div class="outline-text-3" id="text-10-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">类型</th>
<th scope="col" class="left">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>file_uploads</code></td>
<td class="left">是否允许 HTTP 上传文件</td>
<td class="left">int</td>
<td class="left"><code>1</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>upload_tmp_dir</code></td>
<td class="left">存放上传文件的临时文件夹，必须是可写的</td>
<td class="left">string</td>
<td class="left"><code>NULL</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">若为 null 或文件夹不可写，则使用系统默认临时文件夹</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>upload_max_filesize</code></td>
<td class="left">上传文件的最大字节数</td>
<td class="left">int</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>max_file_uploads</code></td>
<td class="left">允许同时上传文件的数量</td>
<td class="left">int</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4"><span class="section-number-3">10.4</span> 路径和目录</h3>
<div class="outline-text-3" id="text-10-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">类型</th>
<th scope="col" class="left">默认值</th>
<th scope="col" class="left">可设定范围</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>include_path</code></td>
<td class="left">用于查找使用相对路径的文件的目录列表，类似 <code>PATH</code> 环境变量</td>
<td class="left">string</td>
<td class="left"><code>.;/path/to/php/pear</code></td>
<td class="left"><code>PHP_INI_ALL</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">用于 <code>require</code> <code>include</code> <code>fopen()</code> <code>file()</code> <code>readfile()</code> <code>file_get_contents()</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">可以使用 <code>set_include_path()</code> 进行设定</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5"><span class="section-number-3">10.5</span> 安全模式</h3>
<div class="outline-text-3" id="text-10-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">类型</th>
<th scope="col" class="left">默认值</th>
<th scope="col" class="left">可设定范围</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>safe_mode</code></td>
<td class="left">安全模式，主要影响文件操作</td>
<td class="left">int</td>
<td class="left"><code>0</code></td>
<td class="left"><code>PHP_INI_SYSTEM</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">PHP 会检查当前脚本的拥有者和被操作文件的拥有者是否一致</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">受影响的函数： <code>pathinfo()</code> <code>basename()</code> <code>fopen()</code> <code>exec()</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-10-6" class="outline-3">
<h3 id="sec-10-6"><span class="section-number-3">10.6</span> 扩展控制</h3>
<div class="outline-text-3" id="text-10-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">类型</th>
<th scope="col" class="left">默认值</th>
<th scope="col" class="left">可设定范围</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>extension</code></td>
<td class="left">控制扩展的开闭</td>
<td class="left">string</td>
<td class="left"><code>NULL</code></td>
<td class="left"><code>php.ini</code></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">e.g. <code>extension=php_pdo.dll</code></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>extension_dir</code></td>
<td class="left">动态加载扩展的目录</td>
<td class="left">string</td>
<td class="left"><code>/path/to/php</code></td>
<td class="left"><code>PHP_INI_SYSTEM</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> 环境</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> 环境变量</h3>
<div class="outline-text-3" id="text-11-1">
<div class="org-src-container">
<label class="org-src-name">Apache 设置环境变量</label>
<pre class="src src-sh">&lt;VirtualHost ...&gt;
    SetEnv &lt;NAME&gt; <span class="org-string">"&lt;value&gt;"</span>
&lt;/VirtualHost&gt;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">Nginx 设置环境变量</label>
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">fastcgi_params &#25991;&#20214;</span>
fastcgi_param &lt;NAME&gt; <span class="org-string">'&lt;value&gt;'</span>;

<span class="org-comment-delimiter"># </span><span class="org-comment">nginx.conf &#25991;&#20214;</span>
server {
    include fastcgi_params;
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">PHP 读取环境变量</label>
<pre class="src src-php">$<span class="org-variable-name">var</span> = <span class="org-function-name">getenv</span>(<span class="org-string">'NAME'</span>);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> 高级</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1"><span class="section-number-3">12.1</span> 命名空间</h3>
<div class="outline-text-3" id="text-12-1">
<p>
PHP 5.3 引入命名空间，通过为一组类、接口、函数、常量加上共同的前缀，避免名称冲突（name collision）。
</p>
</div>

<div id="outline-container-sec-12-1-1" class="outline-4">
<h4 id="sec-12-1-1"><span class="section-number-4">12.1.1</span> 声明</h4>
<div class="outline-text-4" id="text-12-1-1">
<div class="org-src-container">

<pre class="src src-php"><span class="org-comment-delimiter">// </span><span class="org-comment">Symfony/Component/HttpFoundation/Response.php</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">&#22768;&#26126;&#24517;&#39035;&#22312;&#25991;&#20214;&#31532;&#19968;&#34892;</span>
<span class="org-keyword">namespace</span> <span class="org-type">Symfony\Component\HttpFoundation</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">&#27492;&#25991;&#20214;&#20013;&#30340;&#31867;&#12289;&#25509;&#21475;&#12289;&#20989;&#25968;&#12289;&#24120;&#37327;&#65292;&#37117;&#23646;&#20110;&#27492;&#21629;&#21517;&#31354;&#38388;</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">可以在一个文件中声明多个命名空间，但不是良好习惯。</label>
<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">Foo</span> {
}
<span class="org-keyword">namespace</span> <span class="org-type">Bar</span> {
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-1-2" class="outline-4">
<h4 id="sec-12-1-2"><span class="section-number-4">12.1.2</span> 引用</h4>
<div class="outline-text-4" id="text-12-1-2">
<div class="org-src-container">

<pre class="src src-php"><span class="org-comment-delimiter">// </span><span class="org-comment">&#30452;&#25509;&#24341;&#29992;&#32477;&#23545;&#21629;&#21517;&#31354;&#38388;&#65292;&#38656;&#35201; \ &#21069;&#32512;</span>
$<span class="org-variable-name">response</span> = <span class="org-keyword">new</span> <span class="org-type">\Symfony\Component\HttpFoundation\Response</span>(<span class="org-string">'Oops'</span>, <span class="org-default">400</span>);

<span class="org-comment-delimiter">// </span><span class="org-comment">&#30452;&#25509;&#24341;&#29992;&#30456;&#23545;&#21629;&#21517;&#31354;&#38388;</span>
<span class="org-keyword">namespace</span> <span class="org-type">Symfony\Component</span>;
$<span class="org-variable-name">response</span> = <span class="org-type">HttpFoundation\</span><span class="org-function-name">Response</span>(<span class="org-string">'Oops'</span>, <span class="org-default">400</span>);

<span class="org-comment-delimiter">// </span><span class="org-comment">use &#24341;&#29992;&#32477;&#23545;&#21629;&#21517;&#31354;&#38388;&#65292;&#19981;&#38656;&#35201; \ &#21069;&#32512;&#65288;use &#26080;&#27861;&#24341;&#29992;&#30456;&#23545;&#21629;&#21517;&#31354;&#38388;&#65289;</span>
<span class="org-keyword">use</span> <span class="org-type">Symfony\Component\HttpFoundation\Response</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">&#38544;&#24335;&#21035;&#21517;&#20026; Response</span>
$<span class="org-variable-name">response</span> = <span class="org-keyword">new</span> <span class="org-type">Response</span>(<span class="org-string">'Oops'</span>, <span class="org-default">400</span>);

<span class="org-comment-delimiter">// </span><span class="org-comment">use &#26174;&#24335;&#21035;&#21517;&#24341;&#29992;</span>
<span class="org-keyword">use</span> <span class="org-type">Symfony\Component\HttpFoundation\Response</span> <span class="org-keyword">as</span> <span class="org-function-name">Res</span>;
$<span class="org-variable-name">response</span> = <span class="org-keyword">new</span> <span class="org-type">Res</span>(<span class="org-string">'Oops'</span>, <span class="org-default">400</span>);

<span class="org-comment-delimiter">// </span><span class="org-comment">use func/constant</span>
<span class="org-keyword">use</span> <span class="org-type">func</span> <span class="org-warning">Namespace</span>\<span class="org-warning">functionName</span>;
<span class="org-keyword">use</span> <span class="org-type">constant</span> <span class="org-warning">Namespace</span>\<span class="org-warning">CONST_NAME</span>;
<span class="org-function-name">functionName</span>();
<span class="org-keyword">echo</span> <span class="org-constant">CONST_NAME</span>;
</pre>
</div>

<ul class="org-ul">
<li>不指定命名空间时，默认引用属于当前命名空间的类、接口、函数、常量。
</li>
<li>引用另一个命名空间的代码时，必须使用全称（fully qualified name）。
</li>
<li><code>use</code> 可以在命名空间声明之后，但必须在全局范围内，不能在任何类或函数内。
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-1-3" class="outline-4">
<h4 id="sec-12-1-3"><span class="section-number-4">12.1.3</span> 全局命名空间</h4>
<div class="outline-text-4" id="text-12-1-3">
<p>
没有命名空间的类、接口、函数、常量，属于全局命名空间。
</p>

<div class="org-src-container">
<label class="org-src-name">引用全局命名空间的类</label>
<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">My\App</span>;
<span class="org-keyword">class</span> <span class="org-type">Foo</span> {
    <span class="org-keyword">public</span> <span class="org-keyword">function</span> <span class="org-function-name">bar</span>() {
        $<span class="org-variable-name">e</span> = <span class="org-keyword">new</span> <span class="org-type">\Exception</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">&#24403;&#21069;&#20195;&#30721;&#26159;&#22312; My\App &#21629;&#21517;&#31354;&#38388;&#19979;&#65292;&#22914;&#26524;&#27809;&#26377; \ &#21069;&#32512;&#65292;</span>
                               <span class="org-comment-delimiter">// </span><span class="org-comment">PHP &#20250;&#35797;&#22270;&#23547;&#25214; My\App\Exception &#31867;</span>
    }
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">引用全局命名空间的函数</label>
<pre class="src src-php"><span class="org-keyword">namespace</span> <span class="org-type">A\B\C</span>;
<span class="org-keyword">function</span> <span class="org-function-name">fopen</span>() {  <span class="org-comment-delimiter">// </span><span class="org-comment">A\B\C &#21629;&#21517;&#31354;&#38388;&#19979;&#30340; fopen()</span>
     $<span class="org-variable-name">f</span> = \<span class="org-function-name">fopen</span>(); <span class="org-comment-delimiter">// </span><span class="org-comment">&#20840;&#23616;&#21629;&#21517;&#31354;&#38388;&#19979;&#30340; fopen()</span>
     <span class="org-keyword">return</span> $<span class="org-variable-name">f</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-1-4" class="outline-4">
<h4 id="sec-12-1-4"><span class="section-number-4">12.1.4</span> 规范</h4>
<div class="outline-text-4" id="text-12-1-4">
<p>
PHP 组件和框架通常将其代码放在全局唯一的 vendor 命名空间下。
</p>

<p>
命名空间不一定映射到文件系统的结构，但为了兼容 PSR-4，大部分 PHP 组件将命名空间映射到文件系统。
</p>
</div>
</div>
</div>
<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2"><span class="section-number-3">12.2</span> 生成器</h3>
<div class="outline-text-3" id="text-12-2">
<ul class="org-ul">
<li>since PHP 5.5.0
</li>
<li>compute and yield iteration values on-demand
</li>
<li>used for iterating large or numerically sequenced data sets using less system memory
</li>
<li>forward-only, impossible to rewind or fast-forward
</li>
</ul>

<div class="org-src-container">
<label class="org-src-name">示例</label>
<pre class="src src-php"><span class="org-comment-delimiter">// </span><span class="org-comment">Generator</span>
<span class="org-keyword">function</span> <span class="org-function-name">generator</span>() {
    <span class="org-keyword">yield</span> <span class="org-string">'value1'</span>;
    <span class="org-keyword">yield</span> <span class="org-string">'value2'</span>;
    <span class="org-keyword">yield</span> <span class="org-string">'value3'</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">&#26080;&#36820;&#22238;&#20540;</span>
}
<span class="org-comment-delimiter">// </span><span class="org-comment">Invoker</span>
<span class="org-keyword">foreach</span> (<span class="org-function-name">generator</span>() <span class="org-keyword">as</span> <span class="org-function-name">$yield</span>) {
    <span class="org-keyword">echo</span> $<span class="org-variable-name">yield</span>, <span class="org-constant">PHP_EOL</span>;
}
</pre>
</div>

<p>
Internal process
</p>
<ul class="org-ul">
<li>when invoking the generator function, PHP returns an object that belongs to the <code>Generator</code> class
</li>
<li>during each iteration, PHP asks the <code>Generator</code> instance to compute and provide the next iteration value
</li>
<li>the generator pauses its internal state whenever it yields a value
</li>
<li>the generator resumes internal state when it is asked for the next value
</li>
</ul>
</div>

<div id="outline-container-sec-12-2-1" class="outline-4">
<h4 id="sec-12-2-1"><span class="section-number-4">12.2.1</span> Compare with standard iterator</h4>
<div class="outline-text-4" id="text-12-2-1">
<p>
Standard iterator
</p>
<ul class="org-ul">
<li>require implementing the Iterator interface
</li>
<li>iterate in-memory, precomputed data sets
</li>
<li>inefficient with large and formulaic data sets
</li>
</ul>

<p>
Standard iterator example
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?php</span>
<span class="org-keyword">function</span> <span class="org-function-name">makeRange</span>($<span class="org-variable-name">length</span>) {
    $<span class="org-variable-name">dataset</span> = [];
    <span class="org-keyword">for</span> ($<span class="org-variable-name">i</span> = <span class="org-default">0</span>; $<span class="org-variable-name">i</span> &lt; $<span class="org-variable-name">length</span>; $<span class="org-variable-name">i</span>++) {
        $<span class="org-variable-name">dataset</span>[] = $<span class="org-variable-name">i</span>;
    }
    <span class="org-keyword">return</span> $<span class="org-variable-name">dataset</span>;
}
$<span class="org-variable-name">customRange</span> = <span class="org-function-name">makeRange</span>(<span class="org-default">1000000</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">allocate 1 million integers into a precomputed array</span>
<span class="org-keyword">foreach</span> ($<span class="org-variable-name">customRange</span> <span class="org-keyword">as</span> <span class="org-function-name">$i</span>) {
    <span class="org-keyword">echo</span> $<span class="org-variable-name">i</span>, <span class="org-constant">PHP_EOL</span>;
}
</pre>
</div>

<p>
Generator example
</p>
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?php</span>
<span class="org-keyword">function</span> <span class="org-function-name">makeRange</span>($<span class="org-variable-name">length</span>) {
    <span class="org-keyword">for</span> ($<span class="org-variable-name">i</span> = <span class="org-default">0</span>; $<span class="org-variable-name">i</span> &lt; $<span class="org-variable-name">length</span>; $<span class="org-variable-name">i</span>++) {
        <span class="org-keyword">yield</span> $<span class="org-variable-name">i</span>;
    }
}
<span class="org-keyword">foreach</span> (<span class="org-function-name">makeRange</span>(<span class="org-default">1000000</span>) <span class="org-keyword">as</span> <span class="org-function-name">$i</span>) { <span class="org-comment-delimiter">// </span><span class="org-comment">invoke with foreach()</span>
                                     <span class="org-comment-delimiter">// </span><span class="org-comment">allocate memory for only 1 integer at any given time</span>
    <span class="org-keyword">echo</span> $<span class="org-variable-name">i</span>, <span class="org-constant">PHP_EOL</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-2-2" class="outline-4">
<h4 id="sec-12-2-2"><span class="section-number-4">12.2.2</span> CSV generator example</h4>
<div class="outline-text-4" id="text-12-2-2">
<div class="org-src-container">

<pre class="src src-php"><span class="org-preprocessor">&lt;?php</span>
<span class="org-keyword">function</span> <span class="org-function-name">getRows</span>($<span class="org-variable-name">file</span>) {
    $<span class="org-variable-name">handle</span> = <span class="org-function-name">fopen</span>($<span class="org-variable-name">file</span>, <span class="org-string">'rb'</span>);
    <span class="org-keyword">if</span> ($<span class="org-variable-name">handle</span> === <span class="org-constant">false</span>) {
        <span class="org-keyword">throw</span> <span class="org-keyword">new</span> <span class="org-type">Exception</span>();
    }
    <span class="org-keyword">while</span> (<span class="org-function-name">feof</span>($<span class="org-variable-name">handle</span>) === <span class="org-constant">false</span>) {
        <span class="org-keyword">yield</span> <span class="org-function-name">fgetcsv</span>($<span class="org-variable-name">handle</span>);
    }
    <span class="org-function-name">fclose</span>($<span class="org-variable-name">handle</span>);
}
<span class="org-keyword">foreach</span> (<span class="org-function-name">getRows</span>(<span class="org-string">'data.csv'</span>) <span class="org-keyword">as</span> <span class="org-function-name">$row</span>) { <span class="org-comment-delimiter">// </span><span class="org-comment">allocate memory for one row at a time</span>
                                        <span class="org-comment-delimiter">// </span><span class="org-comment">instead of reading the entire file into memory</span>
    <span class="org-function-name">print_r</span>($<span class="org-variable-name">row</span>);
}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> 框架</h2>
<div class="outline-text-2" id="text-13">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="no-border">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><b>CakePHP</b></th>
<th scope="col" class="left">受 RoR 启发，坚持至简的原则（Keep It Simple Stupid）</th>
</tr>

<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">优点：社区活跃，比 Zend 和 Symfony 简单</th>
</tr>

<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">缺点：编程方式有一些特殊要求</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><b>CodeIgniter</b></td>
<td class="left">优点：运行速度快，轻量，开发迅速，社区活跃，文档完整</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">缺点：编程方式太自由</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>Laravel</b></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>Phalcon</b></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>Slim</b></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>Symfony</b></td>
<td class="left">优点：使用 ORM，有专属的模板引擎 Twig，社区活跃</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">缺点：学习曲线陡</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>Yii</b></td>
<td class="left">优点：运行速度快，特性丰富</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><b>Zend</b></td>
<td class="left">优点：企业级应用，Lucene 搜索特性</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">缺点：设计模式难以理解</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> 命令</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-sec-14-1" class="outline-3">
<h3 id="sec-14-1"><span class="section-number-3">14.1</span> <code>php</code></h3>
<div class="outline-text-3" id="text-14-1">
<div class="org-src-container">

<pre class="src src-sh">php &lt;options&gt; &lt;file&gt;

    -a                <span class="org-comment-delimiter"># </span><span class="org-comment">&#20132;&#20114; shell</span>
    -e                <span class="org-comment-delimiter"># </span><span class="org-comment">&#25193;&#23637;&#20449;&#24687;&#27169;&#24335;&#65292;&#29992;&#20570; debugger&#12289;profiler</span>

    -c &lt;path&gt;|&lt;file&gt;  <span class="org-comment-delimiter"># </span><span class="org-comment">&#35774;&#23450;&#26597;&#25214; php.ini &#30340;&#30446;&#24405;&#65292;&#25110;&#33258;&#23450;&#20041; .ini &#25991;&#20214;</span>
    -n                <span class="org-comment-delimiter"># </span><span class="org-comment">&#23436;&#20840;&#24573;&#30053; php.ini</span>
    --ini             <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;&#21644;&#36335;&#24452; </span>

    -d &lt;direc&gt;[=&lt;value&gt;] <span class="org-comment-delimiter"># </span><span class="org-comment">&#35774;&#32622;&#25351;&#20196;</span>
        &lt;direc&gt;          <span class="org-comment-delimiter"># </span><span class="org-comment">&#35774;&#20026; 1</span>
        &lt;direc&gt;=         <span class="org-comment-delimiter"># </span><span class="org-comment">&#35774;&#20026; ""</span>
        &lt;direc&gt;=&lt;value&gt;  <span class="org-comment-delimiter"># </span><span class="org-comment">&#35774;&#20026;&#25351;&#23450;&#20540;</span>

    -f &lt;file&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#35299;&#26512;&#12289;&#25191;&#34892;&#25351;&#23450;&#25991;&#20214;&#65292;&#21487;&#30465;&#30053; -f</span>
    -r &lt;code&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#25191;&#34892;&#20195;&#30721;</span>
    -B &lt;code&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#22788;&#29702;&#36755;&#20837;&#34892;&#20043;&#21069;&#25191;&#34892;&#20195;&#30721;</span>
    -r &lt;code&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#22788;&#29702;&#27599;&#34892;&#36755;&#20837;&#37117;&#25191;&#34892;&#20195;&#30721;</span>
    -E &lt;code&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#22788;&#29702;&#36755;&#20837;&#34892;&#20043;&#21518;&#25191;&#34892;&#20195;&#30721;</span>

    -i                <span class="org-comment-delimiter"># </span><span class="org-comment">phpinfo()</span>
    -m                <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#24050;&#21152;&#36733;&#30340; PHP &#21644; Zend &#27169;&#22359;</span>
    -v                <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986; SAPI &#21517;&#12289;PHP &#21644; Zend &#29256;&#26412;</span>

    -S &lt;addr&gt;:&lt;port&gt;  <span class="org-comment-delimiter"># </span><span class="org-comment">&#21551;&#21160;&#20869;&#32622; web server&#65288;PHP 5.4&#65289;</span>
    -t &lt;path&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#20026;&#20869;&#32622; web server &#35774;&#23450;&#26681;&#30446;&#24405;</span>

    -l                <span class="org-comment-delimiter"># </span><span class="org-comment">&#26816;&#26597; PHP &#35821;&#27861;</span>
    -s                <span class="org-comment-delimiter"># </span><span class="org-comment">&#29983;&#25104;&#35821;&#27861;&#39640;&#20142;&#30340; HTML &#20195;&#30721;&#65288;&lt;code&gt;...&lt;/code&gt;&#65289;</span>
    -w                <span class="org-comment-delimiter"># </span><span class="org-comment">&#21435;&#38500;&#20195;&#30721;&#20013;&#30340;&#27880;&#37322;&#21644;&#31354;&#30333;&#23383;&#31526;</span>

    -z &lt;file&gt;         <span class="org-comment-delimiter"># </span><span class="org-comment">&#21152;&#36733; Zend &#25193;&#23637;</span>

    --rf &lt;name&gt;       <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#20989;&#25968;&#12289;&#31867;&#26041;&#27861;&#30340;&#20449;&#24687;&#65288;&#21442;&#25968;&#20010;&#25968;&#12289;&#21517;&#31216;&#65289;</span>
    --rc &lt;name&gt;       <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#31867;&#30340;&#20449;&#24687;&#65288;&#24120;&#37327;&#12289;&#25104;&#21592;&#12289;&#26041;&#27861;&#65289;</span>
    --re &lt;name&gt;       <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#25193;&#23637;&#30340;&#20449;&#24687;&#65288;php.ini &#35774;&#32622;&#39033;&#12289;&#20989;&#25968;&#12289;&#24120;&#37327;&#12289;&#31867;&#65289;</span>
    --rz &lt;name&gt;       <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986; Zend &#25193;&#23637;&#30340;&#20449;&#24687;&#65288;php.ini &#35774;&#32622;&#39033;&#12289;&#20989;&#25968;&#12289;&#24120;&#37327;&#12289;&#31867;&#65289;</span>
    --ri &lt;name&gt;       <span class="org-comment-delimiter"># </span><span class="org-comment">&#36755;&#20986;&#25193;&#23637;&#30340;&#37197;&#32622;&#20449;&#24687;</span>
</pre>
</div>
</div>

<div id="outline-container-sec-14-1-1" class="outline-4">
<h4 id="sec-14-1-1"><span class="section-number-4">14.1.1</span> 参数</h4>
<div class="outline-text-4" id="text-14-1-1">
<div class="org-src-container">

<pre class="src src-sh">php &lt;file&gt; arg1 arg2 ...
</pre>
</div>

<p>
传递给脚本的第一个参数是脚本文件名，所以 <code>$argc</code> 至少为 1， <code>$argv[0]</code> 为脚本文件名。
</p>
</div>
</div>
<div id="outline-container-sec-14-1-2" class="outline-4">
<h4 id="sec-14-1-2"><span class="section-number-4">14.1.2</span> 执行代码</h4>
<div class="outline-text-4" id="text-14-1-2">
<div class="org-src-container">

<pre class="src src-sh">php -r <span class="org-string">"$foo = get_defined_constants();"</span>                 <span class="org-comment-delimiter"># </span><span class="org-comment">&#25253;&#38169;&#65292;shell &#20250;&#35797;&#22270;&#26367;&#25442; $foo</span>
php -r <span class="org-string">'$foo = get_defined_constants(); var_dump($foo);'</span> <span class="org-comment-delimiter"># </span><span class="org-comment">&#20351;&#29992;&#21333;&#24341;&#21495;&#36991;&#20813; shell &#21464;&#37327;&#26367;&#25442;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-14-1-3" class="outline-4">
<h4 id="sec-14-1-3"><span class="section-number-4">14.1.3</span> 内置服务器</h4>
<div class="outline-text-4" id="text-14-1-3">
<div class="org-src-container">
<label class="org-src-name">示例</label>
<pre class="src src-sh">$ php -S localhost:4000
$ php -S 0.0.0.0:4000                         <span class="org-comment-delimiter"># </span><span class="org-comment">&#30417;&#21548;&#25152;&#26377;&#31471;&#21475;</span>
$ php -S localhost:8000 -c app/config/php.ini <span class="org-comment-delimiter"># </span><span class="org-comment">&#25351;&#23450;&#37197;&#32622;&#25991;&#20214;</span>
</pre>
</div>

<ul class="org-ul">
<li>current working directory is the web server's document root be default
</li>
<li>each HTTP request is logged to standard out in terminal
</li>
<li>doesn't support .htaccess files, must use router script for front controllers
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-1-4" class="outline-4">
<h4 id="sec-14-1-4"><span class="section-number-4">14.1.4</span> Router script</h4>
<div class="outline-text-4" id="text-14-1-4">
<ul class="org-ul">
<li>executed before every HTTP request
</li>
<li>if returns false, the static asset referenced by the HTTP request URI is returned
</li>
<li>otherwise the output of the router script is returned as the HTTP response body
</li>
<li>can be used to hardcode the functionality as an .htaccess file for front controllers
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh">php -S localhost:8000 router.php
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-14-1-5" class="outline-4">
<h4 id="sec-14-1-5"><span class="section-number-4">14.1.5</span> CGI</h4>
<div class="outline-text-4" id="text-14-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>-b</code> <code>--bindpath</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>-C</code> <code>--no-chdir</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>-q</code> <code>--no-header</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>-T</code> <code>--timing</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-14-1-6" class="outline-4">
<h4 id="sec-14-1-6"><span class="section-number-4">14.1.6</span> 进程</h4>
<div class="outline-text-4" id="text-14-1-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left"><code>-B</code> <code>--process-begin</code></th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>-R</code> <code>--process-code</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>-F</code> <code>--process-file</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>-E</code> <code>--process-end</code></td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-14-2" class="outline-3">
<h3 id="sec-14-2"><span class="section-number-3">14.2</span> <code>phpenmod</code> <code>phpdismod</code></h3>
<div class="outline-text-3" id="text-14-2">
<div class="org-src-container">

<pre class="src src-sh">phpenmod &lt;extension&gt;
phpdismod &lt;extension&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> 链接</h2>
<div class="outline-text-2" id="text-15">
<ol class="org-ol">
<li><a href="http://cn2.php.net/manual/en/">PHP Manual</a>
</li>
<li><a href="https://github.com/php/php-langspec">PHP Language Specifications</a>
</li>
<li><a href="http://php.net/manual/en/ini.list.php">List of php.ini directives</a>
</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2017-09-15 Fri 21:18</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.5h)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
